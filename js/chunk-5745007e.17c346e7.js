(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5745007e"],{"0b83":function(t,e,n){},"22d9":function(t,e,n){"use strict";var s=n("0b83"),a=n.n(s);a.a},3446:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-9 pt-3 pb-0 bg-muted d-flex flex-column"},[n("loading-overlay",{staticClass:"flex-fill overflow-h",attrs:{loading:t.loadingOverlay}},[n("div",{staticClass:"px-4 row d-block"},["Admin"==t.admin.role?n("div",[n("h5",[n("strong",[t._v("Full Access Admins")])]),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"card border-0 br bg-white mr-2 mb-2 px-2 py-3 justify-content-center text-primary font-weight-bold",on:{click:function(e){return t.addAdminAndAgent("Full",t.fullAccessList)}}},[t._v("+ Add")]),t._l(t.fullAccessList,(function(e){return n("div",{key:e.id,staticClass:"card border-0 br bg-white mr-2 mb-2 px-2 py-3",on:{click:function(n){return n.stopPropagation(),t.editAdminAndAgent("Full",e,t.fullAccessList)}}},[n("div",{staticClass:"d-flex align-items-center"},[n("avatar",{staticClass:"custom-avatar",attrs:{src:t.userIcon,size:40}}),n("div",{staticClass:"ml-2 d-flex flex-column"},[n("span",[t._v(t._s(e.name))])])],1)])}))],2)]):t._e(),t.hasChannel&&"Admin"==t.admin.role?n("div",{staticClass:"mt-2"},[n("h5",[n("strong",[t._v("Channel Admins")])]),n("div",{staticClass:"d-flex"},[n("div",{staticClass:"card border-0 br bg-white mr-2 mb-2 px-2 py-3 justify-content-center text-primary font-weight-bold",on:{click:function(e){return t.addAdminAndAgent("Team",t.teamAllAdminList)}}},[t._v("+ Add")]),t._l(t.teamAllAdminList,(function(e){return n("div",{key:e.id,staticClass:"card border-0 br bg-white mr-2 mb-2 px-2 py-3",on:{click:function(n){return n.stopPropagation(),t.editAdminAndAgent("Team",e,t.teamAllAdminList)}}},[n("div",{staticClass:"d-flex"},[n("avatar",{staticClass:"custom-avatar",attrs:{src:t.userIcon,size:40}}),n("div",{staticClass:"ml-2 d-flex flex-column"},[n("span",[t._v(t._s(e.name))]),t._l(e.channels,(function(e,s){return n("span",{key:s},[n("small",{staticClass:"text-primary font-weight-bold"},[t._v(" "+t._s(e)+" ")])])}))],2)],1)])}))],2)]):t._e(),n("div",{staticClass:"mt-2"},[n("h5",[n("strong",[t._v("Agents")])]),n("div",{staticClass:"mb-2"},[n("button",{staticClass:"mb-2 btn btn-primary float-right",on:{click:function(e){return t.addAdminAndAgent("Agent",t.getFilterAgents)}}},[t._v("Add Agent")]),t.hasChannel?[n("label",{staticClass:"text-muted"},[t._v("Filter By Channel")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.filterChannel,expression:"filterChannel"}],staticClass:"form-control br",staticStyle:{width:"250px"},on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filterChannel=e.target.multiple?n:n[0]}}},["Admin"==t.admin.role?n("option",[t._v("All")]):t._e(),t._l(t.channelList,(function(e){return n("option",{key:e,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2)]:t._e()],2),n("div",{staticStyle:{clear:"both"}},t._l(t.getFilterAgents,(function(e){return n("div",{key:e.key,staticClass:"card pointer border-0 br bg-white mr-2 mb-2 px-2 py-3 d-flex justify-content-between flex-row align-items-center",on:{click:function(n){return n.stopPropagation(),t.editAdminAndAgent("Agent",e,t.getFilterAgents)}}},[n("div",{staticClass:"d-flex align-items-center"},[n("avatar",{staticClass:"custom-avatar",attrs:{src:t.userIcon,size:40}}),n("span",[t._v(t._s(e.name))])],1),t.hasChannel?n("div",{staticClass:"d-flex flex-column align-items-center"},t._l(e.channels,(function(e){return n("small",{key:e,staticClass:"font-weight-bold text-primary"},[t._v(t._s(e))])})),0):t._e()])})),0)])])]),n("user-modal",{on:{updateUser:function(e){return t.getPageData()},updateFilterUser:t.updateFilterUser}})],1)},a=[],i=(n("a4d3"),n("e01a"),n("d28b"),n("4de4"),n("7db0"),n("4160"),n("d81d"),n("b0c0"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2fa7")),r=(n("96cf"),n("89ba")),l=n("bc3a"),o=n.n(l),c=n("2f62"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",{attrs:{name:"adminAndAgent",height:"auto",width:"400"},on:{"before-open":t.beforeOpen,opened:t.focus}},[n("loading-overlay",{attrs:{white:"",loading:t.loading}},[n("div",{staticClass:"p-2"},[[n("div",{staticClass:"form"},[n("label",[t._v("User Name")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],ref:"username",staticClass:"textbox form-control",attrs:{placeholder:" Enter User Name",type:"text"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),n("label",[t._v("Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"textbox form-control",attrs:{placeholder:" Enter Password",type:"password","show-password":""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),"Full"!=t.status?[t.channelList.length>1?n("label",[t._v("Channels")]):t._e(),t.channelList.length>1?n("v-select",{staticClass:"style-chooser",attrs:{multiple:"",options:t.channelList},model:{value:t.channels,callback:function(e){t.channels=e},expression:"channels"}}):t._e()]:t._e(),n("div",{staticClass:"d-flex flex-row-reverse justify-content-between align-items-center"},[t.editModal?n("button",{staticClass:"btn btn-primary my-2 btn-sm",on:{click:t.update}},[t._v("Update")]):t._e(),t.editModal?n("a",{staticClass:"text-danger mr-2",on:{click:t.remove}},[n("i",{staticClass:"lar la-trash-alt"}),t._v(" Delete ")]):n("button",{staticClass:"btn btn-primary my-2 btn-sm",on:{click:t.add}},[t._v("Add")])]),t.exists?n("a",{staticClass:"text-danger mr-2"},[n("i",{staticClass:"las la-exclamation-circle"}),t._v("User Already Exist ")]):t._e()],2)]],2)])],1)},d=[],f=(n("caad"),n("2532"),n("3f06")),h={components:{LoadingOverlay:f["a"]},data:function(){return{username:"",password:"",id:0,user:{},userList:[],status:"",loading:!1,channels:[],channelList:[],exist:""}},methods:{resetModal:function(){this.fullname="",this.username="",this.password="",this.user={},this.userList=[]},beforeOpen:function(t){this.resetModal();var e=t.params,n=e.status,s=e.editModal,a=e.user,i=e.channel,r=e.userList,l=e.exist;this.status=n,this.exist=l,this.channelList=i,1==this.channelList.length&&(this.channels=i),this.userList=r,s&&(this.editModal=s),a&&(this.user=a,this.username=a.name,this.password=a.password,this.channels=a.channels,this.id=a.id)},focus:function(){this.$refs.username.focus()},update:function(){var t=this;if(this.username){if(this.selfExist){if(this.passwordExists&&this.channelExists)return}else if(this.exists)return;var e={id:this.id,username:this.username,password:this.password,role:this.status,channel:this.channels};o.a.post("admin/upDateAdminsAndAgents",e).then((function(e){200==e.status&&t.$emit("updateUser")})).finally((function(){t.$modal.hide("adminAndAgent")})),this.$emit("updateUser",e)}},remove:function(){var t=this,e={id:this.id};o.a.post("admin/removeAdminsAndAgents",e).then((function(e){200==e.status&&t.$emit("updateUser")})).finally((function(){t.$modal.hide("adminAndAgent")}))},add:function(){var t=this;if(this.username&&!this.exists){var e={username:this.username,password:this.password,role:this.status,channel:this.channels};o.a.post("admin/upsertAdminsAndAgents",e).then((function(n){201==n.status&&("Agent"==e.role?t.$emit("updateFilterUser",n.data,e):t.$emit("updateUser"))})).finally((function(){t.$modal.hide("adminAndAgent")}))}}},computed:{selfExist:function(){return this.userList.map((function(t){return t.name})).includes(this.username)},exists:function(){var t=this;return"Add"==this.exist?this.userList.map((function(t){return t.name})).includes(this.username):this.userList.filter((function(e){return e.name!=t.user.name})).map((function(t){return t.name})).includes(this.username)},passwordExists:function(){return this.user.password==this.password},channelExists:function(){return this.user.channels.length==this.channels.length},editModal:function(){return this.user.id}}},m=h,p=n("2877"),v=Object(p["a"])(m,u,d,!1,null,null,null),g=v.exports;function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var y={components:{UserModal:g,LoadingOverlay:f["a"]},data:function(){return{fullAccessList:[],teamAllAdminList:[],teamAgentList:[],filterAgentList:[],channelList:[],channelNameList:[],channelId:"",fullname:"",username:"",password:"",channel:[],filterChannel:"All",role:"",show:"Admin",id:"",status:!1,loadingOverlay:!1}},methods:{addAdminAndAgent:function(t,e){this.$modal.show("adminAndAgent",{status:t,exist:"Add",userList:e,user:e,channel:this.channelNameList})},editAdminAndAgent:function(t,e,n){this.$modal.show("adminAndAgent",{status:t,exist:"Edit",user:e,userList:n,channel:this.channelNameList})},getPageData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loadingOverlay=!0,t.next=4,o.a.get("settings/user").then((function(t){e.channelList=t.data.channels,e.fullAccessList=t.data.fullAccessAdmins,e.teamAllAdminList=t.data.teamAdmins,e.filterAgentList=t.data.agents,e.channelNameList=t.data.channels.map((function(t){return t.name})),console.log("filteragent",e.filterAgentList)})).finally((function(){e.loadingOverlay=!1}));case 4:t.sent,t.next=10;break;case 7:return t.prev=7,t.t0=t["catch"](0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),updateFilterUser:function(t,e){console.log(e),this.filterAgentList.unshift({id:t,name:e.username,role:e.role,password:e.password,channels:e.channel})},update:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,n,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("All"!=this.filterChannel){t.next=4;break}this.getPageData(),t.next=9;break;case 4:return e={channel:this.filterChannel},n=this.$loading.show({loader:"dots"}),t.next=8,o.a.post("admin/getFiltersAgents",e).then((function(t){s.filterAgentList=t.data,console.log("filter",s.filterAgentList)})).finally((function(){n.hide()}));case 8:t.sent;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getName:function(t){var e="",n=!0,s=!1,a=void 0;try{for(var i,r=t[Symbol.iterator]();!(n=(i=r.next()).done);n=!0){var l=i.value;e+=l+", "}}catch(o){s=!0,a=o}finally{try{n||null==r.return||r.return()}finally{if(s)throw a}}return e},getAdminsUnderChannel:function(t,e){return t.find((function(t){return t.Key===e})).List}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getPageData();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),computed:A({},Object(c["b"])(["admin"]),{userIcon:function(){return n("c121")},getFilterAgents:function(){return this.filterAgentList},hasChannel:function(){return this.channelList.length>1}}),watch:{filterChannel:function(){this.update()}}},x=y,w=(n("616f"),Object(p["a"])(x,s,a,!1,null,null,null));e["default"]=w.exports},"3ca3":function(t,e,n){"use strict";var s=n("6547").charAt,a=n("69f3"),i=n("7dd0"),r="String Iterator",l=a.set,o=a.getterFor(r);i(String,"String",(function(t){l(this,{type:r,string:String(t),index:0})}),(function(){var t,e=o(this),n=e.string,a=e.index;return a>=n.length?{value:void 0,done:!0}:(t=s(n,a),e.index+=t.length,{value:t,done:!1})}))},"3f06":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"position-relative"},[t.loading?n("div",{staticClass:"overlay",class:{"white-transparent":t.white}},[n("spinner")],1):t._e(),t._t("default")],2)},a=[],i=n("cf21"),r={components:{Spinner:i["a"]},props:{loading:{default:!1},white:{type:Boolean,default:!1}}},l=r,o=(n("22d9"),n("2877")),c=Object(o["a"])(l,s,a,!1,null,"6cc85e67",null);e["a"]=c.exports},"616f":function(t,e,n){"use strict";var s=n("f7af"),a=n.n(s);a.a},6547:function(t,e,n){var s=n("a691"),a=n("1d80"),i=function(t){return function(e,n){var i,r,l=String(a(e)),o=s(n),c=l.length;return o<0||o>=c?t?"":void 0:(i=l.charCodeAt(o),i<55296||i>56319||o+1===c||(r=l.charCodeAt(o+1))<56320||r>57343?t?l.charAt(o):i:t?l.slice(o,o+2):r-56320+(i-55296<<10)+65536)}};t.exports={codeAt:i(!1),charAt:i(!0)}},c121:function(t,e,n){t.exports=n.p+"img/user.c5e8f173.png"},d28b:function(t,e,n){var s=n("746f");s("iterator")},ddb0:function(t,e,n){var s=n("da84"),a=n("fdbc"),i=n("e260"),r=n("9112"),l=n("b622"),o=l("iterator"),c=l("toStringTag"),u=i.values;for(var d in a){var f=s[d],h=f&&f.prototype;if(h){if(h[o]!==u)try{r(h,o,u)}catch(p){h[o]=u}if(h[c]||r(h,c,d),a[d])for(var m in i)if(h[m]!==i[m])try{r(h,m,i[m])}catch(p){h[m]=i[m]}}}},e01a:function(t,e,n){"use strict";var s=n("23e7"),a=n("83ab"),i=n("da84"),r=n("5135"),l=n("861d"),o=n("9bf2").f,c=n("e893"),u=i.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(d[e]=!0),e};c(f,u);var h=f.prototype=u.prototype;h.constructor=f;var m=h.toString,p="Symbol(test)"==String(u("test")),v=/^Symbol\((.*)\)[^)]+$/;o(h,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=m.call(t);if(r(d,t))return"";var n=p?e.slice(7,-1):e.replace(v,"$1");return""===n?void 0:n}}),s({global:!0,forced:!0},{Symbol:f})}},f7af:function(t,e,n){}}]);
//# sourceMappingURL=chunk-5745007e.17c346e7.js.map