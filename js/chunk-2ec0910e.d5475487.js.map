{"version":3,"sources":["webpack:///./node_modules/echarts/lib/component/tooltip.js","webpack:///./node_modules/echarts/lib/coord/cartesian/cartesianAxisHelper.js","webpack:///./node_modules/echarts/lib/component/gridSimple.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipContent.js","webpack:///./node_modules/echarts/lib/component/axisPointer/findPointFromSeries.js","webpack:///./node_modules/echarts/lib/chart/bar/BarSeries.js","webpack:///./node_modules/echarts/lib/component/axisPointer/globalListener.js","webpack:///./node_modules/echarts/lib/chart/pie/PieView.js","webpack:///./node_modules/echarts/lib/chart/pie/pieLayout.js","webpack:///./node_modules/echarts/lib/chart/bar/BaseBarSeries.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipView.js","webpack:///./node_modules/echarts/lib/component/legend/legendAction.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/AxisModel.js","webpack:///./node_modules/echarts/lib/component/axisPointer/CartesianAxisPointer.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Grid.js","webpack:///./node_modules/echarts/lib/component/legend/LegendView.js","webpack:///./node_modules/echarts/lib/component/title.js","webpack:///./node_modules/echarts/lib/component/axis/AxisView.js","webpack:///./node_modules/echarts/lib/chart/bar/BarView.js","webpack:///./node_modules/echarts/lib/component/helper/selectableMixin.js","webpack:///./node_modules/echarts/lib/coord/axisDefault.js","webpack:///./node_modules/echarts/lib/action/createDataSelectAction.js","webpack:///./node_modules/echarts/lib/component/helper/listComponent.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipRichContent.js","webpack:///./node_modules/echarts/lib/component/legend/LegendModel.js","webpack:///./node_modules/echarts/lib/coord/cartesian/GridModel.js","webpack:///./node_modules/echarts/lib/component/legend/legendFilter.js","webpack:///./node_modules/echarts/lib/chart/bar.js","webpack:///./node_modules/echarts/lib/visual/dataColor.js","webpack:///./node_modules/echarts/lib/coord/axisModelCreator.js","webpack:///./node_modules/echarts/lib/component/tooltip/TooltipModel.js","webpack:///./node_modules/echarts/lib/component/axis.js","webpack:///./node_modules/echarts/lib/chart/helper/createClipPathFromCoordSys.js","webpack:///./node_modules/echarts/lib/chart/bar/barItemStyle.js","webpack:///./node_modules/echarts/lib/chart/pie/labelLayout.js","webpack:///./node_modules/echarts/lib/chart/pie.js","webpack:///./node_modules/echarts/lib/util/shape/sausage.js","webpack:///./node_modules/echarts/lib/visual/LegendVisualProvider.js","webpack:///./node_modules/echarts/lib/chart/helper/labelHelper.js","webpack:///./node_modules/echarts/lib/component/axisPointer.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian2D.js","webpack:///./node_modules/echarts/lib/component/axisPointer/modelHelper.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Cartesian.js","webpack:///./node_modules/echarts/lib/component/legend.js","webpack:///./node_modules/echarts/lib/processor/dataFilter.js","webpack:///./node_modules/echarts/lib/component/axisPointer/AxisPointerView.js","webpack:///./node_modules/echarts/lib/component/axisPointer/BaseAxisPointer.js","webpack:///./node_modules/echarts/lib/chart/helper/createListSimply.js","webpack:///./node_modules/echarts/lib/chart/bar/helper.js","webpack:///./node_modules/echarts/lib/component/axisPointer/axisTrigger.js","webpack:///./node_modules/echarts/lib/coord/cartesian/Axis2D.js","webpack:///./node_modules/echarts/lib/component/axis/CartesianAxisView.js","webpack:///./node_modules/echarts/lib/chart/pie/PieSeries.js","webpack:///./node_modules/echarts/lib/component/axis/AxisBuilder.js","webpack:///./node_modules/echarts/lib/component/axisPointer/viewHelper.js"],"names":["echarts","registerAction","type","event","update","zrUtil","layout","gridModel","axisModel","opt","grid","coordinateSystem","axis","otherAxisOnZeroOf","getAxesOnZeroOf","rawAxisPosition","position","axisPosition","axisDim","dim","rect","getRect","rectBound","x","width","y","height","idx","left","right","top","bottom","onZero","axisOffset","get","posBound","onZeroCoord","toGlobalCoord","dataToCoord","Math","max","min","rotation","PI","dirMap","labelDirection","tickDirection","nameDirection","labelOffset","retrieve","labelInside","labelRotate","z2","exports","graphic","extendComponentView","render","ecModel","this","group","removeAll","add","Rect","shape","style","defaults","fill","getItemStyle","silent","registerPreprocessor","option","xAxis","yAxis","zrColor","eventUtil","env","formatUtil","each","toCamelCase","vendors","gCssText","assembleTransition","duration","transitionCurve","transitionText","map","vendorPrefix","join","assembleFont","textStyleModel","cssText","fontSize","color","getTextColor","push","getFont","round","name","val","assembleCssText","tooltipModel","transitionDuration","backgroundColor","getModel","padding","canvasSupported","toHex","borderName","camelCase","normalizeCssArray","TooltipContent","container","api","wxa","el","document","createElement","zr","_zr","getZr","_x","getWidth","_y","getHeight","appendChild","_container","_show","_hideTimeout","self","onmouseenter","_enterable","clearTimeout","_inContent","onmousemove","e","window","handler","normalizeEvent","dispatch","onmouseleave","hideLater","_hideDelay","prototype","constructor","stl","currentStyle","defaultView","getComputedStyle","domStyle","show","display","innerHTML","pointerEvents","setContent","content","setEnterable","enterable","getSize","clientWidth","clientHeight","moveTo","viewportRootOffset","painter","getViewportRootOffset","offsetLeft","offsetTop","hide","time","setTimeout","bind","isShow","getOuterSize","parseInt","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth","_default","module","modelUtil","finder","seriesModel","point","seriesIndex","getSeriesByIndex","data","getData","dataIndex","queryDataIndex","isArray","getItemGraphicEl","coordSys","getTooltipPosition","dataToPoint","getValues","dimensions","mapDimension","getBoundingRect","clone","applyTransform","transform","BaseBarSeries","extend","dependencies","brushSelector","getProgressive","getProgressiveThreshold","progressiveThreshold","largeThreshold","defaultOption","clip","roundCap","_model","makeInner","inner","register","key","node","records","initGlobalListeners","record","useHandler","eventType","cb","on","dis","makeDispatchAction","dispatchAction","dispatchTooltipFinally","pendings","initialized","curry","doEnter","onLeave","actuallyPayload","showLen","showTip","length","hideLen","hideTip","currTrigger","payload","pendingList","unregister","ChartView","updateDataSelected","uid","hasAnimation","getName","selectedOffset","from","seriesId","id","toggleItemSelected","getItemLayout","isSelected","midAngle","startAngle","endAngle","dx","cos","dy","sin","offset","animate","when","start","attr","PiePiece","Group","call","sector","Sector","polyline","Polyline","text","Text","updateData","piePieceProto","firstCreate","childAt","labelLine","labelText","hostModel","itemModel","getItemModel","sectorShape","label","animationTypeUpdate","getShallow","setShape","animationType","r","r0","initProps","updateProps","visualColor","getItemVisual","useStyle","lineJoin","hoverStyle","cursorStyle","withAnimation","_updateLabel","highDownOnUpdate","isAnimationEnabled","fromState","toState","ignore","hoverIgnore","stopAnimation","animateTo","normalIgnore","setHoverStyle","labelLayout","isNaN","targetLineShape","points","linePoints","targetTextStyle","origin","labelModel","labelHoverModel","labelLineModel","labelLineHoverModel","setLabelStyle","labelFetcher","labelDataIndex","defaultText","autoColor","useInsideStyle","inside","textAlign","textVerticalAlign","verticalAlign","opacity","setStyle","stroke","getLineStyle","smooth","inherits","PieView","init","sectorGroup","_sectorGroup","oldData","_data","isFirstRender","onSectorClick","selectedMode","diff","piePiece","eachChild","child","setItemGraphicEl","newIdx","oldIdx","off","remove","execute","count","s","removeClipPath","setClipPath","_createClipPath","cx","cy","clockwise","dispose","clipPath","initOrUpdate","containPoint","itemLayout","radius","sqrt","_number","parsePercent","linearMap","PI2","RADIAN","getViewRect","getLayoutRect","getBoxLayoutParams","seriesType","eachSeriesByType","valueDim","viewRect","center","size","minAngle","validDataCount","value","sum","getSum","unitRadian","roseType","stillShowZeroSum","extent","getDataExtent","restAngle","valueSumLargerThanMinAngle","currentAngle","dir","angle","setItemLayout","NaN","SeriesModel","createListFromArray","getInitialData","getSource","useEncodeDefaulter","getMarkerPosition","pt","clampData","getLayout","offsetIndex","getBaseAxis","isHorizontal","zlevel","z","legendHoverLink","barMinHeight","barMinAngle","large","progressive","progressiveChunkMode","itemStyle","emphasis","TooltipRichContent","numberUtil","findPointFromSeries","layoutUtil","Model","globalListener","axisHelper","axisPointerViewHelper","getTooltipRenderMode","proxyRect","tooltipContent","getComponent","renderMode","_renderMode","getDom","_newLine","_tooltipContent","_tooltipModel","_ecModel","_api","_lastDataByCoordSys","_alwaysShowContent","_initGlobalListener","_keepShow","triggerOn","indexOf","_tryShow","_hide","_lastX","_lastY","_refreshUpdateTimeout","isDisposed","manuallyShowTip","_ticket","dataByCoordSys","tooltip","offsetX","offsetY","target","tooltipOption","_manuallyAxisShowTip","pointInfo","findHover","manuallyHideTip","coordSysAxesInfo","buildTooltipModel","model","_showAxisTooltip","_showSeriesItemTooltip","_showComponentItemTooltip","_showOrMove","delay","_showTimout","globalTooltipModel","singleDefaultHTML","singleParamsList","singleTooltipModel","newLine","markers","itemCoordSys","dataByAxis","item","axisIndex","axisValue","seriesDefaultHTML","valueLabel","getValueLabel","seriesDataIndices","valueLabelOpt","idxItem","series","dataIndexInside","dataParams","getDataParams","axisType","axisId","getAxisRawValue","axisValueLabel","html","seriesTooltip","formatTooltip","isObject","newMarkers","merge","firstLine","encodeHTML","reverse","positionExpr","_updateContentNotChangedOnAxis","_updatePosition","_showTooltipContent","random","undefined","dataModel","dataType","tooltipTrigger","defaultHtml","params","asyncTicket","getRawIndex","tooltipOpt","formatter","subTooltipModel","formatTpl","callback","cbTicket","viewWidth","viewHeight","contentSize","align","vAlign","viewSize","slice","layoutRect","pos","calcTooltipPosition","refixTooltipPosition","isCenterAlign","confineTooltipPosition","lastCoordSys","contentNotChanged","lastItemCoordSys","indexCoordSys","lastDataByAxis","thisItemCoordSys","thisDataByAxis","lastItem","indexAxis","thisItem","lastIndices","newIndices","lastIdxItem","j","newIdxItem","modelCascade","resultModel","pop","isInstance","gapH","gapV","domWidth","domHeight","gap","rectWidth","rectHeight","legendSelectActionHandler","methodName","selectedMap","isToggleSelect","eachComponent","legendModel","legendData","isItemSelected","hasOwnProperty","selected","AxisPointerModel","extendComponentModel","snap","triggerTooltip","status","link","animation","animationDurationUpdate","lineStyle","shadowStyle","precision","margin","borderColor","borderWidth","shadowBlur","shadowColor","handle","icon","shadowOffsetX","shadowOffsetY","throttle","ComponentModel","axisModelCreator","axisModelCommonMixin","AxisModel","superApply","arguments","resetRange","mergeOption","restoreData","getCoordSysModel","queryComponents","mainType","index","gridIndex","gridId","getAxisType","extraOption","BaseAxisPointer","viewHelper","cartesianAxisHelper","AxisView","CartesianAxisPointer","makeElOption","elOption","axisPointerModel","axisPointerType","otherExtent","getCartesian","getOtherAxis","getGlobalExtent","pixelValue","elStyle","buildElStyle","pointerOption","pointerShapeBuilder","graphicKey","pointer","layoutInfo","buildCartesianSingleLabelElOption","getHandleTransform","labelMargin","getTransformedPosition","updateHandleTransform","delta","axisExtent","dimIndex","currPosition","cursorOtherValue","cursorPoint","tooltipOptions","line","targetShape","makeLineShape","getAxisDimIndex","subPixelOptimize","shadow","bandWidth","getBandWidth","span","makeRectShape","registerAxisPointerClass","_config","_util","__DEV__","_layout","_axisHelper","createScaleByModel","ifAxisCrossZero","niceScaleExtent","estimateLabelUnionRect","Cartesian2D","Axis2D","CoordinateSystem","_dataStackHelper","getStackedDimension","isAxisUsedInTheGrid","Grid","_coordsMap","_coordsList","_axesMap","_axesList","_initCartesian","gridProto","fixAxisOnZero","axesMap","otherAxisDim","onZeroRecords","otherAxes","onZeroAxisIndex","canOnZeroToAxis","getOnZeroRecordKey","updateAxisTransform","coordBase","getExtent","axisExtentSum","coord","toLocalCoord","axisPointerEnabled","_rect","_updateScale","scale","resize","ignoreContainLabel","gridRect","axesList","adjustAxes","inverse","setExtent","labelUnionRect","getAxis","axesMapOnDim","getAxes","xAxisIndex","yAxisIndex","i","coordList","getCartesians","convertToPixel","_findConvertTarget","cartesian","convertFromPixel","pointToData","coordToData","xAxisModel","getReferringComponents","yAxisModel","coordsList","componentIndex","axisPositionUsed","axesCount","createAxisCreator","isCategory","onBand","addAxis","unionExtent","unionExtentFromData","Infinity","eachSeries","isCartesian2D","axesModels","findAxesModels","getTooltipAxes","baseAxes","baseAxis","otherAxis","axesTypes","create","grids","_symbol","createSymbol","_listComponent","makeBackground","newlineDisabled","_contentGroup","_backgroundEl","_selectorGroup","_isFirstRender","getContentGroup","getSelectorGroup","resetInner","itemAlign","orient","selector","selectorPosition","renderInner","positionInfo","viewportSize","maxSize","mainRect","layoutInner","contentGroup","legendDrawnMap","createHashMap","selectMode","excludeSeriesId","eachRawSeries","getSeriesByName","getVisual","legendSymbolType","symbolType","itemGroup","_createItem","dispatchSelectAction","dispatchHighlightAction","dispatchDownplayAction","set","legendVisualProvider","provider","containName","indexOfName","newline","_createSelector","selectorGroup","createSelectorButton","selectorItem","onclick","emphasisLabelModel","title","isRectText","itemWidth","itemHeight","inactiveColor","inactiveBorderColor","symbolKeepAspect","legendModelItemStyle","itemIcon","legendGlobalTooltipModel","parentModel","legendSymbol","setSymbolStyle","legendSymbolCenter","textX","replace","setTextStyle","textFill","hitRect","invisible","formatterParams","componentType","legendIndex","$vars","__legendDataIndex","box","contentRect","contentPos","selectorRect","selectorPos","selectorButtonGap","orientIdx","getOrient","wh","hw","yx","symbol","seriesName","dataName","storage","getDisplayList","useHoverLayer","layoutMode","ignoreSize","subtext","subtarget","itemGap","textStyle","fontWeight","subtextStyle","titleModel","subtextStyleModel","retrieve2","textEl","disableBox","textRect","subText","subTextEl","sublink","triggerEvent","open","eventData","groupRect","layoutOption","alignStyle","axisPointerModelHelper","_axisPointer","axisPointerClass","fixValue","updateAxisPointer","force","axisPointer","disposeAxisPointer","axisView","forceRender","Clazz","getAxisPointerClass","getAxisPointerModel","axisPointerClazz","clazz","_helper","setLabel","barItemStyle","Path","_throttle","_createClipPathFromCoordSys","createClipPath","Sausage","BAR_BORDER_WIDTH_QUERY","_eventPos","getClipArea","coordSysClipArea","getArea","expandWidth","extendChartView","_updateDrawMode","coordinateSystemType","_isLargeDraw","_renderLarge","_renderNormal","incrementalPrepareRender","_clear","incrementalRender","_incrementalRenderLarge","isLargeDraw","pipelineContext","isHorizontalOrRadial","animationModel","needsClip","hasValue","isClipped","elementCreator","updateStyle","newIndex","oldIndex","removeRect","removeSector","createLarge","noop","eachItemGraphicEl","mathMax","mathMin","cartesian2d","coordSysBoundingRect","signWidth","signHeight","x2","y2","clipped","polar","isUpdate","rectShape","animateProperty","animateTarget","isRadial","ShapeClass","parent","fixedLineWidth","getLineWidth","signX","signY","isZeroOnPolar","isPolar","itemStyleModel","getBarItemStyle","labelPositionOutside","rawLayout","lineWidth","abs","LargePath","buildPath","ctx","startPoint","__startPoint","baseDimIdx","__baseDimIdx","lineTo","incremental","__largeDataIndices","__barWidth","setLargeStyle","largePathUpdateDataIndex","largePath","largePathFindDataIndex","valueDimIdx","largeDataIndices","barWidthHalf","startValueVal","pointerBaseVal","pointerValueVal","baseLowerBound","baseUpperBound","len","ii","barBaseVal","barValueVal","updateSelectedMap","targetList","_targetList","_selectTargetMap","reduce","targetMap","select","unSelect","toggleSelected","nameLocation","nameRotate","nameTruncate","maxWidth","ellipsis","placeholder","nameTextStyle","nameGap","axisLine","symbolSize","axisTick","axisLabel","rotate","showMinLabel","showMaxLabel","splitLine","splitArea","areaStyle","axisDefault","categoryAxis","boundaryGap","deduplication","alignWithLabel","interval","valueAxis","splitNumber","minorTick","minorSplitLine","timeAxis","logAxis","logBase","actionInfos","actionInfo","subType","query","method","layoutBox","positionElement","componentModel","boxLayoutParams","markerRich","prefix","suffix","startId","endId","substr","textWidth","textHeight","textBorderRadius","textBackgroundColor","textOffset","rich","textLineHeight","textPadding","bounding","isNameSpecified","lang","langSelector","legend","defaultSelectorOption","all","LegendModel","mergeDefaultAndTheme","_updateSelector","superCall","isString","optionUpdated","_updateData","hasSelected","potentialData","availableNames","isPotential","names","getAllNames","isSeriesFiltered","concat","_availableNames","rawData","dataItem","allSelect","inverseSelect","borderRadius","selectorLabel","fontFamily","selectorItemGap","containLabel","legendModels","findComponents","filterSeries","_barGrid","largeLayout","registerLayout","PRIORITY","VISUAL","LAYOUT","PROGRESSIVE_LAYOUT","registerVisual","reset","setVisual","getTargetSeries","paletteScope","seiresModelMap","__paletteScope","dataAll","getRawData","idxMap","rawIdx","filteredIdx","singleDataColor","singleDataBorderColor","getColorFromPalette","setItemVisual","getLayoutParams","mergeLayoutParam","OrdinalMeta","AXIS_TYPES","axisName","BaseAxisModelClass","axisTypeDefaulter","extraDefaultOption","inputPositionParams","themeModel","getTheme","getDefaultOption","thisOption","__ordinalMeta","createByAxisModel","getCategories","categories","getOrdinalMeta","mergeAll","registerSubTypeDefaulter","showContent","trigger","alwaysShowContent","displayMode","confine","showDelay","hideDelay","extraCssText","animationEasingUpdate","crossStyle","createGridClipPath","createPolarClipPath","sectorArea","makeStyleMapper","excludes","getBorderLineDash","lineDash","textContain","adjustSingleSide","list","viewLeft","viewTop","farthestX","shiftDown","end","shiftUp","changeX","isDownList","lastDeltaX","Number","MAX_VALUE","l","labelAlignTo","deltaY","length2","len2","deltaX","sort","a","b","lastY","upList","downList","avoidOverlap","labelLayoutList","leftList","rightList","leftmostX","rightmostX","isPositionCenter","targetTextWidth","isAlignToEdge","realTextWidth","labelDistance","bleedMargin","truncateText","font","dist","hasLabelRotate","minShowLabelRadian","labelPosition","labelLineLen","labelLineLen2","textY","getFormattedLabel","isLabelInside","x1","y1","x3","y3","createDataSelectAction","dataColor","pieLayout","dataFilter","registerProcessor","_graphic","extendShape","dr","rCenter","unitStartX","unitStartY","unitEndX","unitEndY","lessThanCircle","arc","closePath","LegendVisualProvider","getDataWithEncodedVisual","mapArray","dataWithEncodedVisual","_dataProvider","retrieveRawValue","getDefaultLabel","labelDims","vals","axisTrigger","PROCESSOR","STATISTIC","collect","BoundingRect","Cartesian","getAxesByScale","axisX","axisY","contain","containData","reserved","out","xScale","yScale","xAxisExtent","yAxisExtent","parse","xExtent","yExtent","result","axesInfo","seriesInvolved","coordSysMap","collectAxesInfo","collectSeriesInfo","globalAxisPointerModel","linksOption","linkGroups","getCoordinateSystems","coordSysKey","makeKey","axesInfoInCoordSys","coordSysModel","baseTooltipModel","saveTooltipAxisInfo","triggerAxis","cross","tooltipAxes","fromTooltip","axisPointerShow","isHandleTrigger","makeAxisPointerModel","involveSeries","axisInfo","useHandle","seriesModels","groupIndex","getLinkGroupIndex","linkGroup","mapper","tooltipAxisPointerModel","volatileOption","field","labelOption","tooltipAxisPointerLabelShow","seriesTooltipTrigger","seriesTooltipShow","seriesDataCount","linkOption","checkPropInLink","linkPropValue","axisPropValue","getAxisInfo","isBlank","dimAxisMapper","_axes","_dimList","scaleType","toLowerCase","filter","_dataCoordConvert","input","dimList","output","Array","legendFilter","Component","SERIES_FILTER","filterSelf","AxisPointerView","clazzUtil","eventTool","throttleUtil","moveAnimation","props","propsEqual","lastProp","lastProps","newProps","equals","updateLabelShowHide","labelEl","getHandleTransProps","trans","updateMandatoryProps","traverse","_group","_lastGraphicKey","_handle","_dragging","_lastValue","_lastStatus","_payloadInfo","animationThreshold","_axisModel","_axisPointerModel","clear","_moveAnimation","determineAnimation","doUpdateProps","updatePointerEl","updateLabelEl","createPointerEl","createLabelEl","_renderHandle","isCategoryAxis","useSnap","pointerEl","isInit","handleModel","createIcon","cursor","draggable","stop","onmousedown","_onHandleDragMove","drift","ondragend","_onHandleDragEnd","includeStyles","handleSize","createOrUpdate","_moveHandleToValue","_doDispatchAxisPointer","payloadInfo","doClear","buildLabel","xy","xDimIndex","enableClassExtend","createDimensions","List","nameList","coordDimensions","source","dimensionsInfo","initData","_labelHelper","normalStyle","hoverLabelModel","fixPosition","textPosition","modelHelper","illegalPoint","isIllegalPoint","inputAxesInfo","shouldHide","outputFinder","showValueMap","updaters","showPointer","showTooltip","coordSysContainsPoint","inputAxisInfo","findInputAxisInfo","processOnAxis","linkTriggers","tarAxisInfo","tarKey","srcAxisInfo","srcKey","srcValItem","makeMapperParam","updateModelActually","dispatchTooltipActually","dispatchHighDownActually","newValue","dontSnap","buildPayloadsBySeries","payloadBatch","snapToValue","minDist","minDiff","seriesNestestValue","dataIndices","dataDim","getAxisTooltipData","nestestValue","indicesOfNearest","isFinite","coordSysItem","coordSysId","coordSysIndex","coordSysType","coordSysMainType","outputAxesInfo","valItem","sampleItem","escapeConnect","highDownKey","lastHighlights","newHighlights","batchItem","toHighlight","toDownplay","batch","Axis","coordExtent","asc","ret","clamp","AxisBuilder","axisBuilderAttrs","selfBuilderAttrs","CartesianAxisView","oldAxisGroup","_axisGroup","axisBuilder","getGroup","groupTransition","_splitAreaColors","_splitLine","splitLineModel","lineStyleModel","lineColors","lineCount","ticksCoords","getTicksCoords","tickModel","p1","p2","tickCoord","colorIndex","tickValue","Line","anid","_minorSplitLine","minorSplitLineModel","minorTicksCoords","getMinorTicksCoords","k","_splitArea","splitAreaModel","areaStyleModel","areaColors","areaColorsLen","lastSplitAreaColors","newSplitAreaColors","cIndex","prev","getAreaStyle","createListSimply","getPercentWithPrecision","dataSelectableMixin","retrieveRawAttr","_sourceHelper","makeSeriesEncodeForNameBased","PieSeries","extendSeriesModel","_createSelectableList","_defaultLabelLine","newOption","encodeDefaulter","valueList","percent","defaultEmphasis","labelLineNormalOpt","labelLineEmphasisOpt","hoverAnimation","minShowLabelAngle","hoverOffset","avoidLabelOverlap","percentPrecision","alignTo","distanceToLabelLine","animationEasing","mixin","isRadianAroundZero","remRadian","matrixUtil","_vector","v2ApplyTransform","shouldShowAllLabels","dumbGroup","updateTransform","_transform","_dumbGroup","hasBuilder","builders","matrix","pt1","pt2","lineCap","strokeContainThreshold","arrows","arrowSize","arrowOffset","symbolWidth","symbolHeight","axisTickLabel","ticksEls","buildAxisMajorTicks","labelEls","buildAxisLabel","fixMinMaxLabelShow","buildAxisMinorTicks","axisNameAvailableWidth","gapSignal","isNameLocationCenter","nameRotation","innerTextLayout","endTextLayout","textFont","truncateOpt","nameTruncateMaxWidth","truncatedText","minChar","__fullText","__truncatedText","isLabelSilent","makeAxisEventDataBase","targetType","decomposeTransform","axisRotation","textRotation","direction","rotationDiff","textRotate","onLeft","tickEls","firstLabel","nextLabel","lastLabel","prevLabel","firstTick","nextTick","lastTick","prevTick","ignoreEl","isTwoLabelOverlapped","current","next","firstRect","nextRect","mRotationBack","identity","mul","getLocalTransform","intersect","createTicks","tickTransform","tickEndCoord","tickLineStyle","aniid","tickEl","minorTickModel","minorTickLineStyle","minorTicksEls","axisLabelShow","labels","getViewLabels","labelRotation","rawCategoryData","labelItem","formattedLabel","rawLabel","itemLabelModel","textColor","styleModel","buildLabelElOption","labelPos","paddings","confineInContainer","bgColor","getLabel","axisDimension","seriesData","isFunction","translate","textLayout","makeSectorShape"],"mappings":"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","file":"js/chunk-2ec0910e.d5475487.js","sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./axisPointer\");\n\nrequire(\"./tooltip/TooltipModel\");\n\nrequire(\"./tooltip/TooltipView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME Better way to pack data in graphic element\n\n/**\n * @action\n * @property {string} type\n * @property {number} seriesIndex\n * @property {number} dataIndex\n * @property {number} [x]\n * @property {number} [y]\n */\necharts.registerAction({\n  type: 'showTip',\n  event: 'showTip',\n  update: 'tooltip:manuallyShowTip'\n}, // noop\nfunction () {});\necharts.registerAction({\n  type: 'hideTip',\n  event: 'hideTip',\n  update: 'tooltip:manuallyHideTip'\n}, // noop\nfunction () {});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Can only be called after coordinate system creation stage.\n * (Can be called before coordinate system update stage).\n *\n * @param {Object} opt {labelInside}\n * @return {Object} {\n *  position, rotation, labelDirection, labelOffset,\n *  tickDirection, labelRotate, z2\n * }\n */\nfunction layout(gridModel, axisModel, opt) {\n  opt = opt || {};\n  var grid = gridModel.coordinateSystem;\n  var axis = axisModel.axis;\n  var layout = {};\n  var otherAxisOnZeroOf = axis.getAxesOnZeroOf()[0];\n  var rawAxisPosition = axis.position;\n  var axisPosition = otherAxisOnZeroOf ? 'onZero' : rawAxisPosition;\n  var axisDim = axis.dim;\n  var rect = grid.getRect();\n  var rectBound = [rect.x, rect.x + rect.width, rect.y, rect.y + rect.height];\n  var idx = {\n    left: 0,\n    right: 1,\n    top: 0,\n    bottom: 1,\n    onZero: 2\n  };\n  var axisOffset = axisModel.get('offset') || 0;\n  var posBound = axisDim === 'x' ? [rectBound[2] - axisOffset, rectBound[3] + axisOffset] : [rectBound[0] - axisOffset, rectBound[1] + axisOffset];\n\n  if (otherAxisOnZeroOf) {\n    var onZeroCoord = otherAxisOnZeroOf.toGlobalCoord(otherAxisOnZeroOf.dataToCoord(0));\n    posBound[idx.onZero] = Math.max(Math.min(onZeroCoord, posBound[1]), posBound[0]);\n  } // Axis position\n\n\n  layout.position = [axisDim === 'y' ? posBound[idx[axisPosition]] : rectBound[0], axisDim === 'x' ? posBound[idx[axisPosition]] : rectBound[3]]; // Axis rotation\n\n  layout.rotation = Math.PI / 2 * (axisDim === 'x' ? 0 : 1); // Tick and label direction, x y is axisDim\n\n  var dirMap = {\n    top: -1,\n    bottom: 1,\n    left: -1,\n    right: 1\n  };\n  layout.labelDirection = layout.tickDirection = layout.nameDirection = dirMap[rawAxisPosition];\n  layout.labelOffset = otherAxisOnZeroOf ? posBound[idx[rawAxisPosition]] - posBound[idx.onZero] : 0;\n\n  if (axisModel.get('axisTick.inside')) {\n    layout.tickDirection = -layout.tickDirection;\n  }\n\n  if (zrUtil.retrieve(opt.labelInside, axisModel.get('axisLabel.inside'))) {\n    layout.labelDirection = -layout.labelDirection;\n  } // Special label rotation\n\n\n  var labelRotate = axisModel.get('axisLabel.rotate');\n  layout.labelRotate = axisPosition === 'top' ? -labelRotate : labelRotate; // Over splitLine and splitArea\n\n  layout.z2 = 1;\n  return layout;\n}\n\nexports.layout = layout;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../util/graphic\");\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid view\necharts.extendComponentView({\n  type: 'grid',\n  render: function (gridModel, ecModel) {\n    this.group.removeAll();\n\n    if (gridModel.get('show')) {\n      this.group.add(new graphic.Rect({\n        shape: gridModel.coordinateSystem.getRect(),\n        style: zrUtil.defaults({\n          fill: gridModel.get('backgroundColor')\n        }, gridModel.getItemStyle()),\n        silent: true,\n        z2: -1\n      }));\n    }\n  }\n});\necharts.registerPreprocessor(function (option) {\n  // Only create grid when need\n  if (option.xAxis && option.yAxis && !option.grid) {\n    option.grid = {};\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar zrColor = require(\"zrender/lib/tool/color\");\n\nvar eventUtil = require(\"zrender/lib/core/event\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar formatUtil = require(\"../../util/format\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar toCamelCase = formatUtil.toCamelCase;\nvar vendors = ['', '-webkit-', '-moz-', '-o-'];\nvar gCssText = 'position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;';\n/**\n * @param {number} duration\n * @return {string}\n * @inner\n */\n\nfunction assembleTransition(duration) {\n  var transitionCurve = 'cubic-bezier(0.23, 1, 0.32, 1)';\n  var transitionText = 'left ' + duration + 's ' + transitionCurve + ',' + 'top ' + duration + 's ' + transitionCurve;\n  return zrUtil.map(vendors, function (vendorPrefix) {\n    return vendorPrefix + 'transition:' + transitionText;\n  }).join(';');\n}\n/**\n * @param {Object} textStyle\n * @return {string}\n * @inner\n */\n\n\nfunction assembleFont(textStyleModel) {\n  var cssText = [];\n  var fontSize = textStyleModel.get('fontSize');\n  var color = textStyleModel.getTextColor();\n  color && cssText.push('color:' + color);\n  cssText.push('font:' + textStyleModel.getFont());\n  fontSize && cssText.push('line-height:' + Math.round(fontSize * 3 / 2) + 'px');\n  each(['decoration', 'align'], function (name) {\n    var val = textStyleModel.get(name);\n    val && cssText.push('text-' + name + ':' + val);\n  });\n  return cssText.join(';');\n}\n/**\n * @param {Object} tooltipModel\n * @return {string}\n * @inner\n */\n\n\nfunction assembleCssText(tooltipModel) {\n  var cssText = [];\n  var transitionDuration = tooltipModel.get('transitionDuration');\n  var backgroundColor = tooltipModel.get('backgroundColor');\n  var textStyleModel = tooltipModel.getModel('textStyle');\n  var padding = tooltipModel.get('padding'); // Animation transition. Do not animate when transitionDuration is 0.\n\n  transitionDuration && cssText.push(assembleTransition(transitionDuration));\n\n  if (backgroundColor) {\n    if (env.canvasSupported) {\n      cssText.push('background-Color:' + backgroundColor);\n    } else {\n      // for ie\n      cssText.push('background-Color:#' + zrColor.toHex(backgroundColor));\n      cssText.push('filter:alpha(opacity=70)');\n    }\n  } // Border style\n\n\n  each(['width', 'color', 'radius'], function (name) {\n    var borderName = 'border-' + name;\n    var camelCase = toCamelCase(borderName);\n    var val = tooltipModel.get(camelCase);\n    val != null && cssText.push(borderName + ':' + val + (name === 'color' ? '' : 'px'));\n  }); // Text style\n\n  cssText.push(assembleFont(textStyleModel)); // Padding\n\n  if (padding != null) {\n    cssText.push('padding:' + formatUtil.normalizeCssArray(padding).join('px ') + 'px');\n  }\n\n  return cssText.join(';') + ';';\n}\n/**\n * @alias module:echarts/component/tooltip/TooltipContent\n * @constructor\n */\n\n\nfunction TooltipContent(container, api) {\n  if (env.wxa) {\n    return null;\n  }\n\n  var el = document.createElement('div');\n  var zr = this._zr = api.getZr();\n  this.el = el;\n  this._x = api.getWidth() / 2;\n  this._y = api.getHeight() / 2;\n  container.appendChild(el);\n  this._container = container;\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout; // FIXME\n  // Is it needed to trigger zr event manually if\n  // the browser do not support `pointer-events: none`.\n\n  var self = this;\n\n  el.onmouseenter = function () {\n    // clear the timeout in hideLater and keep showing tooltip\n    if (self._enterable) {\n      clearTimeout(self._hideTimeout);\n      self._show = true;\n    }\n\n    self._inContent = true;\n  };\n\n  el.onmousemove = function (e) {\n    e = e || window.event;\n\n    if (!self._enterable) {\n      // `pointer-events: none` is set to tooltip content div\n      // if `enterable` is set as `false`, and `el.onmousemove`\n      // can not be triggered. But in browser that do not\n      // support `pointer-events`, we need to do this:\n      // Try trigger zrender event to avoid mouse\n      // in and out shape too frequently\n      var handler = zr.handler;\n      eventUtil.normalizeEvent(container, e, true);\n      handler.dispatch('mousemove', e);\n    }\n  };\n\n  el.onmouseleave = function () {\n    if (self._enterable) {\n      if (self._show) {\n        self.hideLater(self._hideDelay);\n      }\n    }\n\n    self._inContent = false;\n  };\n}\n\nTooltipContent.prototype = {\n  constructor: TooltipContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {\n    // FIXME\n    // Move this logic to ec main?\n    var container = this._container;\n    var stl = container.currentStyle || document.defaultView.getComputedStyle(container);\n    var domStyle = container.style;\n\n    if (domStyle.position !== 'absolute' && stl.position !== 'absolute') {\n      domStyle.position = 'relative';\n    } // Hide the tooltip\n    // PENDING\n    // this.hide();\n\n  },\n  show: function (tooltipModel) {\n    clearTimeout(this._hideTimeout);\n    var el = this.el;\n    el.style.cssText = gCssText + assembleCssText(tooltipModel) // Because of the reason described in:\n    // http://stackoverflow.com/questions/21125587/css3-transition-not-working-in-chrome-anymore\n    // we should set initial value to `left` and `top`.\n    + ';left:' + this._x + 'px;top:' + this._y + 'px;' + (tooltipModel.get('extraCssText') || '');\n    el.style.display = el.innerHTML ? 'block' : 'none'; // If mouse occsionally move over the tooltip, a mouseout event will be\n    // triggered by canvas, and cuase some unexpectable result like dragging\n    // stop, \"unfocusAdjacency\". Here `pointer-events: none` is used to solve\n    // it. Although it is not suppored by IE8~IE10, fortunately it is a rare\n    // scenario.\n\n    el.style.pointerEvents = this._enterable ? 'auto' : 'none';\n    this._show = true;\n  },\n  setContent: function (content) {\n    this.el.innerHTML = content == null ? '' : content;\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var el = this.el;\n    return [el.clientWidth, el.clientHeight];\n  },\n  moveTo: function (x, y) {\n    // xy should be based on canvas root. But tooltipContent is\n    // the sibling of canvas root. So padding of ec container\n    // should be considered here.\n    var zr = this._zr;\n    var viewportRootOffset;\n\n    if (zr && zr.painter && (viewportRootOffset = zr.painter.getViewportRootOffset())) {\n      x += viewportRootOffset.offsetLeft;\n      y += viewportRootOffset.offsetTop;\n    }\n\n    var style = this.el.style;\n    style.left = x + 'px';\n    style.top = y + 'px';\n    this._x = x;\n    this._y = y;\n  },\n  hide: function () {\n    this.el.style.display = 'none';\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var width = this.el.clientWidth;\n    var height = this.el.clientHeight; // Consider browser compatibility.\n    // IE8 does not support getComputedStyle.\n\n    if (document.defaultView && document.defaultView.getComputedStyle) {\n      var stl = document.defaultView.getComputedStyle(this.el);\n\n      if (stl) {\n        width += parseInt(stl.borderLeftWidth, 10) + parseInt(stl.borderRightWidth, 10);\n        height += parseInt(stl.borderTopWidth, 10) + parseInt(stl.borderBottomWidth, 10);\n      }\n    }\n\n    return {\n      width: width,\n      height: height\n    };\n  }\n};\nvar _default = TooltipContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {Object} finder contains {seriesIndex, dataIndex, dataIndexInside}\n * @param {module:echarts/model/Global} ecModel\n * @return {Object} {point: [x, y], el: ...} point Will not be null.\n */\nfunction _default(finder, ecModel) {\n  var point = [];\n  var seriesIndex = finder.seriesIndex;\n  var seriesModel;\n\n  if (seriesIndex == null || !(seriesModel = ecModel.getSeriesByIndex(seriesIndex))) {\n    return {\n      point: []\n    };\n  }\n\n  var data = seriesModel.getData();\n  var dataIndex = modelUtil.queryDataIndex(data, finder);\n\n  if (dataIndex == null || dataIndex < 0 || zrUtil.isArray(dataIndex)) {\n    return {\n      point: []\n    };\n  }\n\n  var el = data.getItemGraphicEl(dataIndex);\n  var coordSys = seriesModel.coordinateSystem;\n\n  if (seriesModel.getTooltipPosition) {\n    point = seriesModel.getTooltipPosition(dataIndex) || [];\n  } else if (coordSys && coordSys.dataToPoint) {\n    point = coordSys.dataToPoint(data.getValues(zrUtil.map(coordSys.dimensions, function (dim) {\n      return data.mapDimension(dim);\n    }), dataIndex, true)) || [];\n  } else if (el) {\n    // Use graphic bounding rect\n    var rect = el.getBoundingRect().clone();\n    rect.applyTransform(el.transform);\n    point = [rect.x + rect.width / 2, rect.y + rect.height / 2];\n  }\n\n  return {\n    point: point,\n    el: el\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseBarSeries = require(\"./BaseBarSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = BaseBarSeries.extend({\n  type: 'series.bar',\n  dependencies: ['grid', 'polar'],\n  brushSelector: 'rect',\n\n  /**\n   * @override\n   */\n  getProgressive: function () {\n    // Do not support progressive in normal mode.\n    return this.get('large') ? this.get('progressive') : false;\n  },\n\n  /**\n   * @override\n   */\n  getProgressiveThreshold: function () {\n    // Do not support progressive in normal mode.\n    var progressiveThreshold = this.get('progressiveThreshold');\n    var largeThreshold = this.get('largeThreshold');\n\n    if (largeThreshold > progressiveThreshold) {\n      progressiveThreshold = largeThreshold;\n    }\n\n    return progressiveThreshold;\n  },\n  defaultOption: {\n    // If clipped\n    // Only available on cartesian2d\n    clip: true,\n    // If use caps on two sides of bars\n    // Only available on tangential polar bar\n    roundCap: false\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar each = zrUtil.each;\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n * @param {Function} handler\n *      param: {string} currTrigger\n *      param: {Array.<number>} point\n */\n\nfunction register(key, api, handler) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  inner(zr).records || (inner(zr).records = {});\n  initGlobalListeners(zr, api);\n  var record = inner(zr).records[key] || (inner(zr).records[key] = {});\n  record.handler = handler;\n}\n\nfunction initGlobalListeners(zr, api) {\n  if (inner(zr).initialized) {\n    return;\n  }\n\n  inner(zr).initialized = true;\n  useHandler('click', zrUtil.curry(doEnter, 'click'));\n  useHandler('mousemove', zrUtil.curry(doEnter, 'mousemove')); // useHandler('mouseout', onLeave);\n\n  useHandler('globalout', onLeave);\n\n  function useHandler(eventType, cb) {\n    zr.on(eventType, function (e) {\n      var dis = makeDispatchAction(api);\n      each(inner(zr).records, function (record) {\n        record && cb(record, e, dis.dispatchAction);\n      });\n      dispatchTooltipFinally(dis.pendings, api);\n    });\n  }\n}\n\nfunction dispatchTooltipFinally(pendings, api) {\n  var showLen = pendings.showTip.length;\n  var hideLen = pendings.hideTip.length;\n  var actuallyPayload;\n\n  if (showLen) {\n    actuallyPayload = pendings.showTip[showLen - 1];\n  } else if (hideLen) {\n    actuallyPayload = pendings.hideTip[hideLen - 1];\n  }\n\n  if (actuallyPayload) {\n    actuallyPayload.dispatchAction = null;\n    api.dispatchAction(actuallyPayload);\n  }\n}\n\nfunction onLeave(record, e, dispatchAction) {\n  record.handler('leave', null, dispatchAction);\n}\n\nfunction doEnter(currTrigger, record, e, dispatchAction) {\n  record.handler(currTrigger, e, dispatchAction);\n}\n\nfunction makeDispatchAction(api) {\n  var pendings = {\n    showTip: [],\n    hideTip: []\n  }; // FIXME\n  // better approach?\n  // 'showTip' and 'hideTip' can be triggered by axisPointer and tooltip,\n  // which may be conflict, (axisPointer call showTip but tooltip call hideTip);\n  // So we have to add \"final stage\" to merge those dispatched actions.\n\n  var dispatchAction = function (payload) {\n    var pendingList = pendings[payload.type];\n\n    if (pendingList) {\n      pendingList.push(payload);\n    } else {\n      payload.dispatchAction = dispatchAction;\n      api.dispatchAction(payload);\n    }\n  };\n\n  return {\n    dispatchAction: dispatchAction,\n    pendings: pendings\n  };\n}\n/**\n * @param {string} key\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\nfunction unregister(key, api) {\n  if (env.node) {\n    return;\n  }\n\n  var zr = api.getZr();\n  var record = (inner(zr).records || {})[key];\n\n  if (record) {\n    inner(zr).records[key] = null;\n  }\n}\n\nexports.register = register;\nexports.unregister = unregister;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar ChartView = require(\"../../view/Chart\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Series} seriesModel\n * @param {boolean} hasAnimation\n * @inner\n */\nfunction updateDataSelected(uid, seriesModel, hasAnimation, api) {\n  var data = seriesModel.getData();\n  var dataIndex = this.dataIndex;\n  var name = data.getName(dataIndex);\n  var selectedOffset = seriesModel.get('selectedOffset');\n  api.dispatchAction({\n    type: 'pieToggleSelect',\n    from: uid,\n    name: name,\n    seriesId: seriesModel.id\n  });\n  data.each(function (idx) {\n    toggleItemSelected(data.getItemGraphicEl(idx), data.getItemLayout(idx), seriesModel.isSelected(data.getName(idx)), selectedOffset, hasAnimation);\n  });\n}\n/**\n * @param {module:zrender/graphic/Sector} el\n * @param {Object} layout\n * @param {boolean} isSelected\n * @param {number} selectedOffset\n * @param {boolean} hasAnimation\n * @inner\n */\n\n\nfunction toggleItemSelected(el, layout, isSelected, selectedOffset, hasAnimation) {\n  var midAngle = (layout.startAngle + layout.endAngle) / 2;\n  var dx = Math.cos(midAngle);\n  var dy = Math.sin(midAngle);\n  var offset = isSelected ? selectedOffset : 0;\n  var position = [dx * offset, dy * offset];\n  hasAnimation // animateTo will stop revious animation like update transition\n  ? el.animate().when(200, {\n    position: position\n  }).start('bounceOut') : el.attr('position', position);\n}\n/**\n * Piece of pie including Sector, Label, LabelLine\n * @constructor\n * @extends {module:zrender/graphic/Group}\n */\n\n\nfunction PiePiece(data, idx) {\n  graphic.Group.call(this);\n  var sector = new graphic.Sector({\n    z2: 2\n  });\n  var polyline = new graphic.Polyline();\n  var text = new graphic.Text();\n  this.add(sector);\n  this.add(polyline);\n  this.add(text);\n  this.updateData(data, idx, true);\n}\n\nvar piePieceProto = PiePiece.prototype;\n\npiePieceProto.updateData = function (data, idx, firstCreate) {\n  var sector = this.childAt(0);\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var sectorShape = zrUtil.extend({}, layout);\n  sectorShape.label = null;\n  var animationTypeUpdate = seriesModel.getShallow('animationTypeUpdate');\n\n  if (firstCreate) {\n    sector.setShape(sectorShape);\n    var animationType = seriesModel.getShallow('animationType');\n\n    if (animationType === 'scale') {\n      sector.shape.r = layout.r0;\n      graphic.initProps(sector, {\n        shape: {\n          r: layout.r\n        }\n      }, seriesModel, idx);\n    } // Expansion\n    else {\n        sector.shape.endAngle = layout.startAngle;\n        graphic.updateProps(sector, {\n          shape: {\n            endAngle: layout.endAngle\n          }\n        }, seriesModel, idx);\n      }\n  } else {\n    if (animationTypeUpdate === 'expansion') {\n      // Sectors are set to be target shape and an overlaying clipPath is used for animation\n      sector.setShape(sectorShape);\n    } else {\n      // Transition animation from the old shape\n      graphic.updateProps(sector, {\n        shape: sectorShape\n      }, seriesModel, idx);\n    }\n  } // Update common style\n\n\n  var visualColor = data.getItemVisual(idx, 'color');\n  sector.useStyle(zrUtil.defaults({\n    lineJoin: 'bevel',\n    fill: visualColor\n  }, itemModel.getModel('itemStyle').getItemStyle()));\n  sector.hoverStyle = itemModel.getModel('emphasis.itemStyle').getItemStyle();\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && sector.attr('cursor', cursorStyle); // Toggle selected\n\n  toggleItemSelected(this, data.getItemLayout(idx), seriesModel.isSelected(null, idx), seriesModel.get('selectedOffset'), seriesModel.get('animation')); // Label and text animation should be applied only for transition type animation when update\n\n  var withAnimation = !firstCreate && animationTypeUpdate === 'transition';\n\n  this._updateLabel(data, idx, withAnimation);\n\n  this.highDownOnUpdate = itemModel.get('hoverAnimation') && seriesModel.isAnimationEnabled() ? function (fromState, toState) {\n    if (toState === 'emphasis') {\n      labelLine.ignore = labelLine.hoverIgnore;\n      labelText.ignore = labelText.hoverIgnore; // Sector may has animation of updating data. Force to move to the last frame\n      // Or it may stopped on the wrong shape\n\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r + seriesModel.get('hoverOffset')\n        }\n      }, 300, 'elasticOut');\n    } else {\n      labelLine.ignore = labelLine.normalIgnore;\n      labelText.ignore = labelText.normalIgnore;\n      sector.stopAnimation(true);\n      sector.animateTo({\n        shape: {\n          r: layout.r\n        }\n      }, 300, 'elasticOut');\n    }\n  } : null;\n  graphic.setHoverStyle(this);\n};\n\npiePieceProto._updateLabel = function (data, idx, withAnimation) {\n  var labelLine = this.childAt(1);\n  var labelText = this.childAt(2);\n  var seriesModel = data.hostModel;\n  var itemModel = data.getItemModel(idx);\n  var layout = data.getItemLayout(idx);\n  var labelLayout = layout.label;\n  var visualColor = data.getItemVisual(idx, 'color');\n\n  if (!labelLayout || isNaN(labelLayout.x) || isNaN(labelLayout.y)) {\n    labelText.ignore = labelText.normalIgnore = labelText.hoverIgnore = labelLine.ignore = labelLine.normalIgnore = labelLine.hoverIgnore = true;\n    return;\n  }\n\n  var targetLineShape = {\n    points: labelLayout.linePoints || [[labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y], [labelLayout.x, labelLayout.y]]\n  };\n  var targetTextStyle = {\n    x: labelLayout.x,\n    y: labelLayout.y\n  };\n\n  if (withAnimation) {\n    graphic.updateProps(labelLine, {\n      shape: targetLineShape\n    }, seriesModel, idx);\n    graphic.updateProps(labelText, {\n      style: targetTextStyle\n    }, seriesModel, idx);\n  } else {\n    labelLine.attr({\n      shape: targetLineShape\n    });\n    labelText.attr({\n      style: targetTextStyle\n    });\n  }\n\n  labelText.attr({\n    rotation: labelLayout.rotation,\n    origin: [labelLayout.x, labelLayout.y],\n    z2: 10\n  });\n  var labelModel = itemModel.getModel('label');\n  var labelHoverModel = itemModel.getModel('emphasis.label');\n  var labelLineModel = itemModel.getModel('labelLine');\n  var labelLineHoverModel = itemModel.getModel('emphasis.labelLine');\n  var visualColor = data.getItemVisual(idx, 'color');\n  graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, labelHoverModel, {\n    labelFetcher: data.hostModel,\n    labelDataIndex: idx,\n    defaultText: labelLayout.text,\n    autoColor: visualColor,\n    useInsideStyle: !!labelLayout.inside\n  }, {\n    textAlign: labelLayout.textAlign,\n    textVerticalAlign: labelLayout.verticalAlign,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelText.ignore = labelText.normalIgnore = !labelModel.get('show');\n  labelText.hoverIgnore = !labelHoverModel.get('show');\n  labelLine.ignore = labelLine.normalIgnore = !labelLineModel.get('show');\n  labelLine.hoverIgnore = !labelLineHoverModel.get('show'); // Default use item visual color\n\n  labelLine.setStyle({\n    stroke: visualColor,\n    opacity: data.getItemVisual(idx, 'opacity')\n  });\n  labelLine.setStyle(labelLineModel.getModel('lineStyle').getLineStyle());\n  labelLine.hoverStyle = labelLineHoverModel.getModel('lineStyle').getLineStyle();\n  var smooth = labelLineModel.get('smooth');\n\n  if (smooth && smooth === true) {\n    smooth = 0.4;\n  }\n\n  labelLine.setShape({\n    smooth: smooth\n  });\n};\n\nzrUtil.inherits(PiePiece, graphic.Group); // Pie view\n\nvar PieView = ChartView.extend({\n  type: 'pie',\n  init: function () {\n    var sectorGroup = new graphic.Group();\n    this._sectorGroup = sectorGroup;\n  },\n  render: function (seriesModel, ecModel, api, payload) {\n    if (payload && payload.from === this.uid) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var group = this.group;\n    var hasAnimation = ecModel.get('animation');\n    var isFirstRender = !oldData;\n    var animationType = seriesModel.get('animationType');\n    var animationTypeUpdate = seriesModel.get('animationTypeUpdate');\n    var onSectorClick = zrUtil.curry(updateDataSelected, this.uid, seriesModel, hasAnimation, api);\n    var selectedMode = seriesModel.get('selectedMode');\n    data.diff(oldData).add(function (idx) {\n      var piePiece = new PiePiece(data, idx); // Default expansion animation\n\n      if (isFirstRender && animationType !== 'scale') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      selectedMode && piePiece.on('click', onSectorClick);\n      data.setItemGraphicEl(idx, piePiece);\n      group.add(piePiece);\n    }).update(function (newIdx, oldIdx) {\n      var piePiece = oldData.getItemGraphicEl(oldIdx);\n\n      if (!isFirstRender && animationTypeUpdate !== 'transition') {\n        piePiece.eachChild(function (child) {\n          child.stopAnimation(true);\n        });\n      }\n\n      piePiece.updateData(data, newIdx);\n      piePiece.off('click');\n      selectedMode && piePiece.on('click', onSectorClick);\n      group.add(piePiece);\n      data.setItemGraphicEl(newIdx, piePiece);\n    }).remove(function (idx) {\n      var piePiece = oldData.getItemGraphicEl(idx);\n      group.remove(piePiece);\n    }).execute();\n\n    if (hasAnimation && data.count() > 0 && (isFirstRender ? animationType !== 'scale' : animationTypeUpdate !== 'transition')) {\n      var shape = data.getItemLayout(0);\n\n      for (var s = 1; isNaN(shape.startAngle) && s < data.count(); ++s) {\n        shape = data.getItemLayout(s);\n      }\n\n      var r = Math.max(api.getWidth(), api.getHeight()) / 2;\n      var removeClipPath = zrUtil.bind(group.removeClipPath, group);\n      group.setClipPath(this._createClipPath(shape.cx, shape.cy, r, shape.startAngle, shape.clockwise, removeClipPath, seriesModel, isFirstRender));\n    } else {\n      // clipPath is used in first-time animation, so remove it when otherwise. See: #8994\n      group.removeClipPath();\n    }\n\n    this._data = data;\n  },\n  dispose: function () {},\n  _createClipPath: function (cx, cy, r, startAngle, clockwise, cb, seriesModel, isFirstRender) {\n    var clipPath = new graphic.Sector({\n      shape: {\n        cx: cx,\n        cy: cy,\n        r0: 0,\n        r: r,\n        startAngle: startAngle,\n        endAngle: startAngle,\n        clockwise: clockwise\n      }\n    });\n    var initOrUpdate = isFirstRender ? graphic.initProps : graphic.updateProps;\n    initOrUpdate(clipPath, {\n      shape: {\n        endAngle: startAngle + (clockwise ? 1 : -1) * Math.PI * 2\n      }\n    }, seriesModel, cb);\n    return clipPath;\n  },\n\n  /**\n   * @implement\n   */\n  containPoint: function (point, seriesModel) {\n    var data = seriesModel.getData();\n    var itemLayout = data.getItemLayout(0);\n\n    if (itemLayout) {\n      var dx = point[0] - itemLayout.cx;\n      var dy = point[1] - itemLayout.cy;\n      var radius = Math.sqrt(dx * dx + dy * dy);\n      return radius <= itemLayout.r && radius >= itemLayout.r0;\n    }\n  }\n});\nvar _default = PieView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\nvar linearMap = _number.linearMap;\n\nvar layout = require(\"../../util/layout\");\n\nvar labelLayout = require(\"./labelLayout\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI2 = Math.PI * 2;\nvar RADIAN = Math.PI / 180;\n\nfunction getViewRect(seriesModel, api) {\n  return layout.getLayoutRect(seriesModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n}\n\nfunction _default(seriesType, ecModel, api, payload) {\n  ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n    var data = seriesModel.getData();\n    var valueDim = data.mapDimension('value');\n    var viewRect = getViewRect(seriesModel, api);\n    var center = seriesModel.get('center');\n    var radius = seriesModel.get('radius');\n\n    if (!zrUtil.isArray(radius)) {\n      radius = [0, radius];\n    }\n\n    if (!zrUtil.isArray(center)) {\n      center = [center, center];\n    }\n\n    var width = parsePercent(viewRect.width, api.getWidth());\n    var height = parsePercent(viewRect.height, api.getHeight());\n    var size = Math.min(width, height);\n    var cx = parsePercent(center[0], width) + viewRect.x;\n    var cy = parsePercent(center[1], height) + viewRect.y;\n    var r0 = parsePercent(radius[0], size / 2);\n    var r = parsePercent(radius[1], size / 2);\n    var startAngle = -seriesModel.get('startAngle') * RADIAN;\n    var minAngle = seriesModel.get('minAngle') * RADIAN;\n    var validDataCount = 0;\n    data.each(valueDim, function (value) {\n      !isNaN(value) && validDataCount++;\n    });\n    var sum = data.getSum(valueDim); // Sum may be 0\n\n    var unitRadian = Math.PI / (sum || validDataCount) * 2;\n    var clockwise = seriesModel.get('clockwise');\n    var roseType = seriesModel.get('roseType');\n    var stillShowZeroSum = seriesModel.get('stillShowZeroSum'); // [0...max]\n\n    var extent = data.getDataExtent(valueDim);\n    extent[0] = 0; // In the case some sector angle is smaller than minAngle\n\n    var restAngle = PI2;\n    var valueSumLargerThanMinAngle = 0;\n    var currentAngle = startAngle;\n    var dir = clockwise ? 1 : -1;\n    data.each(valueDim, function (value, idx) {\n      var angle;\n\n      if (isNaN(value)) {\n        data.setItemLayout(idx, {\n          angle: NaN,\n          startAngle: NaN,\n          endAngle: NaN,\n          clockwise: clockwise,\n          cx: cx,\n          cy: cy,\n          r0: r0,\n          r: roseType ? NaN : r,\n          viewRect: viewRect\n        });\n        return;\n      } // FIXME 兼容 2.0 但是 roseType 是 area 的时候才是这样？\n\n\n      if (roseType !== 'area') {\n        angle = sum === 0 && stillShowZeroSum ? unitRadian : value * unitRadian;\n      } else {\n        angle = PI2 / validDataCount;\n      }\n\n      if (angle < minAngle) {\n        angle = minAngle;\n        restAngle -= minAngle;\n      } else {\n        valueSumLargerThanMinAngle += value;\n      }\n\n      var endAngle = currentAngle + dir * angle;\n      data.setItemLayout(idx, {\n        angle: angle,\n        startAngle: currentAngle,\n        endAngle: endAngle,\n        clockwise: clockwise,\n        cx: cx,\n        cy: cy,\n        r0: r0,\n        r: roseType ? linearMap(value, extent, [r0, r]) : r,\n        viewRect: viewRect\n      });\n      currentAngle = endAngle;\n    }); // Some sector is constrained by minAngle\n    // Rest sectors needs recalculate angle\n\n    if (restAngle < PI2 && validDataCount) {\n      // Average the angle if rest angle is not enough after all angles is\n      // Constrained by minAngle\n      if (restAngle <= 1e-3) {\n        var angle = PI2 / validDataCount;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            layout.angle = angle;\n            layout.startAngle = startAngle + dir * idx * angle;\n            layout.endAngle = startAngle + dir * (idx + 1) * angle;\n          }\n        });\n      } else {\n        unitRadian = restAngle / valueSumLargerThanMinAngle;\n        currentAngle = startAngle;\n        data.each(valueDim, function (value, idx) {\n          if (!isNaN(value)) {\n            var layout = data.getItemLayout(idx);\n            var angle = layout.angle === minAngle ? minAngle : value * unitRadian;\n            layout.startAngle = currentAngle;\n            layout.endAngle = currentAngle + dir * angle;\n            currentAngle += dir * angle;\n          }\n        });\n      }\n    }\n\n    labelLayout(seriesModel, r, viewRect.width, viewRect.height, viewRect.x, viewRect.y);\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar SeriesModel = require(\"../../model/Series\");\n\nvar createListFromArray = require(\"../helper/createListFromArray\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = SeriesModel.extend({\n  type: 'series.__base_bar__',\n  getInitialData: function (option, ecModel) {\n    return createListFromArray(this.getSource(), this, {\n      useEncodeDefaulter: true\n    });\n  },\n  getMarkerPosition: function (value) {\n    var coordSys = this.coordinateSystem;\n\n    if (coordSys) {\n      // PENDING if clamp ?\n      var pt = coordSys.dataToPoint(coordSys.clampData(value));\n      var data = this.getData();\n      var offset = data.getLayout('offset');\n      var size = data.getLayout('size');\n      var offsetIndex = coordSys.getBaseAxis().isHorizontal() ? 0 : 1;\n      pt[offsetIndex] += offset + size / 2;\n      return pt;\n    }\n\n    return [NaN, NaN];\n  },\n  defaultOption: {\n    zlevel: 0,\n    // 一级层叠\n    z: 2,\n    // 二级层叠\n    coordinateSystem: 'cartesian2d',\n    legendHoverLink: true,\n    // stack: null\n    // Cartesian coordinate system\n    // xAxisIndex: 0,\n    // yAxisIndex: 0,\n    // 最小高度改为0\n    barMinHeight: 0,\n    // 最小角度为0，仅对极坐标系下的柱状图有效\n    barMinAngle: 0,\n    // cursor: null,\n    large: false,\n    largeThreshold: 400,\n    progressive: 3e3,\n    progressiveChunkMode: 'mod',\n    // barMaxWidth: null,\n    // In cartesian, the default value is 1. Otherwise null.\n    // barMinWidth: null,\n    // 默认自适应\n    // barWidth: null,\n    // 柱间距离，默认为柱形宽度的30%，可设固定值\n    // barGap: '30%',\n    // 类目间柱形距离，默认为类目间距的20%，可设固定值\n    // barCategoryGap: '20%',\n    // label: {\n    //      show: false\n    // },\n    itemStyle: {},\n    emphasis: {}\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar env = require(\"zrender/lib/core/env\");\n\nvar TooltipContent = require(\"./TooltipContent\");\n\nvar TooltipRichContent = require(\"./TooltipRichContent\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar numberUtil = require(\"../../util/number\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar findPointFromSeries = require(\"../axisPointer/findPointFromSeries\");\n\nvar layoutUtil = require(\"../../util/layout\");\n\nvar Model = require(\"../../model/Model\");\n\nvar globalListener = require(\"../axisPointer/globalListener\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar axisPointerViewHelper = require(\"../axisPointer/viewHelper\");\n\nvar _model = require(\"../../util/model\");\n\nvar getTooltipRenderMode = _model.getTooltipRenderMode;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar bind = zrUtil.bind;\nvar each = zrUtil.each;\nvar parsePercent = numberUtil.parsePercent;\nvar proxyRect = new graphic.Rect({\n  shape: {\n    x: -1,\n    y: -1,\n    width: 2,\n    height: 2\n  }\n});\n\nvar _default = echarts.extendComponentView({\n  type: 'tooltip',\n  init: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    var tooltipModel = ecModel.getComponent('tooltip');\n    var renderMode = tooltipModel.get('renderMode');\n    this._renderMode = getTooltipRenderMode(renderMode);\n    var tooltipContent;\n\n    if (this._renderMode === 'html') {\n      tooltipContent = new TooltipContent(api.getDom(), api);\n      this._newLine = '<br/>';\n    } else {\n      tooltipContent = new TooltipRichContent(api);\n      this._newLine = '\\n';\n    }\n\n    this._tooltipContent = tooltipContent;\n  },\n  render: function (tooltipModel, ecModel, api) {\n    if (env.node) {\n      return;\n    } // Reset\n\n\n    this.group.removeAll();\n    /**\n     * @private\n     * @type {module:echarts/component/tooltip/TooltipModel}\n     */\n\n    this._tooltipModel = tooltipModel;\n    /**\n     * @private\n     * @type {module:echarts/model/Global}\n     */\n\n    this._ecModel = ecModel;\n    /**\n     * @private\n     * @type {module:echarts/ExtensionAPI}\n     */\n\n    this._api = api;\n    /**\n     * Should be cleaned when render.\n     * @private\n     * @type {Array.<Array.<Object>>}\n     */\n\n    this._lastDataByCoordSys = null;\n    /**\n     * @private\n     * @type {boolean}\n     */\n\n    this._alwaysShowContent = tooltipModel.get('alwaysShowContent');\n    var tooltipContent = this._tooltipContent;\n    tooltipContent.update();\n    tooltipContent.setEnterable(tooltipModel.get('enterable'));\n\n    this._initGlobalListener();\n\n    this._keepShow();\n  },\n  _initGlobalListener: function () {\n    var tooltipModel = this._tooltipModel;\n    var triggerOn = tooltipModel.get('triggerOn');\n    globalListener.register('itemTooltip', this._api, bind(function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none') {\n        if (triggerOn.indexOf(currTrigger) >= 0) {\n          this._tryShow(e, dispatchAction);\n        } else if (currTrigger === 'leave') {\n          this._hide(dispatchAction);\n        }\n      }\n    }, this));\n  },\n  _keepShow: function () {\n    var tooltipModel = this._tooltipModel;\n    var ecModel = this._ecModel;\n    var api = this._api; // Try to keep the tooltip show when refreshing\n\n    if (this._lastX != null && this._lastY != null // When user is willing to control tooltip totally using API,\n    // self.manuallyShowTip({x, y}) might cause tooltip hide,\n    // which is not expected.\n    && tooltipModel.get('triggerOn') !== 'none') {\n      var self = this;\n      clearTimeout(this._refreshUpdateTimeout);\n      this._refreshUpdateTimeout = setTimeout(function () {\n        // Show tip next tick after other charts are rendered\n        // In case highlight action has wrong result\n        // FIXME\n        !api.isDisposed() && self.manuallyShowTip(tooltipModel, ecModel, api, {\n          x: self._lastX,\n          y: self._lastY\n        });\n      });\n    }\n  },\n\n  /**\n   * Show tip manually by\n   * dispatchAction({\n   *     type: 'showTip',\n   *     x: 10,\n   *     y: 10\n   * });\n   * Or\n   * dispatchAction({\n   *      type: 'showTip',\n   *      seriesIndex: 0,\n   *      dataIndex or dataIndexInside or name\n   * });\n   *\n   *  TODO Batch\n   */\n  manuallyShowTip: function (tooltipModel, ecModel, api, payload) {\n    if (payload.from === this.uid || env.node) {\n      return;\n    }\n\n    var dispatchAction = makeDispatchAction(payload, api); // Reset ticket\n\n    this._ticket = ''; // When triggered from axisPointer.\n\n    var dataByCoordSys = payload.dataByCoordSys;\n\n    if (payload.tooltip && payload.x != null && payload.y != null) {\n      var el = proxyRect;\n      el.position = [payload.x, payload.y];\n      el.update();\n      el.tooltip = payload.tooltip; // Manually show tooltip while view is not using zrender elements.\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        target: el\n      }, dispatchAction);\n    } else if (dataByCoordSys) {\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        event: {},\n        dataByCoordSys: payload.dataByCoordSys,\n        tooltipOption: payload.tooltipOption\n      }, dispatchAction);\n    } else if (payload.seriesIndex != null) {\n      if (this._manuallyAxisShowTip(tooltipModel, ecModel, api, payload)) {\n        return;\n      }\n\n      var pointInfo = findPointFromSeries(payload, ecModel);\n      var cx = pointInfo.point[0];\n      var cy = pointInfo.point[1];\n\n      if (cx != null && cy != null) {\n        this._tryShow({\n          offsetX: cx,\n          offsetY: cy,\n          position: payload.position,\n          target: pointInfo.el,\n          event: {}\n        }, dispatchAction);\n      }\n    } else if (payload.x != null && payload.y != null) {\n      // FIXME\n      // should wrap dispatchAction like `axisPointer/globalListener` ?\n      api.dispatchAction({\n        type: 'updateAxisPointer',\n        x: payload.x,\n        y: payload.y\n      });\n\n      this._tryShow({\n        offsetX: payload.x,\n        offsetY: payload.y,\n        position: payload.position,\n        target: api.getZr().findHover(payload.x, payload.y).target,\n        event: {}\n      }, dispatchAction);\n    }\n  },\n  manuallyHideTip: function (tooltipModel, ecModel, api, payload) {\n    var tooltipContent = this._tooltipContent;\n\n    if (!this._alwaysShowContent && this._tooltipModel) {\n      tooltipContent.hideLater(this._tooltipModel.get('hideDelay'));\n    }\n\n    this._lastX = this._lastY = null;\n\n    if (payload.from !== this.uid) {\n      this._hide(makeDispatchAction(payload, api));\n    }\n  },\n  // Be compatible with previous design, that is, when tooltip.type is 'axis' and\n  // dispatchAction 'showTip' with seriesIndex and dataIndex will trigger axis pointer\n  // and tooltip.\n  _manuallyAxisShowTip: function (tooltipModel, ecModel, api, payload) {\n    var seriesIndex = payload.seriesIndex;\n    var dataIndex = payload.dataIndex;\n    var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo;\n\n    if (seriesIndex == null || dataIndex == null || coordSysAxesInfo == null) {\n      return;\n    }\n\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex);\n\n    if (!seriesModel) {\n      return;\n    }\n\n    var data = seriesModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), seriesModel, (seriesModel.coordinateSystem || {}).model, tooltipModel]);\n\n    if (tooltipModel.get('trigger') !== 'axis') {\n      return;\n    }\n\n    api.dispatchAction({\n      type: 'updateAxisPointer',\n      seriesIndex: seriesIndex,\n      dataIndex: dataIndex,\n      position: payload.position\n    });\n    return true;\n  },\n  _tryShow: function (e, dispatchAction) {\n    var el = e.target;\n    var tooltipModel = this._tooltipModel;\n\n    if (!tooltipModel) {\n      return;\n    } // Save mouse x, mouse y. So we can try to keep showing the tip if chart is refreshed\n\n\n    this._lastX = e.offsetX;\n    this._lastY = e.offsetY;\n    var dataByCoordSys = e.dataByCoordSys;\n\n    if (dataByCoordSys && dataByCoordSys.length) {\n      this._showAxisTooltip(dataByCoordSys, e);\n    } // Always show item tooltip if mouse is on the element with dataIndex\n    else if (el && el.dataIndex != null) {\n        this._lastDataByCoordSys = null;\n\n        this._showSeriesItemTooltip(e, el, dispatchAction);\n      } // Tooltip provided directly. Like legend.\n      else if (el && el.tooltip) {\n          this._lastDataByCoordSys = null;\n\n          this._showComponentItemTooltip(e, el, dispatchAction);\n        } else {\n          this._lastDataByCoordSys = null;\n\n          this._hide(dispatchAction);\n        }\n  },\n  _showOrMove: function (tooltipModel, cb) {\n    // showDelay is used in this case: tooltip.enterable is set\n    // as true. User intent to move mouse into tooltip and click\n    // something. `showDelay` makes it easyer to enter the content\n    // but tooltip do not move immediately.\n    var delay = tooltipModel.get('showDelay');\n    cb = zrUtil.bind(cb, this);\n    clearTimeout(this._showTimout);\n    delay > 0 ? this._showTimout = setTimeout(cb, delay) : cb();\n  },\n  _showAxisTooltip: function (dataByCoordSys, e) {\n    var ecModel = this._ecModel;\n    var globalTooltipModel = this._tooltipModel;\n    var point = [e.offsetX, e.offsetY];\n    var singleDefaultHTML = [];\n    var singleParamsList = [];\n    var singleTooltipModel = buildTooltipModel([e.tooltipOption, globalTooltipModel]);\n    var renderMode = this._renderMode;\n    var newLine = this._newLine;\n    var markers = {};\n    each(dataByCoordSys, function (itemCoordSys) {\n      // var coordParamList = [];\n      // var coordDefaultHTML = [];\n      // var coordTooltipModel = buildTooltipModel([\n      //     e.tooltipOption,\n      //     itemCoordSys.tooltipOption,\n      //     ecModel.getComponent(itemCoordSys.coordSysMainType, itemCoordSys.coordSysIndex),\n      //     globalTooltipModel\n      // ]);\n      // var displayMode = coordTooltipModel.get('displayMode');\n      // var paramsList = displayMode === 'single' ? singleParamsList : [];\n      each(itemCoordSys.dataByAxis, function (item) {\n        var axisModel = ecModel.getComponent(item.axisDim + 'Axis', item.axisIndex);\n        var axisValue = item.value;\n        var seriesDefaultHTML = [];\n\n        if (!axisModel || axisValue == null) {\n          return;\n        }\n\n        var valueLabel = axisPointerViewHelper.getValueLabel(axisValue, axisModel.axis, ecModel, item.seriesDataIndices, item.valueLabelOpt);\n        zrUtil.each(item.seriesDataIndices, function (idxItem) {\n          var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n          var dataIndex = idxItem.dataIndexInside;\n          var dataParams = series && series.getDataParams(dataIndex);\n          dataParams.axisDim = item.axisDim;\n          dataParams.axisIndex = item.axisIndex;\n          dataParams.axisType = item.axisType;\n          dataParams.axisId = item.axisId;\n          dataParams.axisValue = axisHelper.getAxisRawValue(axisModel.axis, axisValue);\n          dataParams.axisValueLabel = valueLabel;\n\n          if (dataParams) {\n            singleParamsList.push(dataParams);\n            var seriesTooltip = series.formatTooltip(dataIndex, true, null, renderMode);\n            var html;\n\n            if (zrUtil.isObject(seriesTooltip)) {\n              html = seriesTooltip.html;\n              var newMarkers = seriesTooltip.markers;\n              zrUtil.merge(markers, newMarkers);\n            } else {\n              html = seriesTooltip;\n            }\n\n            seriesDefaultHTML.push(html);\n          }\n        }); // Default tooltip content\n        // FIXME\n        // (1) shold be the first data which has name?\n        // (2) themeRiver, firstDataIndex is array, and first line is unnecessary.\n\n        var firstLine = valueLabel;\n\n        if (renderMode !== 'html') {\n          singleDefaultHTML.push(seriesDefaultHTML.join(newLine));\n        } else {\n          singleDefaultHTML.push((firstLine ? formatUtil.encodeHTML(firstLine) + newLine : '') + seriesDefaultHTML.join(newLine));\n        }\n      });\n    }, this); // In most case, the second axis is shown upper than the first one.\n\n    singleDefaultHTML.reverse();\n    singleDefaultHTML = singleDefaultHTML.join(this._newLine + this._newLine);\n    var positionExpr = e.position;\n\n    this._showOrMove(singleTooltipModel, function () {\n      if (this._updateContentNotChangedOnAxis(dataByCoordSys)) {\n        this._updatePosition(singleTooltipModel, positionExpr, point[0], point[1], this._tooltipContent, singleParamsList);\n      } else {\n        this._showTooltipContent(singleTooltipModel, singleDefaultHTML, singleParamsList, Math.random(), point[0], point[1], positionExpr, undefined, markers);\n      }\n    }); // Do not trigger events here, because this branch only be entered\n    // from dispatchAction.\n\n  },\n  _showSeriesItemTooltip: function (e, el, dispatchAction) {\n    var ecModel = this._ecModel; // Use dataModel in element if possible\n    // Used when mouseover on a element like markPoint or edge\n    // In which case, the data is not main data in series.\n\n    var seriesIndex = el.seriesIndex;\n    var seriesModel = ecModel.getSeriesByIndex(seriesIndex); // For example, graph link.\n\n    var dataModel = el.dataModel || seriesModel;\n    var dataIndex = el.dataIndex;\n    var dataType = el.dataType;\n    var data = dataModel.getData();\n    var tooltipModel = buildTooltipModel([data.getItemModel(dataIndex), dataModel, seriesModel && (seriesModel.coordinateSystem || {}).model, this._tooltipModel]);\n    var tooltipTrigger = tooltipModel.get('trigger');\n\n    if (tooltipTrigger != null && tooltipTrigger !== 'item') {\n      return;\n    }\n\n    var params = dataModel.getDataParams(dataIndex, dataType);\n    var seriesTooltip = dataModel.formatTooltip(dataIndex, false, dataType, this._renderMode);\n    var defaultHtml;\n    var markers;\n\n    if (zrUtil.isObject(seriesTooltip)) {\n      defaultHtml = seriesTooltip.html;\n      markers = seriesTooltip.markers;\n    } else {\n      defaultHtml = seriesTooltip;\n      markers = null;\n    }\n\n    var asyncTicket = 'item_' + dataModel.name + '_' + dataIndex;\n\n    this._showOrMove(tooltipModel, function () {\n      this._showTooltipContent(tooltipModel, defaultHtml, params, asyncTicket, e.offsetX, e.offsetY, e.position, e.target, markers);\n    }); // FIXME\n    // duplicated showtip if manuallyShowTip is called from dispatchAction.\n\n\n    dispatchAction({\n      type: 'showTip',\n      dataIndexInside: dataIndex,\n      dataIndex: data.getRawIndex(dataIndex),\n      seriesIndex: seriesIndex,\n      from: this.uid\n    });\n  },\n  _showComponentItemTooltip: function (e, el, dispatchAction) {\n    var tooltipOpt = el.tooltip;\n\n    if (typeof tooltipOpt === 'string') {\n      var content = tooltipOpt;\n      tooltipOpt = {\n        content: content,\n        // Fixed formatter\n        formatter: content\n      };\n    }\n\n    var subTooltipModel = new Model(tooltipOpt, this._tooltipModel, this._ecModel);\n    var defaultHtml = subTooltipModel.get('content');\n    var asyncTicket = Math.random(); // Do not check whether `trigger` is 'none' here, because `trigger`\n    // only works on cooridinate system. In fact, we have not found case\n    // that requires setting `trigger` nothing on component yet.\n\n    this._showOrMove(subTooltipModel, function () {\n      this._showTooltipContent(subTooltipModel, defaultHtml, subTooltipModel.get('formatterParams') || {}, asyncTicket, e.offsetX, e.offsetY, e.position, el);\n    }); // If not dispatch showTip, tip may be hide triggered by axis.\n\n\n    dispatchAction({\n      type: 'showTip',\n      from: this.uid\n    });\n  },\n  _showTooltipContent: function (tooltipModel, defaultHtml, params, asyncTicket, x, y, positionExpr, el, markers) {\n    // Reset ticket\n    this._ticket = '';\n\n    if (!tooltipModel.get('showContent') || !tooltipModel.get('show')) {\n      return;\n    }\n\n    var tooltipContent = this._tooltipContent;\n    var formatter = tooltipModel.get('formatter');\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var html = defaultHtml;\n\n    if (formatter && typeof formatter === 'string') {\n      html = formatUtil.formatTpl(formatter, params, true);\n    } else if (typeof formatter === 'function') {\n      var callback = bind(function (cbTicket, html) {\n        if (cbTicket === this._ticket) {\n          tooltipContent.setContent(html, markers, tooltipModel);\n\n          this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n        }\n      }, this);\n      this._ticket = asyncTicket;\n      html = formatter(params, asyncTicket, callback);\n    }\n\n    tooltipContent.setContent(html, markers, tooltipModel);\n    tooltipContent.show(tooltipModel);\n\n    this._updatePosition(tooltipModel, positionExpr, x, y, tooltipContent, params, el);\n  },\n\n  /**\n   * @param  {string|Function|Array.<number>|Object} positionExpr\n   * @param  {number} x Mouse x\n   * @param  {number} y Mouse y\n   * @param  {boolean} confine Whether confine tooltip content in view rect.\n   * @param  {Object|<Array.<Object>} params\n   * @param  {module:zrender/Element} el target element\n   * @param  {module:echarts/ExtensionAPI} api\n   * @return {Array.<number>}\n   */\n  _updatePosition: function (tooltipModel, positionExpr, x, y, content, params, el) {\n    var viewWidth = this._api.getWidth();\n\n    var viewHeight = this._api.getHeight();\n\n    positionExpr = positionExpr || tooltipModel.get('position');\n    var contentSize = content.getSize();\n    var align = tooltipModel.get('align');\n    var vAlign = tooltipModel.get('verticalAlign');\n    var rect = el && el.getBoundingRect().clone();\n    el && rect.applyTransform(el.transform);\n\n    if (typeof positionExpr === 'function') {\n      // Callback of position can be an array or a string specify the position\n      positionExpr = positionExpr([x, y], params, content.el, rect, {\n        viewSize: [viewWidth, viewHeight],\n        contentSize: contentSize.slice()\n      });\n    }\n\n    if (zrUtil.isArray(positionExpr)) {\n      x = parsePercent(positionExpr[0], viewWidth);\n      y = parsePercent(positionExpr[1], viewHeight);\n    } else if (zrUtil.isObject(positionExpr)) {\n      positionExpr.width = contentSize[0];\n      positionExpr.height = contentSize[1];\n      var layoutRect = layoutUtil.getLayoutRect(positionExpr, {\n        width: viewWidth,\n        height: viewHeight\n      });\n      x = layoutRect.x;\n      y = layoutRect.y;\n      align = null; // When positionExpr is left/top/right/bottom,\n      // align and verticalAlign will not work.\n\n      vAlign = null;\n    } // Specify tooltip position by string 'top' 'bottom' 'left' 'right' around graphic element\n    else if (typeof positionExpr === 'string' && el) {\n        var pos = calcTooltipPosition(positionExpr, rect, contentSize);\n        x = pos[0];\n        y = pos[1];\n      } else {\n        var pos = refixTooltipPosition(x, y, content, viewWidth, viewHeight, align ? null : 20, vAlign ? null : 20);\n        x = pos[0];\n        y = pos[1];\n      }\n\n    align && (x -= isCenterAlign(align) ? contentSize[0] / 2 : align === 'right' ? contentSize[0] : 0);\n    vAlign && (y -= isCenterAlign(vAlign) ? contentSize[1] / 2 : vAlign === 'bottom' ? contentSize[1] : 0);\n\n    if (tooltipModel.get('confine')) {\n      var pos = confineTooltipPosition(x, y, content, viewWidth, viewHeight);\n      x = pos[0];\n      y = pos[1];\n    }\n\n    content.moveTo(x, y);\n  },\n  // FIXME\n  // Should we remove this but leave this to user?\n  _updateContentNotChangedOnAxis: function (dataByCoordSys) {\n    var lastCoordSys = this._lastDataByCoordSys;\n    var contentNotChanged = !!lastCoordSys && lastCoordSys.length === dataByCoordSys.length;\n    contentNotChanged && each(lastCoordSys, function (lastItemCoordSys, indexCoordSys) {\n      var lastDataByAxis = lastItemCoordSys.dataByAxis || {};\n      var thisItemCoordSys = dataByCoordSys[indexCoordSys] || {};\n      var thisDataByAxis = thisItemCoordSys.dataByAxis || [];\n      contentNotChanged &= lastDataByAxis.length === thisDataByAxis.length;\n      contentNotChanged && each(lastDataByAxis, function (lastItem, indexAxis) {\n        var thisItem = thisDataByAxis[indexAxis] || {};\n        var lastIndices = lastItem.seriesDataIndices || [];\n        var newIndices = thisItem.seriesDataIndices || [];\n        contentNotChanged &= lastItem.value === thisItem.value && lastItem.axisType === thisItem.axisType && lastItem.axisId === thisItem.axisId && lastIndices.length === newIndices.length;\n        contentNotChanged && each(lastIndices, function (lastIdxItem, j) {\n          var newIdxItem = newIndices[j];\n          contentNotChanged &= lastIdxItem.seriesIndex === newIdxItem.seriesIndex && lastIdxItem.dataIndex === newIdxItem.dataIndex;\n        });\n      });\n    });\n    this._lastDataByCoordSys = dataByCoordSys;\n    return !!contentNotChanged;\n  },\n  _hide: function (dispatchAction) {\n    // Do not directly hideLater here, because this behavior may be prevented\n    // in dispatchAction when showTip is dispatched.\n    // FIXME\n    // duplicated hideTip if manuallyHideTip is called from dispatchAction.\n    this._lastDataByCoordSys = null;\n    dispatchAction({\n      type: 'hideTip',\n      from: this.uid\n    });\n  },\n  dispose: function (ecModel, api) {\n    if (env.node) {\n      return;\n    }\n\n    this._tooltipContent.hide();\n\n    globalListener.unregister('itemTooltip', api);\n  }\n});\n/**\n * @param {Array.<Object|module:echarts/model/Model>} modelCascade\n * From top to bottom. (the last one should be globalTooltipModel);\n */\n\n\nfunction buildTooltipModel(modelCascade) {\n  var resultModel = modelCascade.pop();\n\n  while (modelCascade.length) {\n    var tooltipOpt = modelCascade.pop();\n\n    if (tooltipOpt) {\n      if (Model.isInstance(tooltipOpt)) {\n        tooltipOpt = tooltipOpt.get('tooltip', true);\n      } // In each data item tooltip can be simply write:\n      // {\n      //  value: 10,\n      //  tooltip: 'Something you need to know'\n      // }\n\n\n      if (typeof tooltipOpt === 'string') {\n        tooltipOpt = {\n          formatter: tooltipOpt\n        };\n      }\n\n      resultModel = new Model(tooltipOpt, resultModel, resultModel.ecModel);\n    }\n  }\n\n  return resultModel;\n}\n\nfunction makeDispatchAction(payload, api) {\n  return payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n}\n\nfunction refixTooltipPosition(x, y, content, viewWidth, viewHeight, gapH, gapV) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n\n  if (gapH != null) {\n    if (x + width + gapH > viewWidth) {\n      x -= width + gapH;\n    } else {\n      x += gapH;\n    }\n  }\n\n  if (gapV != null) {\n    if (y + height + gapV > viewHeight) {\n      y -= height + gapV;\n    } else {\n      y += gapV;\n    }\n  }\n\n  return [x, y];\n}\n\nfunction confineTooltipPosition(x, y, content, viewWidth, viewHeight) {\n  var size = content.getOuterSize();\n  var width = size.width;\n  var height = size.height;\n  x = Math.min(x + width, viewWidth) - width;\n  y = Math.min(y + height, viewHeight) - height;\n  x = Math.max(x, 0);\n  y = Math.max(y, 0);\n  return [x, y];\n}\n\nfunction calcTooltipPosition(position, rect, contentSize) {\n  var domWidth = contentSize[0];\n  var domHeight = contentSize[1];\n  var gap = 5;\n  var x = 0;\n  var y = 0;\n  var rectWidth = rect.width;\n  var rectHeight = rect.height;\n\n  switch (position) {\n    case 'inside':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'top':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y - domHeight - gap;\n      break;\n\n    case 'bottom':\n      x = rect.x + rectWidth / 2 - domWidth / 2;\n      y = rect.y + rectHeight + gap;\n      break;\n\n    case 'left':\n      x = rect.x - domWidth - gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n      break;\n\n    case 'right':\n      x = rect.x + rectWidth + gap;\n      y = rect.y + rectHeight / 2 - domHeight / 2;\n  }\n\n  return [x, y];\n}\n\nfunction isCenterAlign(align) {\n  return align === 'center' || align === 'middle';\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction legendSelectActionHandler(methodName, payload, ecModel) {\n  var selectedMap = {};\n  var isToggleSelect = methodName === 'toggleSelected';\n  var isSelected; // Update all legend components\n\n  ecModel.eachComponent('legend', function (legendModel) {\n    if (isToggleSelect && isSelected != null) {\n      // Force other legend has same selected status\n      // Or the first is toggled to true and other are toggled to false\n      // In the case one legend has some item unSelected in option. And if other legend\n      // doesn't has the item, they will assume it is selected.\n      legendModel[isSelected ? 'select' : 'unSelect'](payload.name);\n    } else if (methodName === 'allSelect' || methodName === 'inverseSelect') {\n      legendModel[methodName]();\n    } else {\n      legendModel[methodName](payload.name);\n      isSelected = legendModel.isSelected(payload.name);\n    }\n\n    var legendData = legendModel.getData();\n    zrUtil.each(legendData, function (model) {\n      var name = model.get('name'); // Wrap element\n\n      if (name === '\\n' || name === '') {\n        return;\n      }\n\n      var isItemSelected = legendModel.isSelected(name);\n\n      if (selectedMap.hasOwnProperty(name)) {\n        // Unselected if any legend is unselected\n        selectedMap[name] = selectedMap[name] && isItemSelected;\n      } else {\n        selectedMap[name] = isItemSelected;\n      }\n    });\n  }); // Return the event explicitly\n\n  return methodName === 'allSelect' || methodName === 'inverseSelect' ? {\n    selected: selectedMap\n  } : {\n    name: payload.name,\n    selected: selectedMap\n  };\n}\n/**\n * @event legendToggleSelect\n * @type {Object}\n * @property {string} type 'legendToggleSelect'\n * @property {string} [from]\n * @property {string} name Series name or data item name\n */\n\n\necharts.registerAction('legendToggleSelect', 'legendselectchanged', zrUtil.curry(legendSelectActionHandler, 'toggleSelected'));\necharts.registerAction('legendAllSelect', 'legendselectall', zrUtil.curry(legendSelectActionHandler, 'allSelect'));\necharts.registerAction('legendInverseSelect', 'legendinverseselect', zrUtil.curry(legendSelectActionHandler, 'inverseSelect'));\n/**\n * @event legendSelect\n * @type {Object}\n * @property {string} type 'legendSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendSelect', 'legendselected', zrUtil.curry(legendSelectActionHandler, 'select'));\n/**\n * @event legendUnSelect\n * @type {Object}\n * @property {string} type 'legendUnSelect'\n * @property {string} name Series name or data item name\n */\n\necharts.registerAction('legendUnSelect', 'legendunselected', zrUtil.curry(legendSelectActionHandler, 'unSelect'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerModel = echarts.extendComponentModel({\n  type: 'axisPointer',\n  coordSysAxesInfo: null,\n  defaultOption: {\n    // 'auto' means that show when triggered by tooltip or handle.\n    show: 'auto',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: null,\n    // set default in AxisPonterView.js\n    zlevel: 0,\n    z: 50,\n    type: 'line',\n    // 'line' 'shadow' 'cross' 'none'.\n    // axispointer triggered by tootip determine snap automatically,\n    // see `modelHelper`.\n    snap: false,\n    triggerTooltip: true,\n    value: null,\n    status: null,\n    // Init value depends on whether handle is used.\n    // [group0, group1, ...]\n    // Each group can be: {\n    //      mapper: function () {},\n    //      singleTooltip: 'multiple',  // 'multiple' or 'single'\n    //      xAxisId: ...,\n    //      yAxisName: ...,\n    //      angleAxisIndex: ...\n    // }\n    // mapper: can be ignored.\n    //      input: {axisInfo, value}\n    //      output: {axisInfo, value}\n    link: [],\n    // Do not set 'auto' here, otherwise global animation: false\n    // will not effect at this axispointer.\n    animation: null,\n    animationDurationUpdate: 200,\n    lineStyle: {\n      color: '#aaa',\n      width: 1,\n      type: 'solid'\n    },\n    shadowStyle: {\n      color: 'rgba(150,150,150,0.3)'\n    },\n    label: {\n      show: true,\n      formatter: null,\n      // string | Function\n      precision: 'auto',\n      // Or a number like 0, 1, 2 ...\n      margin: 3,\n      color: '#fff',\n      padding: [5, 7, 5, 7],\n      backgroundColor: 'auto',\n      // default: axis line color\n      borderColor: null,\n      borderWidth: 0,\n      shadowBlur: 3,\n      shadowColor: '#aaa' // Considering applicability, common style should\n      // better not have shadowOffset.\n      // shadowOffsetX: 0,\n      // shadowOffsetY: 2\n\n    },\n    handle: {\n      show: false,\n\n      /* eslint-disable */\n      icon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z',\n      // jshint ignore:line\n\n      /* eslint-enable */\n      size: 45,\n      // handle margin is from symbol center to axis, which is stable when circular move.\n      margin: 50,\n      // color: '#1b8bbd'\n      // color: '#2f4554'\n      color: '#333',\n      shadowBlur: 3,\n      shadowColor: '#aaa',\n      shadowOffsetX: 0,\n      shadowOffsetY: 2,\n      // For mobile performance\n      throttle: 40\n    }\n  }\n});\nvar _default = AxisPointerModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\nvar axisModelCreator = require(\"../axisModelCreator\");\n\nvar axisModelCommonMixin = require(\"../axisModelCommonMixin\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisModel = ComponentModel.extend({\n  type: 'cartesian2dAxis',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Axis2D}\n   */\n  axis: null,\n\n  /**\n   * @override\n   */\n  init: function () {\n    AxisModel.superApply(this, 'init', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  mergeOption: function () {\n    AxisModel.superApply(this, 'mergeOption', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   */\n  restoreData: function () {\n    AxisModel.superApply(this, 'restoreData', arguments);\n    this.resetRange();\n  },\n\n  /**\n   * @override\n   * @return {module:echarts/model/Component}\n   */\n  getCoordSysModel: function () {\n    return this.ecModel.queryComponents({\n      mainType: 'grid',\n      index: this.option.gridIndex,\n      id: this.option.gridId\n    })[0];\n  }\n});\n\nfunction getAxisType(axisDim, option) {\n  // Default axis with data is category axis\n  return option.type || (option.data ? 'category' : 'value');\n}\n\nzrUtil.merge(AxisModel.prototype, axisModelCommonMixin);\nvar extraOption = {\n  // gridIndex: 0,\n  // gridId: '',\n  // Offset is for multiple axis on the same position\n  offset: 0\n};\naxisModelCreator('x', AxisModel, getAxisType, extraOption);\naxisModelCreator('y', AxisModel, getAxisType, extraOption);\nvar _default = AxisModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar BaseAxisPointer = require(\"./BaseAxisPointer\");\n\nvar viewHelper = require(\"./viewHelper\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\nvar AxisView = require(\"../axis/AxisView\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar CartesianAxisPointer = BaseAxisPointer.extend({\n  /**\n   * @override\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisPointerType = axisPointerModel.get('type');\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var pixelValue = axis.toGlobalCoord(axis.dataToCoord(value, true));\n\n    if (axisPointerType && axisPointerType !== 'none') {\n      var elStyle = viewHelper.buildElStyle(axisPointerModel);\n      var pointerOption = pointerShapeBuilder[axisPointerType](axis, pixelValue, otherExtent);\n      pointerOption.style = elStyle;\n      elOption.graphicKey = pointerOption.type;\n      elOption.pointer = pointerOption;\n    }\n\n    var layoutInfo = cartesianAxisHelper.layout(grid.model, axisModel);\n    viewHelper.buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api);\n  },\n\n  /**\n   * @override\n   */\n  getHandleTransform: function (value, axisModel, axisPointerModel) {\n    var layoutInfo = cartesianAxisHelper.layout(axisModel.axis.grid.model, axisModel, {\n      labelInside: false\n    });\n    layoutInfo.labelMargin = axisPointerModel.get('handle.margin');\n    return {\n      position: viewHelper.getTransformedPosition(axisModel.axis, value, layoutInfo),\n      rotation: layoutInfo.rotation + (layoutInfo.labelDirection < 0 ? Math.PI : 0)\n    };\n  },\n\n  /**\n   * @override\n   */\n  updateHandleTransform: function (transform, delta, axisModel, axisPointerModel) {\n    var axis = axisModel.axis;\n    var grid = axis.grid;\n    var axisExtent = axis.getGlobalExtent(true);\n    var otherExtent = getCartesian(grid, axis).getOtherAxis(axis).getGlobalExtent();\n    var dimIndex = axis.dim === 'x' ? 0 : 1;\n    var currPosition = transform.position;\n    currPosition[dimIndex] += delta[dimIndex];\n    currPosition[dimIndex] = Math.min(axisExtent[1], currPosition[dimIndex]);\n    currPosition[dimIndex] = Math.max(axisExtent[0], currPosition[dimIndex]);\n    var cursorOtherValue = (otherExtent[1] + otherExtent[0]) / 2;\n    var cursorPoint = [cursorOtherValue, cursorOtherValue];\n    cursorPoint[dimIndex] = currPosition[dimIndex]; // Make tooltip do not overlap axisPointer and in the middle of the grid.\n\n    var tooltipOptions = [{\n      verticalAlign: 'middle'\n    }, {\n      align: 'center'\n    }];\n    return {\n      position: currPosition,\n      rotation: transform.rotation,\n      cursorPoint: cursorPoint,\n      tooltipOption: tooltipOptions[dimIndex]\n    };\n  }\n});\n\nfunction getCartesian(grid, axis) {\n  var opt = {};\n  opt[axis.dim + 'AxisIndex'] = axis.index;\n  return grid.getCartesian(opt);\n}\n\nvar pointerShapeBuilder = {\n  line: function (axis, pixelValue, otherExtent) {\n    var targetShape = viewHelper.makeLineShape([pixelValue, otherExtent[0]], [pixelValue, otherExtent[1]], getAxisDimIndex(axis));\n    return {\n      type: 'Line',\n      subPixelOptimize: true,\n      shape: targetShape\n    };\n  },\n  shadow: function (axis, pixelValue, otherExtent) {\n    var bandWidth = Math.max(1, axis.getBandWidth());\n    var span = otherExtent[1] - otherExtent[0];\n    return {\n      type: 'Rect',\n      shape: viewHelper.makeRectShape([pixelValue - bandWidth / 2, otherExtent[0]], [bandWidth, span], getAxisDimIndex(axis))\n    };\n  }\n};\n\nfunction getAxisDimIndex(axis) {\n  return axis.dim === 'x' ? 0 : 1;\n}\n\nAxisView.registerAxisPointerClass('CartesianAxisPointer', CartesianAxisPointer);\nvar _default = CartesianAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar isObject = _util.isObject;\nvar each = _util.each;\nvar map = _util.map;\nvar indexOf = _util.indexOf;\nvar retrieve = _util.retrieve;\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar createScaleByModel = _axisHelper.createScaleByModel;\nvar ifAxisCrossZero = _axisHelper.ifAxisCrossZero;\nvar niceScaleExtent = _axisHelper.niceScaleExtent;\nvar estimateLabelUnionRect = _axisHelper.estimateLabelUnionRect;\n\nvar Cartesian2D = require(\"./Cartesian2D\");\n\nvar Axis2D = require(\"./Axis2D\");\n\nvar CoordinateSystem = require(\"../../CoordinateSystem\");\n\nvar _dataStackHelper = require(\"../../data/helper/dataStackHelper\");\n\nvar getStackedDimension = _dataStackHelper.getStackedDimension;\n\nrequire(\"./GridModel\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Grid is a region which contains at most 4 cartesian systems\n *\n * TODO Default cartesian\n */\n// Depends on GridModel, AxisModel, which performs preprocess.\n\n/**\n * Check if the axis is used in the specified grid\n * @inner\n */\nfunction isAxisUsedInTheGrid(axisModel, gridModel, ecModel) {\n  return axisModel.getCoordSysModel() === gridModel;\n}\n\nfunction Grid(gridModel, ecModel, api) {\n  /**\n   * @type {Object.<string, module:echarts/coord/cartesian/Cartesian2D>}\n   * @private\n   */\n  this._coordsMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Cartesian>}\n   * @private\n   */\n\n  this._coordsList = [];\n  /**\n   * @type {Object.<string, Array.<module:echarts/coord/cartesian/Axis2D>>}\n   * @private\n   */\n\n  this._axesMap = {};\n  /**\n   * @type {Array.<module:echarts/coord/cartesian/Axis2D>}\n   * @private\n   */\n\n  this._axesList = [];\n\n  this._initCartesian(gridModel, ecModel, api);\n\n  this.model = gridModel;\n}\n\nvar gridProto = Grid.prototype;\ngridProto.type = 'grid';\ngridProto.axisPointerEnabled = true;\n\ngridProto.getRect = function () {\n  return this._rect;\n};\n\ngridProto.update = function (ecModel, api) {\n  var axesMap = this._axesMap;\n\n  this._updateScale(ecModel, this.model);\n\n  each(axesMap.x, function (xAxis) {\n    niceScaleExtent(xAxis.scale, xAxis.model);\n  });\n  each(axesMap.y, function (yAxis) {\n    niceScaleExtent(yAxis.scale, yAxis.model);\n  }); // Key: axisDim_axisIndex, value: boolean, whether onZero target.\n\n  var onZeroRecords = {};\n  each(axesMap.x, function (xAxis) {\n    fixAxisOnZero(axesMap, 'y', xAxis, onZeroRecords);\n  });\n  each(axesMap.y, function (yAxis) {\n    fixAxisOnZero(axesMap, 'x', yAxis, onZeroRecords);\n  }); // Resize again if containLabel is enabled\n  // FIXME It may cause getting wrong grid size in data processing stage\n\n  this.resize(this.model, api);\n};\n\nfunction fixAxisOnZero(axesMap, otherAxisDim, axis, onZeroRecords) {\n  axis.getAxesOnZeroOf = function () {\n    // TODO: onZero of multiple axes.\n    return otherAxisOnZeroOf ? [otherAxisOnZeroOf] : [];\n  }; // onZero can not be enabled in these two situations:\n  // 1. When any other axis is a category axis.\n  // 2. When no axis is cross 0 point.\n\n\n  var otherAxes = axesMap[otherAxisDim];\n  var otherAxisOnZeroOf;\n  var axisModel = axis.model;\n  var onZero = axisModel.get('axisLine.onZero');\n  var onZeroAxisIndex = axisModel.get('axisLine.onZeroAxisIndex');\n\n  if (!onZero) {\n    return;\n  } // If target axis is specified.\n\n\n  if (onZeroAxisIndex != null) {\n    if (canOnZeroToAxis(otherAxes[onZeroAxisIndex])) {\n      otherAxisOnZeroOf = otherAxes[onZeroAxisIndex];\n    }\n  } else {\n    // Find the first available other axis.\n    for (var idx in otherAxes) {\n      if (otherAxes.hasOwnProperty(idx) && canOnZeroToAxis(otherAxes[idx]) // Consider that two Y axes on one value axis,\n      // if both onZero, the two Y axes overlap.\n      && !onZeroRecords[getOnZeroRecordKey(otherAxes[idx])]) {\n        otherAxisOnZeroOf = otherAxes[idx];\n        break;\n      }\n    }\n  }\n\n  if (otherAxisOnZeroOf) {\n    onZeroRecords[getOnZeroRecordKey(otherAxisOnZeroOf)] = true;\n  }\n\n  function getOnZeroRecordKey(axis) {\n    return axis.dim + '_' + axis.index;\n  }\n}\n\nfunction canOnZeroToAxis(axis) {\n  return axis && axis.type !== 'category' && axis.type !== 'time' && ifAxisCrossZero(axis);\n}\n/**\n * Resize the grid\n * @param {module:echarts/coord/cartesian/GridModel} gridModel\n * @param {module:echarts/ExtensionAPI} api\n */\n\n\ngridProto.resize = function (gridModel, api, ignoreContainLabel) {\n  var gridRect = getLayoutRect(gridModel.getBoxLayoutParams(), {\n    width: api.getWidth(),\n    height: api.getHeight()\n  });\n  this._rect = gridRect;\n  var axesList = this._axesList;\n  adjustAxes(); // Minus label size\n\n  if (!ignoreContainLabel && gridModel.get('containLabel')) {\n    each(axesList, function (axis) {\n      if (!axis.model.get('axisLabel.inside')) {\n        var labelUnionRect = estimateLabelUnionRect(axis);\n\n        if (labelUnionRect) {\n          var dim = axis.isHorizontal() ? 'height' : 'width';\n          var margin = axis.model.get('axisLabel.margin');\n          gridRect[dim] -= labelUnionRect[dim] + margin;\n\n          if (axis.position === 'top') {\n            gridRect.y += labelUnionRect.height + margin;\n          } else if (axis.position === 'left') {\n            gridRect.x += labelUnionRect.width + margin;\n          }\n        }\n      }\n    });\n    adjustAxes();\n  }\n\n  function adjustAxes() {\n    each(axesList, function (axis) {\n      var isHorizontal = axis.isHorizontal();\n      var extent = isHorizontal ? [0, gridRect.width] : [0, gridRect.height];\n      var idx = axis.inverse ? 1 : 0;\n      axis.setExtent(extent[idx], extent[1 - idx]);\n      updateAxisTransform(axis, isHorizontal ? gridRect.x : gridRect.y);\n    });\n  }\n};\n/**\n * @param {string} axisType\n * @param {number} [axisIndex]\n */\n\n\ngridProto.getAxis = function (axisType, axisIndex) {\n  var axesMapOnDim = this._axesMap[axisType];\n\n  if (axesMapOnDim != null) {\n    if (axisIndex == null) {\n      // Find first axis\n      for (var name in axesMapOnDim) {\n        if (axesMapOnDim.hasOwnProperty(name)) {\n          return axesMapOnDim[name];\n        }\n      }\n    }\n\n    return axesMapOnDim[axisIndex];\n  }\n};\n/**\n * @return {Array.<module:echarts/coord/Axis>}\n */\n\n\ngridProto.getAxes = function () {\n  return this._axesList.slice();\n};\n/**\n * Usage:\n *      grid.getCartesian(xAxisIndex, yAxisIndex);\n *      grid.getCartesian(xAxisIndex);\n *      grid.getCartesian(null, yAxisIndex);\n *      grid.getCartesian({xAxisIndex: ..., yAxisIndex: ...});\n *\n * @param {number|Object} [xAxisIndex]\n * @param {number} [yAxisIndex]\n */\n\n\ngridProto.getCartesian = function (xAxisIndex, yAxisIndex) {\n  if (xAxisIndex != null && yAxisIndex != null) {\n    var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n    return this._coordsMap[key];\n  }\n\n  if (isObject(xAxisIndex)) {\n    yAxisIndex = xAxisIndex.yAxisIndex;\n    xAxisIndex = xAxisIndex.xAxisIndex;\n  } // When only xAxisIndex or yAxisIndex given, find its first cartesian.\n\n\n  for (var i = 0, coordList = this._coordsList; i < coordList.length; i++) {\n    if (coordList[i].getAxis('x').index === xAxisIndex || coordList[i].getAxis('y').index === yAxisIndex) {\n      return coordList[i];\n    }\n  }\n};\n\ngridProto.getCartesians = function () {\n  return this._coordsList.slice();\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertToPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.dataToPoint(value) : target.axis ? target.axis.toGlobalCoord(target.axis.dataToCoord(value)) : null;\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.convertFromPixel = function (ecModel, finder, value) {\n  var target = this._findConvertTarget(ecModel, finder);\n\n  return target.cartesian ? target.cartesian.pointToData(value) : target.axis ? target.axis.coordToData(target.axis.toLocalCoord(value)) : null;\n};\n/**\n * @inner\n */\n\n\ngridProto._findConvertTarget = function (ecModel, finder) {\n  var seriesModel = finder.seriesModel;\n  var xAxisModel = finder.xAxisModel || seriesModel && seriesModel.getReferringComponents('xAxis')[0];\n  var yAxisModel = finder.yAxisModel || seriesModel && seriesModel.getReferringComponents('yAxis')[0];\n  var gridModel = finder.gridModel;\n  var coordsList = this._coordsList;\n  var cartesian;\n  var axis;\n\n  if (seriesModel) {\n    cartesian = seriesModel.coordinateSystem;\n    indexOf(coordsList, cartesian) < 0 && (cartesian = null);\n  } else if (xAxisModel && yAxisModel) {\n    cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  } else if (xAxisModel) {\n    axis = this.getAxis('x', xAxisModel.componentIndex);\n  } else if (yAxisModel) {\n    axis = this.getAxis('y', yAxisModel.componentIndex);\n  } // Lowest priority.\n  else if (gridModel) {\n      var grid = gridModel.coordinateSystem;\n\n      if (grid === this) {\n        cartesian = this._coordsList[0];\n      }\n    }\n\n  return {\n    cartesian: cartesian,\n    axis: axis\n  };\n};\n/**\n * @implements\n * see {module:echarts/CoodinateSystem}\n */\n\n\ngridProto.containPoint = function (point) {\n  var coord = this._coordsList[0];\n\n  if (coord) {\n    return coord.containPoint(point);\n  }\n};\n/**\n * Initialize cartesian coordinate systems\n * @private\n */\n\n\ngridProto._initCartesian = function (gridModel, ecModel, api) {\n  var axisPositionUsed = {\n    left: false,\n    right: false,\n    top: false,\n    bottom: false\n  };\n  var axesMap = {\n    x: {},\n    y: {}\n  };\n  var axesCount = {\n    x: 0,\n    y: 0\n  }; /// Create axis\n\n  ecModel.eachComponent('xAxis', createAxisCreator('x'), this);\n  ecModel.eachComponent('yAxis', createAxisCreator('y'), this);\n\n  if (!axesCount.x || !axesCount.y) {\n    // Roll back when there no either x or y axis\n    this._axesMap = {};\n    this._axesList = [];\n    return;\n  }\n\n  this._axesMap = axesMap; /// Create cartesian2d\n\n  each(axesMap.x, function (xAxis, xAxisIndex) {\n    each(axesMap.y, function (yAxis, yAxisIndex) {\n      var key = 'x' + xAxisIndex + 'y' + yAxisIndex;\n      var cartesian = new Cartesian2D(key);\n      cartesian.grid = this;\n      cartesian.model = gridModel;\n      this._coordsMap[key] = cartesian;\n\n      this._coordsList.push(cartesian);\n\n      cartesian.addAxis(xAxis);\n      cartesian.addAxis(yAxis);\n    }, this);\n  }, this);\n\n  function createAxisCreator(axisType) {\n    return function (axisModel, idx) {\n      if (!isAxisUsedInTheGrid(axisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var axisPosition = axisModel.get('position');\n\n      if (axisType === 'x') {\n        // Fix position\n        if (axisPosition !== 'top' && axisPosition !== 'bottom') {\n          // Default bottom of X\n          axisPosition = axisPositionUsed.bottom ? 'top' : 'bottom';\n        }\n      } else {\n        // Fix position\n        if (axisPosition !== 'left' && axisPosition !== 'right') {\n          // Default left of Y\n          axisPosition = axisPositionUsed.left ? 'right' : 'left';\n        }\n      }\n\n      axisPositionUsed[axisPosition] = true;\n      var axis = new Axis2D(axisType, createScaleByModel(axisModel), [0, 0], axisModel.get('type'), axisPosition);\n      var isCategory = axis.type === 'category';\n      axis.onBand = isCategory && axisModel.get('boundaryGap');\n      axis.inverse = axisModel.get('inverse'); // Inject axis into axisModel\n\n      axisModel.axis = axis; // Inject axisModel into axis\n\n      axis.model = axisModel; // Inject grid info axis\n\n      axis.grid = this; // Index of axis, can be used as key\n\n      axis.index = idx;\n\n      this._axesList.push(axis);\n\n      axesMap[axisType][idx] = axis;\n      axesCount[axisType]++;\n    };\n  }\n};\n/**\n * Update cartesian properties from series\n * @param  {module:echarts/model/Option} option\n * @private\n */\n\n\ngridProto._updateScale = function (ecModel, gridModel) {\n  // Reset scale\n  each(this._axesList, function (axis) {\n    axis.scale.setExtent(Infinity, -Infinity);\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (isCartesian2D(seriesModel)) {\n      var axesModels = findAxesModels(seriesModel, ecModel);\n      var xAxisModel = axesModels[0];\n      var yAxisModel = axesModels[1];\n\n      if (!isAxisUsedInTheGrid(xAxisModel, gridModel, ecModel) || !isAxisUsedInTheGrid(yAxisModel, gridModel, ecModel)) {\n        return;\n      }\n\n      var cartesian = this.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n      var data = seriesModel.getData();\n      var xAxis = cartesian.getAxis('x');\n      var yAxis = cartesian.getAxis('y');\n\n      if (data.type === 'list') {\n        unionExtent(data, xAxis, seriesModel);\n        unionExtent(data, yAxis, seriesModel);\n      }\n    }\n  }, this);\n\n  function unionExtent(data, axis, seriesModel) {\n    each(data.mapDimension(axis.dim, true), function (dim) {\n      axis.scale.unionExtentFromData( // For example, the extent of the orginal dimension\n      // is [0.1, 0.5], the extent of the `stackResultDimension`\n      // is [7, 9], the final extent should not include [0.1, 0.5].\n      data, getStackedDimension(data, dim));\n    });\n  }\n};\n/**\n * @param {string} [dim] 'x' or 'y' or 'auto' or null/undefined\n * @return {Object} {baseAxes: [], otherAxes: []}\n */\n\n\ngridProto.getTooltipAxes = function (dim) {\n  var baseAxes = [];\n  var otherAxes = [];\n  each(this.getCartesians(), function (cartesian) {\n    var baseAxis = dim != null && dim !== 'auto' ? cartesian.getAxis(dim) : cartesian.getBaseAxis();\n    var otherAxis = cartesian.getOtherAxis(baseAxis);\n    indexOf(baseAxes, baseAxis) < 0 && baseAxes.push(baseAxis);\n    indexOf(otherAxes, otherAxis) < 0 && otherAxes.push(otherAxis);\n  });\n  return {\n    baseAxes: baseAxes,\n    otherAxes: otherAxes\n  };\n};\n/**\n * @inner\n */\n\n\nfunction updateAxisTransform(axis, coordBase) {\n  var axisExtent = axis.getExtent();\n  var axisExtentSum = axisExtent[0] + axisExtent[1]; // Fast transform\n\n  axis.toGlobalCoord = axis.dim === 'x' ? function (coord) {\n    return coord + coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n  axis.toLocalCoord = axis.dim === 'x' ? function (coord) {\n    return coord - coordBase;\n  } : function (coord) {\n    return axisExtentSum - coord + coordBase;\n  };\n}\n\nvar axesTypes = ['xAxis', 'yAxis'];\n/**\n * @inner\n */\n\nfunction findAxesModels(seriesModel, ecModel) {\n  return map(axesTypes, function (axisType) {\n    var axisModel = seriesModel.getReferringComponents(axisType)[0];\n    return axisModel;\n  });\n}\n/**\n * @inner\n */\n\n\nfunction isCartesian2D(seriesModel) {\n  return seriesModel.get('coordinateSystem') === 'cartesian2d';\n}\n\nGrid.create = function (ecModel, api) {\n  var grids = [];\n  ecModel.eachComponent('grid', function (gridModel, idx) {\n    var grid = new Grid(gridModel, ecModel, api);\n    grid.name = 'grid_' + idx; // dataSampling requires axis extent, so resize\n    // should be performed in create stage.\n\n    grid.resize(gridModel, api, true);\n    gridModel.coordinateSystem = grid;\n    grids.push(grid);\n  }); // Inject the coordinateSystems into seriesModel\n\n  ecModel.eachSeries(function (seriesModel) {\n    if (!isCartesian2D(seriesModel)) {\n      return;\n    }\n\n    var axesModels = findAxesModels(seriesModel, ecModel);\n    var xAxisModel = axesModels[0];\n    var yAxisModel = axesModels[1];\n    var gridModel = xAxisModel.getCoordSysModel();\n    var grid = gridModel.coordinateSystem;\n    seriesModel.coordinateSystem = grid.getCartesian(xAxisModel.componentIndex, yAxisModel.componentIndex);\n  });\n  return grids;\n}; // For deciding which dimensions to use when creating list data\n\n\nGrid.dimensions = Grid.prototype.dimensions = Cartesian2D.prototype.dimensions;\nCoordinateSystem.register('cartesian2d', Grid);\nvar _default = Grid;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _listComponent = require(\"../helper/listComponent\");\n\nvar makeBackground = _listComponent.makeBackground;\n\nvar layoutUtil = require(\"../../util/layout\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar curry = zrUtil.curry;\nvar each = zrUtil.each;\nvar Group = graphic.Group;\n\nvar _default = echarts.extendComponentView({\n  type: 'legend.plain',\n  newlineDisabled: false,\n\n  /**\n   * @override\n   */\n  init: function () {\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n    this.group.add(this._contentGroup = new Group());\n    /**\n     * @private\n     * @type {module:zrender/Element}\n     */\n\n    this._backgroundEl;\n    /**\n     * @private\n     * @type {module:zrender/container/Group}\n     */\n\n    this.group.add(this._selectorGroup = new Group());\n    /**\n     * If first rendering, `contentGroup.position` is [0, 0], which\n     * does not make sense and may cause unexepcted animation if adopted.\n     * @private\n     * @type {boolean}\n     */\n\n    this._isFirstRender = true;\n  },\n\n  /**\n   * @protected\n   */\n  getContentGroup: function () {\n    return this._contentGroup;\n  },\n\n  /**\n   * @protected\n   */\n  getSelectorGroup: function () {\n    return this._selectorGroup;\n  },\n\n  /**\n   * @override\n   */\n  render: function (legendModel, ecModel, api) {\n    var isFirstRender = this._isFirstRender;\n    this._isFirstRender = false;\n    this.resetInner();\n\n    if (!legendModel.get('show', true)) {\n      return;\n    }\n\n    var itemAlign = legendModel.get('align');\n    var orient = legendModel.get('orient');\n\n    if (!itemAlign || itemAlign === 'auto') {\n      itemAlign = legendModel.get('left') === 'right' && orient === 'vertical' ? 'right' : 'left';\n    }\n\n    var selector = legendModel.get('selector', true);\n    var selectorPosition = legendModel.get('selectorPosition', true);\n\n    if (selector && (!selectorPosition || selectorPosition === 'auto')) {\n      selectorPosition = orient === 'horizontal' ? 'end' : 'start';\n    }\n\n    this.renderInner(itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition); // Perform layout.\n\n    var positionInfo = legendModel.getBoxLayoutParams();\n    var viewportSize = {\n      width: api.getWidth(),\n      height: api.getHeight()\n    };\n    var padding = legendModel.get('padding');\n    var maxSize = layoutUtil.getLayoutRect(positionInfo, viewportSize, padding);\n    var mainRect = this.layoutInner(legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition); // Place mainGroup, based on the calculated `mainRect`.\n\n    var layoutRect = layoutUtil.getLayoutRect(zrUtil.defaults({\n      width: mainRect.width,\n      height: mainRect.height\n    }, positionInfo), viewportSize, padding);\n    this.group.attr('position', [layoutRect.x - mainRect.x, layoutRect.y - mainRect.y]); // Render background after group is layout.\n\n    this.group.add(this._backgroundEl = makeBackground(mainRect, legendModel));\n  },\n\n  /**\n   * @protected\n   */\n  resetInner: function () {\n    this.getContentGroup().removeAll();\n    this._backgroundEl && this.group.remove(this._backgroundEl);\n    this.getSelectorGroup().removeAll();\n  },\n\n  /**\n   * @protected\n   */\n  renderInner: function (itemAlign, legendModel, ecModel, api, selector, orient, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var legendDrawnMap = zrUtil.createHashMap();\n    var selectMode = legendModel.get('selectedMode');\n    var excludeSeriesId = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      !seriesModel.get('legendHoverLink') && excludeSeriesId.push(seriesModel.id);\n    });\n    each(legendModel.getData(), function (itemModel, dataIndex) {\n      var name = itemModel.get('name'); // Use empty string or \\n as a newline string\n\n      if (!this.newlineDisabled && (name === '' || name === '\\n')) {\n        contentGroup.add(new Group({\n          newline: true\n        }));\n        return;\n      } // Representitive series.\n\n\n      var seriesModel = ecModel.getSeriesByName(name)[0];\n\n      if (legendDrawnMap.get(name)) {\n        // Have been drawed\n        return;\n      } // Legend to control series.\n\n\n      if (seriesModel) {\n        var data = seriesModel.getData();\n        var color = data.getVisual('color');\n        var borderColor = data.getVisual('borderColor'); // If color is a callback function\n\n        if (typeof color === 'function') {\n          // Use the first data\n          color = color(seriesModel.getDataParams(0));\n        } // If borderColor is a callback function\n\n\n        if (typeof borderColor === 'function') {\n          // Use the first data\n          borderColor = borderColor(seriesModel.getDataParams(0));\n        } // Using rect symbol defaultly\n\n\n        var legendSymbolType = data.getVisual('legendSymbol') || 'roundRect';\n        var symbolType = data.getVisual('symbol');\n\n        var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode);\n\n        itemGroup.on('click', curry(dispatchSelectAction, name, null, api, excludeSeriesId)).on('mouseover', curry(dispatchHighlightAction, seriesModel.name, null, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, seriesModel.name, null, api, excludeSeriesId));\n        legendDrawnMap.set(name, true);\n      } else {\n        // Legend to control data. In pie and funnel.\n        ecModel.eachRawSeries(function (seriesModel) {\n          // In case multiple series has same data name\n          if (legendDrawnMap.get(name)) {\n            return;\n          }\n\n          if (seriesModel.legendVisualProvider) {\n            var provider = seriesModel.legendVisualProvider;\n\n            if (!provider.containName(name)) {\n              return;\n            }\n\n            var idx = provider.indexOfName(name);\n            var color = provider.getItemVisual(idx, 'color');\n            var borderColor = provider.getItemVisual(idx, 'borderColor');\n            var legendSymbolType = 'roundRect';\n\n            var itemGroup = this._createItem(name, dataIndex, itemModel, legendModel, legendSymbolType, null, itemAlign, color, borderColor, selectMode); // FIXME: consider different series has items with the same name.\n\n\n            itemGroup.on('click', curry(dispatchSelectAction, null, name, api, excludeSeriesId)) // Should not specify the series name, consider legend controls\n            // more than one pie series.\n            .on('mouseover', curry(dispatchHighlightAction, null, name, api, excludeSeriesId)).on('mouseout', curry(dispatchDownplayAction, null, name, api, excludeSeriesId));\n            legendDrawnMap.set(name, true);\n          }\n        }, this);\n      }\n    }, this);\n\n    if (selector) {\n      this._createSelector(selector, legendModel, api, orient, selectorPosition);\n    }\n  },\n  _createSelector: function (selector, legendModel, api, orient, selectorPosition) {\n    var selectorGroup = this.getSelectorGroup();\n    each(selector, function (selectorItem) {\n      createSelectorButton(selectorItem);\n    });\n\n    function createSelectorButton(selectorItem) {\n      var type = selectorItem.type;\n      var labelText = new graphic.Text({\n        style: {\n          x: 0,\n          y: 0,\n          align: 'center',\n          verticalAlign: 'middle'\n        },\n        onclick: function () {\n          api.dispatchAction({\n            type: type === 'all' ? 'legendAllSelect' : 'legendInverseSelect'\n          });\n        }\n      });\n      selectorGroup.add(labelText);\n      var labelModel = legendModel.getModel('selectorLabel');\n      var emphasisLabelModel = legendModel.getModel('emphasis.selectorLabel');\n      graphic.setLabelStyle(labelText.style, labelText.hoverStyle = {}, labelModel, emphasisLabelModel, {\n        defaultText: selectorItem.title,\n        isRectText: false\n      });\n      graphic.setHoverStyle(labelText);\n    }\n  },\n  _createItem: function (name, dataIndex, itemModel, legendModel, legendSymbolType, symbolType, itemAlign, color, borderColor, selectMode) {\n    var itemWidth = legendModel.get('itemWidth');\n    var itemHeight = legendModel.get('itemHeight');\n    var inactiveColor = legendModel.get('inactiveColor');\n    var inactiveBorderColor = legendModel.get('inactiveBorderColor');\n    var symbolKeepAspect = legendModel.get('symbolKeepAspect');\n    var legendModelItemStyle = legendModel.getModel('itemStyle');\n    var isSelected = legendModel.isSelected(name);\n    var itemGroup = new Group();\n    var textStyleModel = itemModel.getModel('textStyle');\n    var itemIcon = itemModel.get('icon');\n    var tooltipModel = itemModel.getModel('tooltip');\n    var legendGlobalTooltipModel = tooltipModel.parentModel; // Use user given icon first\n\n    legendSymbolType = itemIcon || legendSymbolType;\n    var legendSymbol = createSymbol(legendSymbolType, 0, 0, itemWidth, itemHeight, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n    symbolKeepAspect == null ? true : symbolKeepAspect);\n    itemGroup.add(setSymbolStyle(legendSymbol, legendSymbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected)); // Compose symbols\n    // PENDING\n\n    if (!itemIcon && symbolType // At least show one symbol, can't be all none\n    && (symbolType !== legendSymbolType || symbolType === 'none')) {\n      var size = itemHeight * 0.8;\n\n      if (symbolType === 'none') {\n        symbolType = 'circle';\n      }\n\n      var legendSymbolCenter = createSymbol(symbolType, (itemWidth - size) / 2, (itemHeight - size) / 2, size, size, isSelected ? color : inactiveColor, // symbolKeepAspect default true for legend\n      symbolKeepAspect == null ? true : symbolKeepAspect); // Put symbol in the center\n\n      itemGroup.add(setSymbolStyle(legendSymbolCenter, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected));\n    }\n\n    var textX = itemAlign === 'left' ? itemWidth + 5 : -5;\n    var textAlign = itemAlign;\n    var formatter = legendModel.get('formatter');\n    var content = name;\n\n    if (typeof formatter === 'string' && formatter) {\n      content = formatter.replace('{name}', name != null ? name : '');\n    } else if (typeof formatter === 'function') {\n      content = formatter(name);\n    }\n\n    itemGroup.add(new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: content,\n        x: textX,\n        y: itemHeight / 2,\n        textFill: isSelected ? textStyleModel.getTextColor() : inactiveColor,\n        textAlign: textAlign,\n        textVerticalAlign: 'middle'\n      })\n    })); // Add a invisible rect to increase the area of mouse hover\n\n    var hitRect = new graphic.Rect({\n      shape: itemGroup.getBoundingRect(),\n      invisible: true,\n      tooltip: tooltipModel.get('show') ? zrUtil.extend({\n        content: name,\n        // Defaul formatter\n        formatter: legendGlobalTooltipModel.get('formatter', true) || function () {\n          return name;\n        },\n        formatterParams: {\n          componentType: 'legend',\n          legendIndex: legendModel.componentIndex,\n          name: name,\n          $vars: ['name']\n        }\n      }, tooltipModel.option) : null\n    });\n    itemGroup.add(hitRect);\n    itemGroup.eachChild(function (child) {\n      child.silent = true;\n    });\n    hitRect.silent = !selectMode;\n    this.getContentGroup().add(itemGroup);\n    graphic.setHoverStyle(itemGroup);\n    itemGroup.__legendDataIndex = dataIndex;\n    return itemGroup;\n  },\n\n  /**\n   * @protected\n   */\n  layoutInner: function (legendModel, itemAlign, maxSize, isFirstRender, selector, selectorPosition) {\n    var contentGroup = this.getContentGroup();\n    var selectorGroup = this.getSelectorGroup(); // Place items in contentGroup.\n\n    layoutUtil.box(legendModel.get('orient'), contentGroup, legendModel.get('itemGap'), maxSize.width, maxSize.height);\n    var contentRect = contentGroup.getBoundingRect();\n    var contentPos = [-contentRect.x, -contentRect.y];\n\n    if (selector) {\n      // Place buttons in selectorGroup\n      layoutUtil.box( // Buttons in selectorGroup always layout horizontally\n      'horizontal', selectorGroup, legendModel.get('selectorItemGap', true));\n      var selectorRect = selectorGroup.getBoundingRect();\n      var selectorPos = [-selectorRect.x, -selectorRect.y];\n      var selectorButtonGap = legendModel.get('selectorButtonGap', true);\n      var orientIdx = legendModel.getOrient().index;\n      var wh = orientIdx === 0 ? 'width' : 'height';\n      var hw = orientIdx === 0 ? 'height' : 'width';\n      var yx = orientIdx === 0 ? 'y' : 'x';\n\n      if (selectorPosition === 'end') {\n        selectorPos[orientIdx] += contentRect[wh] + selectorButtonGap;\n      } else {\n        contentPos[orientIdx] += selectorRect[wh] + selectorButtonGap;\n      } //Always align selector to content as 'middle'\n\n\n      selectorPos[1 - orientIdx] += contentRect[hw] / 2 - selectorRect[hw] / 2;\n      selectorGroup.attr('position', selectorPos);\n      contentGroup.attr('position', contentPos);\n      var mainRect = {\n        x: 0,\n        y: 0\n      };\n      mainRect[wh] = contentRect[wh] + selectorButtonGap + selectorRect[wh];\n      mainRect[hw] = Math.max(contentRect[hw], selectorRect[hw]);\n      mainRect[yx] = Math.min(0, selectorRect[yx] + selectorPos[1 - orientIdx]);\n      return mainRect;\n    } else {\n      contentGroup.attr('position', contentPos);\n      return this.group.getBoundingRect();\n    }\n  },\n\n  /**\n   * @protected\n   */\n  remove: function () {\n    this.getContentGroup().removeAll();\n    this._isFirstRender = true;\n  }\n});\n\nfunction setSymbolStyle(symbol, symbolType, legendModelItemStyle, borderColor, inactiveBorderColor, isSelected) {\n  var itemStyle;\n\n  if (symbolType !== 'line' && symbolType.indexOf('empty') < 0) {\n    itemStyle = legendModelItemStyle.getItemStyle();\n    symbol.style.stroke = borderColor;\n\n    if (!isSelected) {\n      itemStyle.stroke = inactiveBorderColor;\n    }\n  } else {\n    itemStyle = legendModelItemStyle.getItemStyle(['borderWidth', 'borderColor']);\n  }\n\n  return symbol.setStyle(itemStyle);\n}\n\nfunction dispatchSelectAction(seriesName, dataName, api, excludeSeriesId) {\n  // downplay before unselect\n  dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId);\n  api.dispatchAction({\n    type: 'legendToggleSelect',\n    name: seriesName != null ? seriesName : dataName\n  }); // highlight after select\n\n  dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId);\n}\n\nfunction dispatchHighlightAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'highlight',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nfunction dispatchDownplayAction(seriesName, dataName, api, excludeSeriesId) {\n  // If element hover will move to a hoverLayer.\n  var el = api.getZr().storage.getDisplayList()[0];\n\n  if (!(el && el.useHoverLayer)) {\n    api.dispatchAction({\n      type: 'downplay',\n      seriesName: seriesName,\n      name: dataName,\n      excludeSeriesId: excludeSeriesId\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar echarts = require(\"../echarts\");\n\nvar graphic = require(\"../util/graphic\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Model\necharts.extendComponentModel({\n  type: 'title',\n  layoutMode: {\n    type: 'box',\n    ignoreSize: true\n  },\n  defaultOption: {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 6,\n    show: true,\n    text: '',\n    // 超链接跳转\n    // link: null,\n    // 仅支持self | blank\n    target: 'blank',\n    subtext: '',\n    // 超链接跳转\n    // sublink: null,\n    // 仅支持self | blank\n    subtarget: 'blank',\n    // 'center' ¦ 'left' ¦ 'right'\n    // ¦ {number}（x坐标，单位px）\n    left: 0,\n    // 'top' ¦ 'bottom' ¦ 'center'\n    // ¦ {number}（y坐标，单位px）\n    top: 0,\n    // 水平对齐\n    // 'auto' | 'left' | 'right' | 'center'\n    // 默认根据 left 的位置判断是左对齐还是右对齐\n    // textAlign: null\n    //\n    // 垂直对齐\n    // 'auto' | 'top' | 'bottom' | 'middle'\n    // 默认根据 top 位置判断是上对齐还是下对齐\n    // textVerticalAlign: null\n    // textBaseline: null // The same as textVerticalAlign.\n    backgroundColor: 'rgba(0,0,0,0)',\n    // 标题边框颜色\n    borderColor: '#ccc',\n    // 标题边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 标题内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // 主副标题纵向间隔，单位px，默认为10，\n    itemGap: 10,\n    textStyle: {\n      fontSize: 18,\n      fontWeight: 'bolder',\n      color: '#333'\n    },\n    subtextStyle: {\n      color: '#aaa'\n    }\n  }\n}); // View\n\necharts.extendComponentView({\n  type: 'title',\n  render: function (titleModel, ecModel, api) {\n    this.group.removeAll();\n\n    if (!titleModel.get('show')) {\n      return;\n    }\n\n    var group = this.group;\n    var textStyleModel = titleModel.getModel('textStyle');\n    var subtextStyleModel = titleModel.getModel('subtextStyle');\n    var textAlign = titleModel.get('textAlign');\n    var textVerticalAlign = zrUtil.retrieve2(titleModel.get('textBaseline'), titleModel.get('textVerticalAlign'));\n    var textEl = new graphic.Text({\n      style: graphic.setTextStyle({}, textStyleModel, {\n        text: titleModel.get('text'),\n        textFill: textStyleModel.getTextColor()\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var textRect = textEl.getBoundingRect();\n    var subText = titleModel.get('subtext');\n    var subTextEl = new graphic.Text({\n      style: graphic.setTextStyle({}, subtextStyleModel, {\n        text: subText,\n        textFill: subtextStyleModel.getTextColor(),\n        y: textRect.height + titleModel.get('itemGap'),\n        textVerticalAlign: 'top'\n      }, {\n        disableBox: true\n      }),\n      z2: 10\n    });\n    var link = titleModel.get('link');\n    var sublink = titleModel.get('sublink');\n    var triggerEvent = titleModel.get('triggerEvent', true);\n    textEl.silent = !link && !triggerEvent;\n    subTextEl.silent = !sublink && !triggerEvent;\n\n    if (link) {\n      textEl.on('click', function () {\n        window.open(link, '_' + titleModel.get('target'));\n      });\n    }\n\n    if (sublink) {\n      subTextEl.on('click', function () {\n        window.open(sublink, '_' + titleModel.get('subtarget'));\n      });\n    }\n\n    textEl.eventData = subTextEl.eventData = triggerEvent ? {\n      componentType: 'title',\n      componentIndex: titleModel.componentIndex\n    } : null;\n    group.add(textEl);\n    subText && group.add(subTextEl); // If no subText, but add subTextEl, there will be an empty line.\n\n    var groupRect = group.getBoundingRect();\n    var layoutOption = titleModel.getBoxLayoutParams();\n    layoutOption.width = groupRect.width;\n    layoutOption.height = groupRect.height;\n    var layoutRect = getLayoutRect(layoutOption, {\n      width: api.getWidth(),\n      height: api.getHeight()\n    }, titleModel.get('padding')); // Adjust text align based on position\n\n    if (!textAlign) {\n      // Align left if title is on the left. center and right is same\n      textAlign = titleModel.get('left') || titleModel.get('right');\n\n      if (textAlign === 'middle') {\n        textAlign = 'center';\n      } // Adjust layout by text align\n\n\n      if (textAlign === 'right') {\n        layoutRect.x += layoutRect.width;\n      } else if (textAlign === 'center') {\n        layoutRect.x += layoutRect.width / 2;\n      }\n    }\n\n    if (!textVerticalAlign) {\n      textVerticalAlign = titleModel.get('top') || titleModel.get('bottom');\n\n      if (textVerticalAlign === 'center') {\n        textVerticalAlign = 'middle';\n      }\n\n      if (textVerticalAlign === 'bottom') {\n        layoutRect.y += layoutRect.height;\n      } else if (textVerticalAlign === 'middle') {\n        layoutRect.y += layoutRect.height / 2;\n      }\n\n      textVerticalAlign = textVerticalAlign || 'top';\n    }\n\n    group.attr('position', [layoutRect.x, layoutRect.y]);\n    var alignStyle = {\n      textAlign: textAlign,\n      textVerticalAlign: textVerticalAlign\n    };\n    textEl.setStyle(alignStyle);\n    subTextEl.setStyle(alignStyle); // Render background\n    // Get groupRect again because textAlign has been changed\n\n    groupRect = group.getBoundingRect();\n    var padding = layoutRect.margin;\n    var style = titleModel.getItemStyle(['color', 'opacity']);\n    style.fill = titleModel.get('backgroundColor');\n    var rect = new graphic.Rect({\n      shape: {\n        x: groupRect.x - padding[3],\n        y: groupRect.y - padding[0],\n        width: groupRect.width + padding[1] + padding[3],\n        height: groupRect.height + padding[0] + padding[2],\n        r: titleModel.get('borderRadius')\n      },\n      style: style,\n      subPixelOptimize: true,\n      silent: true\n    });\n    group.add(rect);\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar axisPointerModelHelper = require(\"../axisPointer/modelHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Base class of AxisView.\n */\nvar AxisView = echarts.extendComponentView({\n  type: 'axis',\n\n  /**\n   * @private\n   */\n  _axisPointer: null,\n\n  /**\n   * @protected\n   * @type {string}\n   */\n  axisPointerClass: null,\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    // FIXME\n    // This process should proformed after coordinate systems updated\n    // (axis scale updated), and should be performed each time update.\n    // So put it here temporarily, although it is not appropriate to\n    // put a model-writing procedure in `view`.\n    this.axisPointerClass && axisPointerModelHelper.fixValue(axisModel);\n    AxisView.superApply(this, 'render', arguments);\n    updateAxisPointer(this, axisModel, ecModel, api, payload, true);\n  },\n\n  /**\n   * Action handler.\n   * @public\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/model/Global} ecModel\n   * @param {module:echarts/ExtensionAPI} api\n   * @param {Object} payload\n   */\n  updateAxisPointer: function (axisModel, ecModel, api, payload, force) {\n    updateAxisPointer(this, axisModel, ecModel, api, payload, false);\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    var axisPointer = this._axisPointer;\n    axisPointer && axisPointer.remove(api);\n    AxisView.superApply(this, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    disposeAxisPointer(this, api);\n    AxisView.superApply(this, 'dispose', arguments);\n  }\n});\n\nfunction updateAxisPointer(axisView, axisModel, ecModel, api, payload, forceRender) {\n  var Clazz = AxisView.getAxisPointerClass(axisView.axisPointerClass);\n\n  if (!Clazz) {\n    return;\n  }\n\n  var axisPointerModel = axisPointerModelHelper.getAxisPointerModel(axisModel);\n  axisPointerModel ? (axisView._axisPointer || (axisView._axisPointer = new Clazz())).render(axisModel, axisPointerModel, api, forceRender) : disposeAxisPointer(axisView, api);\n}\n\nfunction disposeAxisPointer(axisView, ecModel, api) {\n  var axisPointer = axisView._axisPointer;\n  axisPointer && axisPointer.dispose(ecModel, api);\n  axisView._axisPointer = null;\n}\n\nvar axisPointerClazz = [];\n\nAxisView.registerAxisPointerClass = function (type, clazz) {\n  axisPointerClazz[type] = clazz;\n};\n\nAxisView.getAxisPointerClass = function (type) {\n  return type && axisPointerClazz[type];\n};\n\nvar _default = AxisView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _config = require(\"../../config\");\n\nvar __DEV__ = _config.__DEV__;\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _helper = require(\"./helper\");\n\nvar setLabel = _helper.setLabel;\n\nvar Model = require(\"../../model/Model\");\n\nvar barItemStyle = require(\"./barItemStyle\");\n\nvar Path = require(\"zrender/lib/graphic/Path\");\n\nvar _throttle = require(\"../../util/throttle\");\n\nvar throttle = _throttle.throttle;\n\nvar _createClipPathFromCoordSys = require(\"../helper/createClipPathFromCoordSys\");\n\nvar createClipPath = _createClipPathFromCoordSys.createClipPath;\n\nvar Sausage = require(\"../../util/shape/sausage\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar BAR_BORDER_WIDTH_QUERY = ['itemStyle', 'barBorderWidth'];\nvar _eventPos = [0, 0]; // FIXME\n// Just for compatible with ec2.\n\nzrUtil.extend(Model.prototype, barItemStyle);\n\nfunction getClipArea(coord, data) {\n  var coordSysClipArea = coord.getArea && coord.getArea();\n\n  if (coord.type === 'cartesian2d') {\n    var baseAxis = coord.getBaseAxis(); // When boundaryGap is false or using time axis. bar may exceed the grid.\n    // We should not clip this part.\n    // See test/bar2.html\n\n    if (baseAxis.type !== 'category' || !baseAxis.onBand) {\n      var expandWidth = data.getLayout('bandWidth');\n\n      if (baseAxis.isHorizontal()) {\n        coordSysClipArea.x -= expandWidth;\n        coordSysClipArea.width += expandWidth * 2;\n      } else {\n        coordSysClipArea.y -= expandWidth;\n        coordSysClipArea.height += expandWidth * 2;\n      }\n    }\n  }\n\n  return coordSysClipArea;\n}\n\nvar _default = echarts.extendChartView({\n  type: 'bar',\n  render: function (seriesModel, ecModel, api) {\n    this._updateDrawMode(seriesModel);\n\n    var coordinateSystemType = seriesModel.get('coordinateSystem');\n\n    if (coordinateSystemType === 'cartesian2d' || coordinateSystemType === 'polar') {\n      this._isLargeDraw ? this._renderLarge(seriesModel, ecModel, api) : this._renderNormal(seriesModel, ecModel, api);\n    } else {}\n\n    return this.group;\n  },\n  incrementalPrepareRender: function (seriesModel, ecModel, api) {\n    this._clear();\n\n    this._updateDrawMode(seriesModel);\n  },\n  incrementalRender: function (params, seriesModel, ecModel, api) {\n    // Do not support progressive in normal mode.\n    this._incrementalRenderLarge(params, seriesModel);\n  },\n  _updateDrawMode: function (seriesModel) {\n    var isLargeDraw = seriesModel.pipelineContext.large;\n\n    if (this._isLargeDraw == null || isLargeDraw ^ this._isLargeDraw) {\n      this._isLargeDraw = isLargeDraw;\n\n      this._clear();\n    }\n  },\n  _renderNormal: function (seriesModel, ecModel, api) {\n    var group = this.group;\n    var data = seriesModel.getData();\n    var oldData = this._data;\n    var coord = seriesModel.coordinateSystem;\n    var baseAxis = coord.getBaseAxis();\n    var isHorizontalOrRadial;\n\n    if (coord.type === 'cartesian2d') {\n      isHorizontalOrRadial = baseAxis.isHorizontal();\n    } else if (coord.type === 'polar') {\n      isHorizontalOrRadial = baseAxis.dim === 'angle';\n    }\n\n    var animationModel = seriesModel.isAnimationEnabled() ? seriesModel : null;\n    var needsClip = seriesModel.get('clip', true);\n    var coordSysClipArea = getClipArea(coord, data); // If there is clipPath created in large mode. Remove it.\n\n    group.removeClipPath(); // We don't use clipPath in normal mode because we needs a perfect animation\n    // And don't want the label are clipped.\n\n    var roundCap = seriesModel.get('roundCap', true);\n    data.diff(oldData).add(function (dataIndex) {\n      if (!data.hasValue(dataIndex)) {\n        return;\n      }\n\n      var itemModel = data.getItemModel(dataIndex);\n      var layout = getLayout[coord.type](data, dataIndex, itemModel);\n\n      if (needsClip) {\n        // Clip will modify the layout params.\n        // And return a boolean to determine if the shape are fully clipped.\n        var isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n          return;\n        }\n      }\n\n      var el = elementCreator[coord.type](dataIndex, layout, isHorizontalOrRadial, animationModel, false, roundCap);\n      data.setItemGraphicEl(dataIndex, el);\n      group.add(el);\n      updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).update(function (newIndex, oldIndex) {\n      var el = oldData.getItemGraphicEl(oldIndex);\n\n      if (!data.hasValue(newIndex)) {\n        group.remove(el);\n        return;\n      }\n\n      var itemModel = data.getItemModel(newIndex);\n      var layout = getLayout[coord.type](data, newIndex, itemModel);\n\n      if (needsClip) {\n        var isClipped = clip[coord.type](coordSysClipArea, layout);\n\n        if (isClipped) {\n          group.remove(el);\n          return;\n        }\n      }\n\n      if (el) {\n        graphic.updateProps(el, {\n          shape: layout\n        }, animationModel, newIndex);\n      } else {\n        el = elementCreator[coord.type](newIndex, layout, isHorizontalOrRadial, animationModel, true, roundCap);\n      }\n\n      data.setItemGraphicEl(newIndex, el); // Add back\n\n      group.add(el);\n      updateStyle(el, data, newIndex, itemModel, layout, seriesModel, isHorizontalOrRadial, coord.type === 'polar');\n    }).remove(function (dataIndex) {\n      var el = oldData.getItemGraphicEl(dataIndex);\n\n      if (coord.type === 'cartesian2d') {\n        el && removeRect(dataIndex, animationModel, el);\n      } else {\n        el && removeSector(dataIndex, animationModel, el);\n      }\n    }).execute();\n    this._data = data;\n  },\n  _renderLarge: function (seriesModel, ecModel, api) {\n    this._clear();\n\n    createLarge(seriesModel, this.group); // Use clipPath in large mode.\n\n    var clipPath = seriesModel.get('clip', true) ? createClipPath(seriesModel.coordinateSystem, false, seriesModel) : null;\n\n    if (clipPath) {\n      this.group.setClipPath(clipPath);\n    } else {\n      this.group.removeClipPath();\n    }\n  },\n  _incrementalRenderLarge: function (params, seriesModel) {\n    createLarge(seriesModel, this.group, true);\n  },\n  dispose: zrUtil.noop,\n  remove: function (ecModel) {\n    this._clear(ecModel);\n  },\n  _clear: function (ecModel) {\n    var group = this.group;\n    var data = this._data;\n\n    if (ecModel && ecModel.get('animation') && data && !this._isLargeDraw) {\n      data.eachItemGraphicEl(function (el) {\n        if (el.type === 'sector') {\n          removeSector(el.dataIndex, ecModel, el);\n        } else {\n          removeRect(el.dataIndex, ecModel, el);\n        }\n      });\n    } else {\n      group.removeAll();\n    }\n\n    this._data = null;\n  }\n});\n\nvar mathMax = Math.max;\nvar mathMin = Math.min;\nvar clip = {\n  cartesian2d: function (coordSysBoundingRect, layout) {\n    var signWidth = layout.width < 0 ? -1 : 1;\n    var signHeight = layout.height < 0 ? -1 : 1; // Needs positive width and height\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    var x = mathMax(layout.x, coordSysBoundingRect.x);\n    var x2 = mathMin(layout.x + layout.width, coordSysBoundingRect.x + coordSysBoundingRect.width);\n    var y = mathMax(layout.y, coordSysBoundingRect.y);\n    var y2 = mathMin(layout.y + layout.height, coordSysBoundingRect.y + coordSysBoundingRect.height);\n    layout.x = x;\n    layout.y = y;\n    layout.width = x2 - x;\n    layout.height = y2 - y;\n    var clipped = layout.width < 0 || layout.height < 0; // Reverse back\n\n    if (signWidth < 0) {\n      layout.x += layout.width;\n      layout.width = -layout.width;\n    }\n\n    if (signHeight < 0) {\n      layout.y += layout.height;\n      layout.height = -layout.height;\n    }\n\n    return clipped;\n  },\n  polar: function (coordSysClipArea) {\n    return false;\n  }\n};\nvar elementCreator = {\n  cartesian2d: function (dataIndex, layout, isHorizontal, animationModel, isUpdate) {\n    var rect = new graphic.Rect({\n      shape: zrUtil.extend({}, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var rectShape = rect.shape;\n      var animateProperty = isHorizontal ? 'height' : 'width';\n      var animateTarget = {};\n      rectShape[animateProperty] = 0;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](rect, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return rect;\n  },\n  polar: function (dataIndex, layout, isRadial, animationModel, isUpdate, roundCap) {\n    // Keep the same logic with bar in catesion: use end value to control\n    // direction. Notice that if clockwise is true (by default), the sector\n    // will always draw clockwisely, no matter whether endAngle is greater\n    // or less than startAngle.\n    var clockwise = layout.startAngle < layout.endAngle;\n    var ShapeClass = !isRadial && roundCap ? Sausage : graphic.Sector;\n    var sector = new ShapeClass({\n      shape: zrUtil.defaults({\n        clockwise: clockwise\n      }, layout)\n    }); // Animation\n\n    if (animationModel) {\n      var sectorShape = sector.shape;\n      var animateProperty = isRadial ? 'r' : 'endAngle';\n      var animateTarget = {};\n      sectorShape[animateProperty] = isRadial ? 0 : layout.startAngle;\n      animateTarget[animateProperty] = layout[animateProperty];\n      graphic[isUpdate ? 'updateProps' : 'initProps'](sector, {\n        shape: animateTarget\n      }, animationModel, dataIndex);\n    }\n\n    return sector;\n  }\n};\n\nfunction removeRect(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      width: 0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nfunction removeSector(dataIndex, animationModel, el) {\n  // Not show text when animating\n  el.style.text = null;\n  graphic.updateProps(el, {\n    shape: {\n      r: el.shape.r0\n    }\n  }, animationModel, dataIndex, function () {\n    el.parent && el.parent.remove(el);\n  });\n}\n\nvar getLayout = {\n  cartesian2d: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    var fixedLineWidth = getLineWidth(itemModel, layout); // fix layout with lineWidth\n\n    var signX = layout.width > 0 ? 1 : -1;\n    var signY = layout.height > 0 ? 1 : -1;\n    return {\n      x: layout.x + signX * fixedLineWidth / 2,\n      y: layout.y + signY * fixedLineWidth / 2,\n      width: layout.width - signX * fixedLineWidth,\n      height: layout.height - signY * fixedLineWidth\n    };\n  },\n  polar: function (data, dataIndex, itemModel) {\n    var layout = data.getItemLayout(dataIndex);\n    return {\n      cx: layout.cx,\n      cy: layout.cy,\n      r0: layout.r0,\n      r: layout.r,\n      startAngle: layout.startAngle,\n      endAngle: layout.endAngle\n    };\n  }\n};\n\nfunction isZeroOnPolar(layout) {\n  return layout.startAngle != null && layout.endAngle != null && layout.startAngle === layout.endAngle;\n}\n\nfunction updateStyle(el, data, dataIndex, itemModel, layout, seriesModel, isHorizontal, isPolar) {\n  var color = data.getItemVisual(dataIndex, 'color');\n  var opacity = data.getItemVisual(dataIndex, 'opacity');\n  var stroke = data.getVisual('borderColor');\n  var itemStyleModel = itemModel.getModel('itemStyle');\n  var hoverStyle = itemModel.getModel('emphasis.itemStyle').getBarItemStyle();\n\n  if (!isPolar) {\n    el.setShape('r', itemStyleModel.get('barBorderRadius') || 0);\n  }\n\n  el.useStyle(zrUtil.defaults({\n    stroke: isZeroOnPolar(layout) ? 'none' : stroke,\n    fill: isZeroOnPolar(layout) ? 'none' : color,\n    opacity: opacity\n  }, itemStyleModel.getBarItemStyle()));\n  var cursorStyle = itemModel.getShallow('cursor');\n  cursorStyle && el.attr('cursor', cursorStyle);\n  var labelPositionOutside = isHorizontal ? layout.height > 0 ? 'bottom' : 'top' : layout.width > 0 ? 'left' : 'right';\n\n  if (!isPolar) {\n    setLabel(el.style, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside);\n  }\n\n  if (isZeroOnPolar(layout)) {\n    hoverStyle.fill = hoverStyle.stroke = 'none';\n  }\n\n  graphic.setHoverStyle(el, hoverStyle);\n} // In case width or height are too small.\n\n\nfunction getLineWidth(itemModel, rawLayout) {\n  var lineWidth = itemModel.get(BAR_BORDER_WIDTH_QUERY) || 0;\n  return Math.min(lineWidth, Math.abs(rawLayout.width), Math.abs(rawLayout.height));\n}\n\nvar LargePath = Path.extend({\n  type: 'largeBar',\n  shape: {\n    points: []\n  },\n  buildPath: function (ctx, shape) {\n    // Drawing lines is more efficient than drawing\n    // a whole line or drawing rects.\n    var points = shape.points;\n    var startPoint = this.__startPoint;\n    var baseDimIdx = this.__baseDimIdx;\n\n    for (var i = 0; i < points.length; i += 2) {\n      startPoint[baseDimIdx] = points[i + baseDimIdx];\n      ctx.moveTo(startPoint[0], startPoint[1]);\n      ctx.lineTo(points[i], points[i + 1]);\n    }\n  }\n});\n\nfunction createLarge(seriesModel, group, incremental) {\n  // TODO support polar\n  var data = seriesModel.getData();\n  var startPoint = [];\n  var baseDimIdx = data.getLayout('valueAxisHorizontal') ? 1 : 0;\n  startPoint[1 - baseDimIdx] = data.getLayout('valueAxisStart');\n  var el = new LargePath({\n    shape: {\n      points: data.getLayout('largePoints')\n    },\n    incremental: !!incremental,\n    __startPoint: startPoint,\n    __baseDimIdx: baseDimIdx,\n    __largeDataIndices: data.getLayout('largeDataIndices'),\n    __barWidth: data.getLayout('barWidth')\n  });\n  group.add(el);\n  setLargeStyle(el, seriesModel, data); // Enable tooltip and user mouse/touch event handlers.\n\n  el.seriesIndex = seriesModel.seriesIndex;\n\n  if (!seriesModel.get('silent')) {\n    el.on('mousedown', largePathUpdateDataIndex);\n    el.on('mousemove', largePathUpdateDataIndex);\n  }\n} // Use throttle to avoid frequently traverse to find dataIndex.\n\n\nvar largePathUpdateDataIndex = throttle(function (event) {\n  var largePath = this;\n  var dataIndex = largePathFindDataIndex(largePath, event.offsetX, event.offsetY);\n  largePath.dataIndex = dataIndex >= 0 ? dataIndex : null;\n}, 30, false);\n\nfunction largePathFindDataIndex(largePath, x, y) {\n  var baseDimIdx = largePath.__baseDimIdx;\n  var valueDimIdx = 1 - baseDimIdx;\n  var points = largePath.shape.points;\n  var largeDataIndices = largePath.__largeDataIndices;\n  var barWidthHalf = Math.abs(largePath.__barWidth / 2);\n  var startValueVal = largePath.__startPoint[valueDimIdx];\n  _eventPos[0] = x;\n  _eventPos[1] = y;\n  var pointerBaseVal = _eventPos[baseDimIdx];\n  var pointerValueVal = _eventPos[1 - baseDimIdx];\n  var baseLowerBound = pointerBaseVal - barWidthHalf;\n  var baseUpperBound = pointerBaseVal + barWidthHalf;\n\n  for (var i = 0, len = points.length / 2; i < len; i++) {\n    var ii = i * 2;\n    var barBaseVal = points[ii + baseDimIdx];\n    var barValueVal = points[ii + valueDimIdx];\n\n    if (barBaseVal >= baseLowerBound && barBaseVal <= baseUpperBound && (startValueVal <= barValueVal ? pointerValueVal >= startValueVal && pointerValueVal <= barValueVal : pointerValueVal >= barValueVal && pointerValueVal <= startValueVal)) {\n      return largeDataIndices[i];\n    }\n  }\n\n  return -1;\n}\n\nfunction setLargeStyle(el, seriesModel, data) {\n  var borderColor = data.getVisual('borderColor') || data.getVisual('color');\n  var itemStyle = seriesModel.getModel('itemStyle').getItemStyle(['color', 'borderColor']);\n  el.useStyle(itemStyle);\n  el.style.fill = null;\n  el.style.stroke = borderColor;\n  el.style.lineWidth = data.getLayout('barWidth');\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Data selectable mixin for chart series.\n * To eanble data select, option of series must have `selectedMode`.\n * And each data item will use `selected` to toggle itself selected status\n */\nvar _default = {\n  /**\n   * @param {Array.<Object>} targetList [{name, value, selected}, ...]\n   *        If targetList is an array, it should like [{name: ..., value: ...}, ...].\n   *        If targetList is a \"List\", it must have coordDim: 'value' dimension and name.\n   */\n  updateSelectedMap: function (targetList) {\n    this._targetList = zrUtil.isArray(targetList) ? targetList.slice() : [];\n    this._selectTargetMap = zrUtil.reduce(targetList || [], function (targetMap, target) {\n      targetMap.set(target.name, target);\n      return targetMap;\n    }, zrUtil.createHashMap());\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  // PENGING If selectedMode is null ?\n  select: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      this._selectTargetMap.each(function (target) {\n        target.selected = false;\n      });\n    }\n\n    target && (target.selected = true);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  unSelect: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name); // var selectedMode = this.get('selectedMode');\n    // selectedMode !== 'single' && target && (target.selected = false);\n\n    target && (target.selected = false);\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  toggleSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n\n    if (target != null) {\n      this[target.selected ? 'unSelect' : 'select'](name, id);\n      return target.selected;\n    }\n  },\n\n  /**\n   * Either name or id should be passed as input here.\n   * If both of them are defined, id is used.\n   *\n   * @param {string|undefined} name name of data\n   * @param {number|undefined} id dataIndex of data\n   */\n  isSelected: function (name, id) {\n    var target = id != null ? this._targetList[id] : this._selectTargetMap.get(name);\n    return target && target.selected;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar defaultOption = {\n  show: true,\n  zlevel: 0,\n  z: 0,\n  // Inverse the axis.\n  inverse: false,\n  // Axis name displayed.\n  name: '',\n  // 'start' | 'middle' | 'end'\n  nameLocation: 'end',\n  // By degree. By defualt auto rotate by nameLocation.\n  nameRotate: null,\n  nameTruncate: {\n    maxWidth: null,\n    ellipsis: '...',\n    placeholder: '.'\n  },\n  // Use global text style by default.\n  nameTextStyle: {},\n  // The gap between axisName and axisLine.\n  nameGap: 15,\n  // Default `false` to support tooltip.\n  silent: false,\n  // Default `false` to avoid legacy user event listener fail.\n  triggerEvent: false,\n  tooltip: {\n    show: false\n  },\n  axisPointer: {},\n  axisLine: {\n    show: true,\n    onZero: true,\n    onZeroAxisIndex: null,\n    lineStyle: {\n      color: '#333',\n      width: 1,\n      type: 'solid'\n    },\n    // The arrow at both ends the the axis.\n    symbol: ['none', 'none'],\n    symbolSize: [10, 15]\n  },\n  axisTick: {\n    show: true,\n    // Whether axisTick is inside the grid or outside the grid.\n    inside: false,\n    // The length of axisTick.\n    length: 5,\n    lineStyle: {\n      width: 1\n    }\n  },\n  axisLabel: {\n    show: true,\n    // Whether axisLabel is inside the grid or outside the grid.\n    inside: false,\n    rotate: 0,\n    // true | false | null/undefined (auto)\n    showMinLabel: null,\n    // true | false | null/undefined (auto)\n    showMaxLabel: null,\n    margin: 8,\n    // formatter: null,\n    fontSize: 12\n  },\n  splitLine: {\n    show: true,\n    lineStyle: {\n      color: ['#ccc'],\n      width: 1,\n      type: 'solid'\n    }\n  },\n  splitArea: {\n    show: false,\n    areaStyle: {\n      color: ['rgba(250,250,250,0.3)', 'rgba(200,200,200,0.3)']\n    }\n  }\n};\nvar axisDefault = {};\naxisDefault.categoryAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For categoryAxis, boolean.\n  boundaryGap: true,\n  // Set false to faster category collection.\n  // Only usefull in the case like: category is\n  // ['2012-01-01', '2012-01-02', ...], where the input\n  // data has been ensured not duplicate and is large data.\n  // null means \"auto\":\n  // if axis.data provided, do not deduplication,\n  // else do deduplication.\n  deduplication: null,\n  // splitArea: {\n  // show: false\n  // },\n  splitLine: {\n    show: false\n  },\n  axisTick: {\n    // If tick is align with label when boundaryGap is true\n    alignWithLabel: false,\n    interval: 'auto'\n  },\n  axisLabel: {\n    interval: 'auto'\n  }\n}, defaultOption);\naxisDefault.valueAxis = zrUtil.merge({\n  // The gap at both ends of the axis. For value axis, [GAP, GAP], where\n  // `GAP` can be an absolute pixel number (like `35`), or percent (like `'30%'`)\n  boundaryGap: [0, 0],\n  // TODO\n  // min/max: [30, datamin, 60] or [20, datamin] or [datamin, 60]\n  // Min value of the axis. can be:\n  // + a number\n  // + 'dataMin': use the min value in data.\n  // + null/undefined: auto decide min value (consider pretty look and boundaryGap).\n  // min: null,\n  // Max value of the axis. can be:\n  // + a number\n  // + 'dataMax': use the max value in data.\n  // + null/undefined: auto decide max value (consider pretty look and boundaryGap).\n  // max: null,\n  // Readonly prop, specifies start value of the range when using data zoom.\n  // rangeStart: null\n  // Readonly prop, specifies end value of the range when using data zoom.\n  // rangeEnd: null\n  // Optional value can be:\n  // + `false`: always include value 0.\n  // + `true`: the extent do not consider value 0.\n  // scale: false,\n  // AxisTick and axisLabel and splitLine are caculated based on splitNumber.\n  splitNumber: 5,\n  // Interval specifies the span of the ticks is mandatorily.\n  // interval: null\n  // Specify min interval when auto calculate tick interval.\n  // minInterval: null\n  // Specify max interval when auto calculate tick interval.\n  // maxInterval: null\n  minorTick: {\n    // Minor tick, not available for cateogry axis.\n    show: false,\n    // Split number of minor ticks. The value should be in range of (0, 100)\n    splitNumber: 5,\n    // Lenght of minor tick\n    length: 3,\n    // Same inside with axisTick\n    // Line style\n    lineStyle: {// Default to be same with axisTick\n    }\n  },\n  minorSplitLine: {\n    show: false,\n    lineStyle: {\n      color: '#eee',\n      width: 1\n    }\n  }\n}, defaultOption);\naxisDefault.timeAxis = zrUtil.defaults({\n  scale: true,\n  min: 'dataMin',\n  max: 'dataMax'\n}, axisDefault.valueAxis);\naxisDefault.logAxis = zrUtil.defaults({\n  scale: true,\n  logBase: 10\n}, axisDefault.valueAxis);\nvar _default = axisDefault;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType, actionInfos) {\n  zrUtil.each(actionInfos, function (actionInfo) {\n    actionInfo.update = 'updateView';\n    /**\n     * @payload\n     * @property {string} seriesName\n     * @property {string} name\n     */\n\n    echarts.registerAction(actionInfo, function (payload, ecModel) {\n      var selected = {};\n      ecModel.eachComponent({\n        mainType: 'series',\n        subType: seriesType,\n        query: payload\n      }, function (seriesModel) {\n        if (seriesModel[actionInfo.method]) {\n          seriesModel[actionInfo.method](payload.name, payload.dataIndex);\n        }\n\n        var data = seriesModel.getData(); // Create selected map\n\n        data.each(function (idx) {\n          var name = data.getName(idx);\n          selected[name] = seriesModel.isSelected(name) || false;\n        });\n      });\n      return {\n        name: payload.name,\n        selected: selected,\n        seriesId: payload.seriesId\n      };\n    });\n  });\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _layout = require(\"../../util/layout\");\n\nvar getLayoutRect = _layout.getLayoutRect;\nvar layoutBox = _layout.box;\nvar positionElement = _layout.positionElement;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Layout list like component.\n * It will box layout each items in group of component and then position the whole group in the viewport\n * @param {module:zrender/group/Group} group\n * @param {module:echarts/model/Component} componentModel\n * @param {module:echarts/ExtensionAPI}\n */\nfunction layout(group, componentModel, api) {\n  var boxLayoutParams = componentModel.getBoxLayoutParams();\n  var padding = componentModel.get('padding');\n  var viewportSize = {\n    width: api.getWidth(),\n    height: api.getHeight()\n  };\n  var rect = getLayoutRect(boxLayoutParams, viewportSize, padding);\n  layoutBox(componentModel.get('orient'), group, componentModel.get('itemGap'), rect.width, rect.height);\n  positionElement(group, boxLayoutParams, viewportSize, padding);\n}\n\nfunction makeBackground(rect, componentModel) {\n  var padding = formatUtil.normalizeCssArray(componentModel.get('padding'));\n  var style = componentModel.getItemStyle(['color', 'opacity']);\n  style.fill = componentModel.get('backgroundColor');\n  var rect = new graphic.Rect({\n    shape: {\n      x: rect.x - padding[3],\n      y: rect.y - padding[0],\n      width: rect.width + padding[1] + padding[3],\n      height: rect.height + padding[0] + padding[2],\n      r: componentModel.get('borderRadius')\n    },\n    style: style,\n    silent: true,\n    z2: -1\n  }); // FIXME\n  // `subPixelOptimizeRect` may bring some gap between edge of viewpart\n  // and background rect when setting like `left: 0`, `top: 0`.\n  // graphic.subPixelOptimizeRect(rect);\n\n  return rect;\n}\n\nexports.layout = layout;\nexports.makeBackground = makeBackground;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Text = require(\"zrender/lib/graphic/Text\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// import Group from 'zrender/src/container/Group';\n\n/**\n * @alias module:echarts/component/tooltip/TooltipRichContent\n * @constructor\n */\nfunction TooltipRichContent(api) {\n  this._zr = api.getZr();\n  this._show = false;\n  /**\n   * @private\n   */\n\n  this._hideTimeout;\n}\n\nTooltipRichContent.prototype = {\n  constructor: TooltipRichContent,\n\n  /**\n   * @private\n   * @type {boolean}\n   */\n  _enterable: true,\n\n  /**\n   * Update when tooltip is rendered\n   */\n  update: function () {// noop\n  },\n  show: function (tooltipModel) {\n    if (this._hideTimeout) {\n      clearTimeout(this._hideTimeout);\n    }\n\n    this.el.attr('show', true);\n    this._show = true;\n  },\n\n  /**\n   * Set tooltip content\n   *\n   * @param {string} content rich text string of content\n   * @param {Object} markerRich rich text style\n   * @param {Object} tooltipModel tooltip model\n   */\n  setContent: function (content, markerRich, tooltipModel) {\n    if (this.el) {\n      this._zr.remove(this.el);\n    }\n\n    var markers = {};\n    var text = content;\n    var prefix = '{marker';\n    var suffix = '|}';\n    var startId = text.indexOf(prefix);\n\n    while (startId >= 0) {\n      var endId = text.indexOf(suffix);\n      var name = text.substr(startId + prefix.length, endId - startId - prefix.length);\n\n      if (name.indexOf('sub') > -1) {\n        markers['marker' + name] = {\n          textWidth: 4,\n          textHeight: 4,\n          textBorderRadius: 2,\n          textBackgroundColor: markerRich[name],\n          // TODO: textOffset is not implemented for rich text\n          textOffset: [3, 0]\n        };\n      } else {\n        markers['marker' + name] = {\n          textWidth: 10,\n          textHeight: 10,\n          textBorderRadius: 5,\n          textBackgroundColor: markerRich[name]\n        };\n      }\n\n      text = text.substr(endId + 1);\n      startId = text.indexOf('{marker');\n    }\n\n    this.el = new Text({\n      style: {\n        rich: markers,\n        text: content,\n        textLineHeight: 20,\n        textBackgroundColor: tooltipModel.get('backgroundColor'),\n        textBorderRadius: tooltipModel.get('borderRadius'),\n        textFill: tooltipModel.get('textStyle.color'),\n        textPadding: tooltipModel.get('padding')\n      },\n      z: tooltipModel.get('z')\n    });\n\n    this._zr.add(this.el);\n\n    var self = this;\n    this.el.on('mouseover', function () {\n      // clear the timeout in hideLater and keep showing tooltip\n      if (self._enterable) {\n        clearTimeout(self._hideTimeout);\n        self._show = true;\n      }\n\n      self._inContent = true;\n    });\n    this.el.on('mouseout', function () {\n      if (self._enterable) {\n        if (self._show) {\n          self.hideLater(self._hideDelay);\n        }\n      }\n\n      self._inContent = false;\n    });\n  },\n  setEnterable: function (enterable) {\n    this._enterable = enterable;\n  },\n  getSize: function () {\n    var bounding = this.el.getBoundingRect();\n    return [bounding.width, bounding.height];\n  },\n  moveTo: function (x, y) {\n    if (this.el) {\n      this.el.attr('position', [x, y]);\n    }\n  },\n  hide: function () {\n    if (this.el) {\n      this.el.hide();\n    }\n\n    this._show = false;\n  },\n  hideLater: function (time) {\n    if (this._show && !(this._inContent && this._enterable)) {\n      if (time) {\n        this._hideDelay = time; // Set show false to avoid invoke hideLater mutiple times\n\n        this._show = false;\n        this._hideTimeout = setTimeout(zrUtil.bind(this.hide, this), time);\n      } else {\n        this.hide();\n      }\n    }\n  },\n  isShow: function () {\n    return this._show;\n  },\n  getOuterSize: function () {\n    var size = this.getSize();\n    return {\n      width: size[0],\n      height: size[1]\n    };\n  }\n};\nvar _default = TooltipRichContent;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _model = require(\"../../util/model\");\n\nvar isNameSpecified = _model.isNameSpecified;\n\nvar lang = require(\"../../lang\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar langSelector = lang.legend.selector;\nvar defaultSelectorOption = {\n  all: {\n    type: 'all',\n    title: zrUtil.clone(langSelector.all)\n  },\n  inverse: {\n    type: 'inverse',\n    title: zrUtil.clone(langSelector.inverse)\n  }\n};\nvar LegendModel = echarts.extendComponentModel({\n  type: 'legend.plain',\n  dependencies: ['series'],\n  layoutMode: {\n    type: 'box',\n    // legend.width/height are maxWidth/maxHeight actually,\n    // whereas realy width/height is calculated by its content.\n    // (Setting {left: 10, right: 10} does not make sense).\n    // So consider the case:\n    // `setOption({legend: {left: 10});`\n    // then `setOption({legend: {right: 10});`\n    // The previous `left` should be cleared by setting `ignoreSize`.\n    ignoreSize: true\n  },\n  init: function (option, parentModel, ecModel) {\n    this.mergeDefaultAndTheme(option, ecModel);\n    option.selected = option.selected || {};\n\n    this._updateSelector(option);\n  },\n  mergeOption: function (option) {\n    LegendModel.superCall(this, 'mergeOption', option);\n\n    this._updateSelector(option);\n  },\n  _updateSelector: function (option) {\n    var selector = option.selector;\n\n    if (selector === true) {\n      selector = option.selector = ['all', 'inverse'];\n    }\n\n    if (zrUtil.isArray(selector)) {\n      zrUtil.each(selector, function (item, index) {\n        zrUtil.isString(item) && (item = {\n          type: item\n        });\n        selector[index] = zrUtil.merge(item, defaultSelectorOption[item.type]);\n      });\n    }\n  },\n  optionUpdated: function () {\n    this._updateData(this.ecModel);\n\n    var legendData = this._data; // If selectedMode is single, try to select one\n\n    if (legendData[0] && this.get('selectedMode') === 'single') {\n      var hasSelected = false; // If has any selected in option.selected\n\n      for (var i = 0; i < legendData.length; i++) {\n        var name = legendData[i].get('name');\n\n        if (this.isSelected(name)) {\n          // Force to unselect others\n          this.select(name);\n          hasSelected = true;\n          break;\n        }\n      } // Try select the first if selectedMode is single\n\n\n      !hasSelected && this.select(legendData[0].get('name'));\n    }\n  },\n  _updateData: function (ecModel) {\n    var potentialData = [];\n    var availableNames = [];\n    ecModel.eachRawSeries(function (seriesModel) {\n      var seriesName = seriesModel.name;\n      availableNames.push(seriesName);\n      var isPotential;\n\n      if (seriesModel.legendVisualProvider) {\n        var provider = seriesModel.legendVisualProvider;\n        var names = provider.getAllNames();\n\n        if (!ecModel.isSeriesFiltered(seriesModel)) {\n          availableNames = availableNames.concat(names);\n        }\n\n        if (names.length) {\n          potentialData = potentialData.concat(names);\n        } else {\n          isPotential = true;\n        }\n      } else {\n        isPotential = true;\n      }\n\n      if (isPotential && isNameSpecified(seriesModel)) {\n        potentialData.push(seriesModel.name);\n      }\n    });\n    /**\n     * @type {Array.<string>}\n     * @private\n     */\n\n    this._availableNames = availableNames; // If legend.data not specified in option, use availableNames as data,\n    // which is convinient for user preparing option.\n\n    var rawData = this.get('data') || potentialData;\n    var legendData = zrUtil.map(rawData, function (dataItem) {\n      // Can be string or number\n      if (typeof dataItem === 'string' || typeof dataItem === 'number') {\n        dataItem = {\n          name: dataItem\n        };\n      }\n\n      return new Model(dataItem, this, this.ecModel);\n    }, this);\n    /**\n     * @type {Array.<module:echarts/model/Model>}\n     * @private\n     */\n\n    this._data = legendData;\n  },\n\n  /**\n   * @return {Array.<module:echarts/model/Model>}\n   */\n  getData: function () {\n    return this._data;\n  },\n\n  /**\n   * @param {string} name\n   */\n  select: function (name) {\n    var selected = this.option.selected;\n    var selectedMode = this.get('selectedMode');\n\n    if (selectedMode === 'single') {\n      var data = this._data;\n      zrUtil.each(data, function (dataItem) {\n        selected[dataItem.get('name')] = false;\n      });\n    }\n\n    selected[name] = true;\n  },\n\n  /**\n   * @param {string} name\n   */\n  unSelect: function (name) {\n    if (this.get('selectedMode') !== 'single') {\n      this.option.selected[name] = false;\n    }\n  },\n\n  /**\n   * @param {string} name\n   */\n  toggleSelected: function (name) {\n    var selected = this.option.selected; // Default is true\n\n    if (!selected.hasOwnProperty(name)) {\n      selected[name] = true;\n    }\n\n    this[selected[name] ? 'unSelect' : 'select'](name);\n  },\n  allSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      selected[dataItem.get('name', true)] = true;\n    });\n  },\n  inverseSelect: function () {\n    var data = this._data;\n    var selected = this.option.selected;\n    zrUtil.each(data, function (dataItem) {\n      var name = dataItem.get('name', true); // Initially, default value is true\n\n      if (!selected.hasOwnProperty(name)) {\n        selected[name] = true;\n      }\n\n      selected[name] = !selected[name];\n    });\n  },\n\n  /**\n   * @param {string} name\n   */\n  isSelected: function (name) {\n    var selected = this.option.selected;\n    return !(selected.hasOwnProperty(name) && !selected[name]) && zrUtil.indexOf(this._availableNames, name) >= 0;\n  },\n  getOrient: function () {\n    return this.get('orient') === 'vertical' ? {\n      index: 1,\n      name: 'vertical'\n    } : {\n      index: 0,\n      name: 'horizontal'\n    };\n  },\n  defaultOption: {\n    // 一级层叠\n    zlevel: 0,\n    // 二级层叠\n    z: 4,\n    show: true,\n    // 布局方式，默认为水平布局，可选为：\n    // 'horizontal' | 'vertical'\n    orient: 'horizontal',\n    left: 'center',\n    // right: 'center',\n    top: 0,\n    // bottom: null,\n    // 水平对齐\n    // 'auto' | 'left' | 'right'\n    // 默认为 'auto', 根据 x 的位置判断是左对齐还是右对齐\n    align: 'auto',\n    backgroundColor: 'rgba(0,0,0,0)',\n    // 图例边框颜色\n    borderColor: '#ccc',\n    borderRadius: 0,\n    // 图例边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 图例内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // 各个item之间的间隔，单位px，默认为10，\n    // 横向布局时为水平间隔，纵向布局时为纵向间隔\n    itemGap: 10,\n    // the width of legend symbol\n    itemWidth: 25,\n    // the height of legend symbol\n    itemHeight: 14,\n    // the color of unselected legend symbol\n    inactiveColor: '#ccc',\n    // the borderColor of unselected legend symbol\n    inactiveBorderColor: '#ccc',\n    itemStyle: {\n      // the default borderWidth of legend symbol\n      borderWidth: 0\n    },\n    textStyle: {\n      // 图例文字颜色\n      color: '#333'\n    },\n    // formatter: '',\n    // 选择模式，默认开启图例开关\n    selectedMode: true,\n    // 配置默认选中状态，可配合LEGEND.SELECTED事件做动态数据载入\n    // selected: null,\n    // 图例内容（详见legend.data，数组中每一项代表一个item\n    // data: [],\n    // Usage:\n    // selector: [{type: 'all or inverse', title: xxx}]\n    // or\n    // selector: true\n    // or\n    // selector: ['all', 'inverse']\n    selector: false,\n    selectorLabel: {\n      show: true,\n      borderRadius: 10,\n      padding: [3, 5, 3, 5],\n      fontSize: 12,\n      fontFamily: ' sans-serif',\n      color: '#666',\n      borderWidth: 1,\n      borderColor: '#666'\n    },\n    emphasis: {\n      selectorLabel: {\n        show: true,\n        color: '#eee',\n        backgroundColor: '#666'\n      }\n    },\n    // Value can be 'start' or 'end'\n    selectorPosition: 'auto',\n    selectorItemGap: 7,\n    selectorButtonGap: 10,\n    // Tooltip 相关配置\n    tooltip: {\n      show: false\n    }\n  }\n});\nvar _default = LegendModel;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"./AxisModel\");\n\nvar ComponentModel = require(\"../../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Grid 是在有直角坐标系的时候必须要存在的\n// 所以这里也要被 Cartesian2D 依赖\nvar _default = ComponentModel.extend({\n  type: 'grid',\n  dependencies: ['xAxis', 'yAxis'],\n  layoutMode: 'box',\n\n  /**\n   * @type {module:echarts/coord/cartesian/Grid}\n   */\n  coordinateSystem: null,\n  defaultOption: {\n    show: false,\n    zlevel: 0,\n    z: 0,\n    left: '10%',\n    top: 60,\n    right: '10%',\n    bottom: 60,\n    // If grid size contain label\n    containLabel: false,\n    // width: {totalWidth} - left - right,\n    // height: {totalHeight} - top - bottom,\n    backgroundColor: 'rgba(0,0,0,0)',\n    borderWidth: 1,\n    borderColor: '#ccc'\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(ecModel) {\n  var legendModels = ecModel.findComponents({\n    mainType: 'legend'\n  });\n\n  if (legendModels && legendModels.length) {\n    ecModel.filterSeries(function (series) {\n      // If in any legend component the status is not selected.\n      // Because in legend series is assumed selected when it is not in the legend data.\n      for (var i = 0; i < legendModels.length; i++) {\n        if (!legendModels[i].isSelected(series.name)) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _barGrid = require(\"../layout/barGrid\");\n\nvar layout = _barGrid.layout;\nvar largeLayout = _barGrid.largeLayout;\n\nrequire(\"../coord/cartesian/Grid\");\n\nrequire(\"./bar/BarSeries\");\n\nrequire(\"./bar/BarView\");\n\nrequire(\"../component/gridSimple\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// In case developer forget to include grid component\necharts.registerLayout(echarts.PRIORITY.VISUAL.LAYOUT, zrUtil.curry(layout, 'bar')); // Use higher prority to avoid to be blocked by other overall layout, which do not\n// only exist in this module, but probably also exist in other modules, like `barPolar`.\n\necharts.registerLayout(echarts.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT, largeLayout);\necharts.registerVisual({\n  seriesType: 'bar',\n  reset: function (seriesModel) {\n    // Visual coding for legend\n    seriesModel.getData().setVisual('legendSymbol', 'roundRect');\n  }\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar createHashMap = _util.createHashMap;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Pick color from palette for each data item.\n// Applicable for charts that require applying color palette\n// in data level (like pie, funnel, chord).\nfunction _default(seriesType) {\n  return {\n    getTargetSeries: function (ecModel) {\n      // Pie and funnel may use diferrent scope\n      var paletteScope = {};\n      var seiresModelMap = createHashMap();\n      ecModel.eachSeriesByType(seriesType, function (seriesModel) {\n        seriesModel.__paletteScope = paletteScope;\n        seiresModelMap.set(seriesModel.uid, seriesModel);\n      });\n      return seiresModelMap;\n    },\n    reset: function (seriesModel, ecModel) {\n      var dataAll = seriesModel.getRawData();\n      var idxMap = {};\n      var data = seriesModel.getData();\n      data.each(function (idx) {\n        var rawIdx = data.getRawIndex(idx);\n        idxMap[rawIdx] = idx;\n      });\n      dataAll.each(function (rawIdx) {\n        var filteredIdx = idxMap[rawIdx]; // If series.itemStyle.normal.color is a function. itemVisual may be encoded\n\n        var singleDataColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'color', true);\n        var singleDataBorderColor = filteredIdx != null && data.getItemVisual(filteredIdx, 'borderColor', true);\n        var itemModel;\n\n        if (!singleDataColor || !singleDataBorderColor) {\n          // FIXME Performance\n          itemModel = dataAll.getItemModel(rawIdx);\n        }\n\n        if (!singleDataColor) {\n          var color = itemModel.get('itemStyle.color') || seriesModel.getColorFromPalette(dataAll.getName(rawIdx) || rawIdx + '', seriesModel.__paletteScope, dataAll.count()); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'color', color);\n          }\n        }\n\n        if (!singleDataBorderColor) {\n          var borderColor = itemModel.get('itemStyle.borderColor'); // Data is not filtered\n\n          if (filteredIdx != null) {\n            data.setItemVisual(filteredIdx, 'borderColor', borderColor);\n          }\n        }\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisDefault = require(\"./axisDefault\");\n\nvar ComponentModel = require(\"../model/Component\");\n\nvar _layout = require(\"../util/layout\");\n\nvar getLayoutParams = _layout.getLayoutParams;\nvar mergeLayoutParam = _layout.mergeLayoutParam;\n\nvar OrdinalMeta = require(\"../data/OrdinalMeta\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME axisType is fixed ?\nvar AXIS_TYPES = ['value', 'category', 'time', 'log'];\n/**\n * Generate sub axis model class\n * @param {string} axisName 'x' 'y' 'radius' 'angle' 'parallel'\n * @param {module:echarts/model/Component} BaseAxisModelClass\n * @param {Function} axisTypeDefaulter\n * @param {Object} [extraDefaultOption]\n */\n\nfunction _default(axisName, BaseAxisModelClass, axisTypeDefaulter, extraDefaultOption) {\n  zrUtil.each(AXIS_TYPES, function (axisType) {\n    BaseAxisModelClass.extend({\n      /**\n       * @readOnly\n       */\n      type: axisName + 'Axis.' + axisType,\n      mergeDefaultAndTheme: function (option, ecModel) {\n        var layoutMode = this.layoutMode;\n        var inputPositionParams = layoutMode ? getLayoutParams(option) : {};\n        var themeModel = ecModel.getTheme();\n        zrUtil.merge(option, themeModel.get(axisType + 'Axis'));\n        zrUtil.merge(option, this.getDefaultOption());\n        option.type = axisTypeDefaulter(axisName, option);\n\n        if (layoutMode) {\n          mergeLayoutParam(option, inputPositionParams, layoutMode);\n        }\n      },\n\n      /**\n       * @override\n       */\n      optionUpdated: function () {\n        var thisOption = this.option;\n\n        if (thisOption.type === 'category') {\n          this.__ordinalMeta = OrdinalMeta.createByAxisModel(this);\n        }\n      },\n\n      /**\n       * Should not be called before all of 'getInitailData' finished.\n       * Because categories are collected during initializing data.\n       */\n      getCategories: function (rawData) {\n        var option = this.option; // FIXME\n        // warning if called before all of 'getInitailData' finished.\n\n        if (option.type === 'category') {\n          if (rawData) {\n            return option.data;\n          }\n\n          return this.__ordinalMeta.categories;\n        }\n      },\n      getOrdinalMeta: function () {\n        return this.__ordinalMeta;\n      },\n      defaultOption: zrUtil.mergeAll([{}, axisDefault[axisType + 'Axis'], extraDefaultOption], true)\n    });\n  });\n  ComponentModel.registerSubTypeDefaulter(axisName + 'Axis', zrUtil.curry(axisTypeDefaulter, axisName));\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _default = echarts.extendComponentModel({\n  type: 'tooltip',\n  dependencies: ['axisPointer'],\n  defaultOption: {\n    zlevel: 0,\n    z: 60,\n    show: true,\n    // tooltip主体内容\n    showContent: true,\n    // 'trigger' only works on coordinate system.\n    // 'item' | 'axis' | 'none'\n    trigger: 'item',\n    // 'click' | 'mousemove' | 'none'\n    triggerOn: 'mousemove|click',\n    alwaysShowContent: false,\n    displayMode: 'single',\n    // 'single' | 'multipleByCoordSys'\n    renderMode: 'auto',\n    // 'auto' | 'html' | 'richText'\n    // 'auto': use html by default, and use non-html if `document` is not defined\n    // 'html': use html for tooltip\n    // 'richText': use canvas, svg, and etc. for tooltip\n    // 位置 {Array} | {Function}\n    // position: null\n    // Consider triggered from axisPointer handle, verticalAlign should be 'middle'\n    // align: null,\n    // verticalAlign: null,\n    // 是否约束 content 在 viewRect 中。默认 false 是为了兼容以前版本。\n    confine: false,\n    // 内容格式器：{string}（Template） ¦ {Function}\n    // formatter: null\n    showDelay: 0,\n    // 隐藏延迟，单位ms\n    hideDelay: 100,\n    // 动画变换时间，单位s\n    transitionDuration: 0.4,\n    enterable: false,\n    // 提示背景颜色，默认为透明度为0.7的黑色\n    backgroundColor: 'rgba(50,50,50,0.7)',\n    // 提示边框颜色\n    borderColor: '#333',\n    // 提示边框圆角，单位px，默认为4\n    borderRadius: 4,\n    // 提示边框线宽，单位px，默认为0（无边框）\n    borderWidth: 0,\n    // 提示内边距，单位px，默认各方向内边距为5，\n    // 接受数组分别设定上右下左边距，同css\n    padding: 5,\n    // Extra css text\n    extraCssText: '',\n    // 坐标轴指示器，坐标轴触发有效\n    axisPointer: {\n      // 默认为直线\n      // 可选为：'line' | 'shadow' | 'cross'\n      type: 'line',\n      // type 为 line 的时候有效，指定 tooltip line 所在的轴，可选\n      // 可选 'x' | 'y' | 'angle' | 'radius' | 'auto'\n      // 默认 'auto'，会选择类型为 category 的轴，对于双数值轴，笛卡尔坐标系会默认选择 x 轴\n      // 极坐标系会默认选择 angle 轴\n      axis: 'auto',\n      animation: 'auto',\n      animationDurationUpdate: 200,\n      animationEasingUpdate: 'exponentialOut',\n      crossStyle: {\n        color: '#999',\n        width: 1,\n        type: 'dashed',\n        // TODO formatter\n        textStyle: {} // lineStyle and shadowStyle should not be specified here,\n        // otherwise it will always override those styles on option.axisPointer.\n\n      }\n    },\n    textStyle: {\n      color: '#fff',\n      fontSize: 14\n    }\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nrequire(\"../coord/cartesian/AxisModel\");\n\nrequire(\"./axis/CartesianAxisView\");","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _number = require(\"../../util/number\");\n\nvar round = _number.round;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction createGridClipPath(cartesian, hasAnimation, seriesModel) {\n  var rect = cartesian.getArea();\n  var isHorizontal = cartesian.getBaseAxis().isHorizontal();\n  var x = rect.x;\n  var y = rect.y;\n  var width = rect.width;\n  var height = rect.height;\n  var lineWidth = seriesModel.get('lineStyle.width') || 2; // Expand the clip path a bit to avoid the border is clipped and looks thinner\n\n  x -= lineWidth / 2;\n  y -= lineWidth / 2;\n  width += lineWidth;\n  height += lineWidth;\n  var clipPath = new graphic.Rect({\n    shape: {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape[isHorizontal ? 'width' : 'height'] = 0;\n    graphic.initProps(clipPath, {\n      shape: {\n        width: width,\n        height: height\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createPolarClipPath(polar, hasAnimation, seriesModel) {\n  var sectorArea = polar.getArea(); // Avoid float number rounding error for symbol on the edge of axis extent.\n\n  var clipPath = new graphic.Sector({\n    shape: {\n      cx: round(polar.cx, 1),\n      cy: round(polar.cy, 1),\n      r0: round(sectorArea.r0, 1),\n      r: round(sectorArea.r, 1),\n      startAngle: sectorArea.startAngle,\n      endAngle: sectorArea.endAngle,\n      clockwise: sectorArea.clockwise\n    }\n  });\n\n  if (hasAnimation) {\n    clipPath.shape.endAngle = sectorArea.startAngle;\n    graphic.initProps(clipPath, {\n      shape: {\n        endAngle: sectorArea.endAngle\n      }\n    }, seriesModel);\n  }\n\n  return clipPath;\n}\n\nfunction createClipPath(coordSys, hasAnimation, seriesModel) {\n  if (!coordSys) {\n    return null;\n  } else if (coordSys.type === 'polar') {\n    return createPolarClipPath(coordSys, hasAnimation, seriesModel);\n  } else if (coordSys.type === 'cartesian2d') {\n    return createGridClipPath(coordSys, hasAnimation, seriesModel);\n  }\n\n  return null;\n}\n\nexports.createGridClipPath = createGridClipPath;\nexports.createPolarClipPath = createPolarClipPath;\nexports.createClipPath = createClipPath;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar makeStyleMapper = require(\"../../model/mixin/makeStyleMapper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar getBarItemStyle = makeStyleMapper([['fill', 'color'], ['stroke', 'borderColor'], ['lineWidth', 'borderWidth'], // Compatitable with 2\n['stroke', 'barBorderColor'], ['lineWidth', 'barBorderWidth'], ['opacity'], ['shadowBlur'], ['shadowOffsetX'], ['shadowOffsetY'], ['shadowColor']]);\nvar _default = {\n  getBarItemStyle: function (excludes) {\n    var style = getBarItemStyle(this, excludes);\n\n    if (this.getBorderLineDash) {\n      var lineDash = this.getBorderLineDash();\n      lineDash && (style.lineDash = lineDash);\n    }\n\n    return style;\n  }\n};\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar _number = require(\"../../util/number\");\n\nvar parsePercent = _number.parsePercent;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// FIXME emphasis label position is not same with normal label position\nvar RADIAN = Math.PI / 180;\n\nfunction adjustSingleSide(list, cx, cy, r, dir, viewWidth, viewHeight, viewLeft, viewTop, farthestX) {\n  list.sort(function (a, b) {\n    return a.y - b.y;\n  });\n\n  function shiftDown(start, end, delta, dir) {\n    for (var j = start; j < end; j++) {\n      if (list[j].y + delta > viewTop + viewHeight) {\n        break;\n      }\n\n      list[j].y += delta;\n\n      if (j > start && j + 1 < end && list[j + 1].y > list[j].y + list[j].height) {\n        shiftUp(j, delta / 2);\n        return;\n      }\n    }\n\n    shiftUp(end - 1, delta / 2);\n  }\n\n  function shiftUp(end, delta) {\n    for (var j = end; j >= 0; j--) {\n      if (list[j].y - delta < viewTop) {\n        break;\n      }\n\n      list[j].y -= delta;\n\n      if (j > 0 && list[j].y > list[j - 1].y + list[j - 1].height) {\n        break;\n      }\n    }\n  }\n\n  function changeX(list, isDownList, cx, cy, r, dir) {\n    var lastDeltaX = dir > 0 ? isDownList // right-side\n    ? Number.MAX_VALUE // down\n    : 0 // up\n    : isDownList // left-side\n    ? Number.MAX_VALUE // down\n    : 0; // up\n\n    for (var i = 0, l = list.length; i < l; i++) {\n      if (list[i].labelAlignTo !== 'none') {\n        continue;\n      }\n\n      var deltaY = Math.abs(list[i].y - cy);\n      var length = list[i].len;\n      var length2 = list[i].len2;\n      var deltaX = deltaY < r + length ? Math.sqrt((r + length + length2) * (r + length + length2) - deltaY * deltaY) : Math.abs(list[i].x - cx);\n\n      if (isDownList && deltaX >= lastDeltaX) {\n        // right-down, left-down\n        deltaX = lastDeltaX - 10;\n      }\n\n      if (!isDownList && deltaX <= lastDeltaX) {\n        // right-up, left-up\n        deltaX = lastDeltaX + 10;\n      }\n\n      list[i].x = cx + deltaX * dir;\n      lastDeltaX = deltaX;\n    }\n  }\n\n  var lastY = 0;\n  var delta;\n  var len = list.length;\n  var upList = [];\n  var downList = [];\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].position === 'outer' && list[i].labelAlignTo === 'labelLine') {\n      var dx = list[i].x - farthestX;\n      list[i].linePoints[1][0] += dx;\n      list[i].x = farthestX;\n    }\n\n    delta = list[i].y - lastY;\n\n    if (delta < 0) {\n      shiftDown(i, len, -delta, dir);\n    }\n\n    lastY = list[i].y + list[i].height;\n  }\n\n  if (viewHeight - lastY < 0) {\n    shiftUp(len - 1, lastY - viewHeight);\n  }\n\n  for (var i = 0; i < len; i++) {\n    if (list[i].y >= cy) {\n      downList.push(list[i]);\n    } else {\n      upList.push(list[i]);\n    }\n  }\n\n  changeX(upList, false, cx, cy, r, dir);\n  changeX(downList, true, cx, cy, r, dir);\n}\n\nfunction avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var leftList = [];\n  var rightList = [];\n  var leftmostX = Number.MAX_VALUE;\n  var rightmostX = -Number.MAX_VALUE;\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    if (isPositionCenter(labelLayoutList[i])) {\n      continue;\n    }\n\n    if (labelLayoutList[i].x < cx) {\n      leftmostX = Math.min(leftmostX, labelLayoutList[i].x);\n      leftList.push(labelLayoutList[i]);\n    } else {\n      rightmostX = Math.max(rightmostX, labelLayoutList[i].x);\n      rightList.push(labelLayoutList[i]);\n    }\n  }\n\n  adjustSingleSide(rightList, cx, cy, r, 1, viewWidth, viewHeight, viewLeft, viewTop, rightmostX);\n  adjustSingleSide(leftList, cx, cy, r, -1, viewWidth, viewHeight, viewLeft, viewTop, leftmostX);\n\n  for (var i = 0; i < labelLayoutList.length; i++) {\n    var layout = labelLayoutList[i];\n\n    if (isPositionCenter(layout)) {\n      continue;\n    }\n\n    var linePoints = layout.linePoints;\n\n    if (linePoints) {\n      var isAlignToEdge = layout.labelAlignTo === 'edge';\n      var realTextWidth = layout.textRect.width;\n      var targetTextWidth;\n\n      if (isAlignToEdge) {\n        if (layout.x < cx) {\n          targetTextWidth = linePoints[2][0] - layout.labelDistance - viewLeft - layout.labelMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.labelMargin - linePoints[2][0] - layout.labelDistance;\n        }\n      } else {\n        if (layout.x < cx) {\n          targetTextWidth = layout.x - viewLeft - layout.bleedMargin;\n        } else {\n          targetTextWidth = viewLeft + viewWidth - layout.x - layout.bleedMargin;\n        }\n      }\n\n      if (targetTextWidth < layout.textRect.width) {\n        layout.text = textContain.truncateText(layout.text, targetTextWidth, layout.font);\n\n        if (layout.labelAlignTo === 'edge') {\n          realTextWidth = textContain.getWidth(layout.text, layout.font);\n        }\n      }\n\n      var dist = linePoints[1][0] - linePoints[2][0];\n\n      if (isAlignToEdge) {\n        if (layout.x < cx) {\n          linePoints[2][0] = viewLeft + layout.labelMargin + realTextWidth + layout.labelDistance;\n        } else {\n          linePoints[2][0] = viewLeft + viewWidth - layout.labelMargin - realTextWidth - layout.labelDistance;\n        }\n      } else {\n        if (layout.x < cx) {\n          linePoints[2][0] = layout.x + layout.labelDistance;\n        } else {\n          linePoints[2][0] = layout.x - layout.labelDistance;\n        }\n\n        linePoints[1][0] = linePoints[2][0] + dist;\n      }\n\n      linePoints[1][1] = linePoints[2][1] = layout.y;\n    }\n  }\n}\n\nfunction isPositionCenter(layout) {\n  // Not change x for center label\n  return layout.position === 'center';\n}\n\nfunction _default(seriesModel, r, viewWidth, viewHeight, viewLeft, viewTop) {\n  var data = seriesModel.getData();\n  var labelLayoutList = [];\n  var cx;\n  var cy;\n  var hasLabelRotate = false;\n  var minShowLabelRadian = (seriesModel.get('minShowLabelAngle') || 0) * RADIAN;\n  data.each(function (idx) {\n    var layout = data.getItemLayout(idx);\n    var itemModel = data.getItemModel(idx);\n    var labelModel = itemModel.getModel('label'); // Use position in normal or emphasis\n\n    var labelPosition = labelModel.get('position') || itemModel.get('emphasis.label.position');\n    var labelDistance = labelModel.get('distanceToLabelLine');\n    var labelAlignTo = labelModel.get('alignTo');\n    var labelMargin = parsePercent(labelModel.get('margin'), viewWidth);\n    var bleedMargin = labelModel.get('bleedMargin');\n    var font = labelModel.getFont();\n    var labelLineModel = itemModel.getModel('labelLine');\n    var labelLineLen = labelLineModel.get('length');\n    labelLineLen = parsePercent(labelLineLen, viewWidth);\n    var labelLineLen2 = labelLineModel.get('length2');\n    labelLineLen2 = parsePercent(labelLineLen2, viewWidth);\n\n    if (layout.angle < minShowLabelRadian) {\n      return;\n    }\n\n    var midAngle = (layout.startAngle + layout.endAngle) / 2;\n    var dx = Math.cos(midAngle);\n    var dy = Math.sin(midAngle);\n    var textX;\n    var textY;\n    var linePoints;\n    var textAlign;\n    cx = layout.cx;\n    cy = layout.cy;\n    var text = seriesModel.getFormattedLabel(idx, 'normal') || data.getName(idx);\n    var textRect = textContain.getBoundingRect(text, font, textAlign, 'top');\n    var isLabelInside = labelPosition === 'inside' || labelPosition === 'inner';\n\n    if (labelPosition === 'center') {\n      textX = layout.cx;\n      textY = layout.cy;\n      textAlign = 'center';\n    } else {\n      var x1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dx : layout.r * dx) + cx;\n      var y1 = (isLabelInside ? (layout.r + layout.r0) / 2 * dy : layout.r * dy) + cy;\n      textX = x1 + dx * 3;\n      textY = y1 + dy * 3;\n\n      if (!isLabelInside) {\n        // For roseType\n        var x2 = x1 + dx * (labelLineLen + r - layout.r);\n        var y2 = y1 + dy * (labelLineLen + r - layout.r);\n        var x3 = x2 + (dx < 0 ? -1 : 1) * labelLineLen2;\n        var y3 = y2;\n\n        if (labelAlignTo === 'edge') {\n          // Adjust textX because text align of edge is opposite\n          textX = dx < 0 ? viewLeft + labelMargin : viewLeft + viewWidth - labelMargin;\n        } else {\n          textX = x3 + (dx < 0 ? -labelDistance : labelDistance);\n        }\n\n        textY = y3;\n        linePoints = [[x1, y1], [x2, y2], [x3, y3]];\n      }\n\n      textAlign = isLabelInside ? 'center' : labelAlignTo === 'edge' ? dx > 0 ? 'right' : 'left' : dx > 0 ? 'left' : 'right';\n    }\n\n    var labelRotate;\n    var rotate = labelModel.get('rotate');\n\n    if (typeof rotate === 'number') {\n      labelRotate = rotate * (Math.PI / 180);\n    } else {\n      labelRotate = rotate ? dx < 0 ? -midAngle + Math.PI : -midAngle : 0;\n    }\n\n    hasLabelRotate = !!labelRotate;\n    layout.label = {\n      x: textX,\n      y: textY,\n      position: labelPosition,\n      height: textRect.height,\n      len: labelLineLen,\n      len2: labelLineLen2,\n      linePoints: linePoints,\n      textAlign: textAlign,\n      verticalAlign: 'middle',\n      rotation: labelRotate,\n      inside: isLabelInside,\n      labelDistance: labelDistance,\n      labelAlignTo: labelAlignTo,\n      labelMargin: labelMargin,\n      bleedMargin: bleedMargin,\n      textRect: textRect,\n      text: text,\n      font: font\n    }; // Not layout the inside label\n\n    if (!isLabelInside) {\n      labelLayoutList.push(layout.label);\n    }\n  });\n\n  if (!hasLabelRotate && seriesModel.get('avoidLabelOverlap')) {\n    avoidOverlap(labelLayoutList, cx, cy, r, viewWidth, viewHeight, viewLeft, viewTop);\n  }\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nrequire(\"./pie/PieSeries\");\n\nrequire(\"./pie/PieView\");\n\nvar createDataSelectAction = require(\"../action/createDataSelectAction\");\n\nvar dataColor = require(\"../visual/dataColor\");\n\nvar pieLayout = require(\"./pie/pieLayout\");\n\nvar dataFilter = require(\"../processor/dataFilter\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\ncreateDataSelectAction('pie', [{\n  type: 'pieToggleSelect',\n  event: 'pieselectchanged',\n  method: 'toggleSelected'\n}, {\n  type: 'pieSelect',\n  event: 'pieselected',\n  method: 'select'\n}, {\n  type: 'pieUnSelect',\n  event: 'pieunselected',\n  method: 'unSelect'\n}]);\necharts.registerVisual(dataColor('pie'));\necharts.registerLayout(zrUtil.curry(pieLayout, 'pie'));\necharts.registerProcessor(dataFilter('pie'));","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _graphic = require(\"../graphic\");\n\nvar extendShape = _graphic.extendShape;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Sausage: similar to sector, but have half circle on both sides\n * @public\n */\nvar _default = extendShape({\n  type: 'sausage',\n  shape: {\n    cx: 0,\n    cy: 0,\n    r0: 0,\n    r: 0,\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    clockwise: true\n  },\n  buildPath: function (ctx, shape) {\n    var x = shape.cx;\n    var y = shape.cy;\n    var r0 = Math.max(shape.r0 || 0, 0);\n    var r = Math.max(shape.r, 0);\n    var dr = (r - r0) * 0.5;\n    var rCenter = r0 + dr;\n    var startAngle = shape.startAngle;\n    var endAngle = shape.endAngle;\n    var clockwise = shape.clockwise;\n    var unitStartX = Math.cos(startAngle);\n    var unitStartY = Math.sin(startAngle);\n    var unitEndX = Math.cos(endAngle);\n    var unitEndY = Math.sin(endAngle);\n    var lessThanCircle = clockwise ? endAngle - startAngle < Math.PI * 2 : startAngle - endAngle < Math.PI * 2;\n\n    if (lessThanCircle) {\n      ctx.moveTo(unitStartX * r0 + x, unitStartY * r0 + y);\n      ctx.arc(unitStartX * rCenter + x, unitStartY * rCenter + y, dr, -Math.PI + startAngle, startAngle, !clockwise);\n    }\n\n    ctx.arc(x, y, r, startAngle, endAngle, !clockwise);\n    ctx.moveTo(unitEndX * r + x, unitEndY * r + y);\n    ctx.arc(unitEndX * rCenter + x, unitEndY * rCenter + y, dr, endAngle - Math.PI * 2, endAngle - Math.PI, !clockwise);\n\n    if (r0 !== 0) {\n      ctx.arc(x, y, r0, endAngle, startAngle, clockwise);\n      ctx.moveTo(unitStartX * r0 + x, unitEndY * r0 + y);\n    }\n\n    ctx.closePath();\n  }\n});\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * LegendVisualProvider is an bridge that pick encoded color from data and\n * provide to the legend component.\n * @param {Function} getDataWithEncodedVisual Function to get data after filtered. It stores all the encoding info\n * @param {Function} getRawData Function to get raw data before filtered.\n */\nfunction LegendVisualProvider(getDataWithEncodedVisual, getRawData) {\n  this.getAllNames = function () {\n    var rawData = getRawData(); // We find the name from the raw data. In case it's filtered by the legend component.\n    // Normally, the name can be found in rawData, but can't be found in filtered data will display as gray.\n\n    return rawData.mapArray(rawData.getName);\n  };\n\n  this.containName = function (name) {\n    var rawData = getRawData();\n    return rawData.indexOfName(name) >= 0;\n  };\n\n  this.indexOfName = function (name) {\n    // Only get data when necessary.\n    // Because LegendVisualProvider constructor may be new in the stage that data is not prepared yet.\n    // Invoking Series#getData immediately will throw an error.\n    var dataWithEncodedVisual = getDataWithEncodedVisual();\n    return dataWithEncodedVisual.indexOfName(name);\n  };\n\n  this.getItemVisual = function (dataIndex, key) {\n    // Get encoded visual properties from final filtered data.\n    var dataWithEncodedVisual = getDataWithEncodedVisual();\n    return dataWithEncodedVisual.getItemVisual(dataIndex, key);\n  };\n}\n\nvar _default = LegendVisualProvider;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawValue = _dataProvider.retrieveRawValue;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/data/List} data\n * @param {number} dataIndex\n * @return {string} label string. Not null/undefined\n */\nfunction getDefaultLabel(data, dataIndex) {\n  var labelDims = data.mapDimension('defaultedLabel', true);\n  var len = labelDims.length; // Simple optimization (in lots of cases, label dims length is 1)\n\n  if (len === 1) {\n    return retrieveRawValue(data, dataIndex, labelDims[0]);\n  } else if (len) {\n    var vals = [];\n\n    for (var i = 0; i < labelDims.length; i++) {\n      var val = retrieveRawValue(data, dataIndex, labelDims[i]);\n      vals.push(val);\n    }\n\n    return vals.join(' ');\n  }\n}\n\nexports.getDefaultLabel = getDefaultLabel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar axisPointerModelHelper = require(\"./axisPointer/modelHelper\");\n\nvar axisTrigger = require(\"./axisPointer/axisTrigger\");\n\nrequire(\"./axisPointer/AxisPointerModel\");\n\nrequire(\"./axisPointer/AxisPointerView\");\n\nrequire(\"./axisPointer/CartesianAxisPointer\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// CartesianAxisPointer is not supposed to be required here. But consider\n// echarts.simple.js and online build tooltip, which only require gridSimple,\n// CartesianAxisPointer should be able to required somewhere.\necharts.registerPreprocessor(function (option) {\n  // Always has a global axisPointerModel for default setting.\n  if (option) {\n    (!option.axisPointer || option.axisPointer.length === 0) && (option.axisPointer = {});\n    var link = option.axisPointer.link; // Normalize to array to avoid object mergin. But if link\n    // is not set, remain null/undefined, otherwise it will\n    // override existent link setting.\n\n    if (link && !zrUtil.isArray(link)) {\n      option.axisPointer.link = [link];\n    }\n  }\n}); // This process should proformed after coordinate systems created\n// and series data processed. So put it on statistic processing stage.\n\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.STATISTIC, function (ecModel, api) {\n  // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n  // allAxesInfo should be updated when setOption performed.\n  ecModel.getComponent('axisPointer').coordSysAxesInfo = axisPointerModelHelper.collect(ecModel, api);\n}); // Broadcast to all views.\n\necharts.registerAction({\n  type: 'updateAxisPointer',\n  event: 'updateAxisPointer',\n  update: ':updateAxisPointer'\n}, axisTrigger);","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar BoundingRect = require(\"zrender/lib/core/BoundingRect\");\n\nvar Cartesian = require(\"./Cartesian\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction Cartesian2D(name) {\n  Cartesian.call(this, name);\n}\n\nCartesian2D.prototype = {\n  constructor: Cartesian2D,\n  type: 'cartesian2d',\n\n  /**\n   * @type {Array.<string>}\n   * @readOnly\n   */\n  dimensions: ['x', 'y'],\n\n  /**\n   * Base axis will be used on stacking.\n   *\n   * @return {module:echarts/coord/cartesian/Axis2D}\n   */\n  getBaseAxis: function () {\n    return this.getAxesByScale('ordinal')[0] || this.getAxesByScale('time')[0] || this.getAxis('x');\n  },\n\n  /**\n   * If contain point\n   * @param {Array.<number>} point\n   * @return {boolean}\n   */\n  containPoint: function (point) {\n    var axisX = this.getAxis('x');\n    var axisY = this.getAxis('y');\n    return axisX.contain(axisX.toLocalCoord(point[0])) && axisY.contain(axisY.toLocalCoord(point[1]));\n  },\n\n  /**\n   * If contain data\n   * @param {Array.<number>} data\n   * @return {boolean}\n   */\n  containData: function (data) {\n    return this.getAxis('x').containData(data[0]) && this.getAxis('y').containData(data[1]);\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  dataToPoint: function (data, reserved, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.toGlobalCoord(xAxis.dataToCoord(data[0]));\n    out[1] = yAxis.toGlobalCoord(yAxis.dataToCoord(data[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} data\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  clampData: function (data, out) {\n    var xScale = this.getAxis('x').scale;\n    var yScale = this.getAxis('y').scale;\n    var xAxisExtent = xScale.getExtent();\n    var yAxisExtent = yScale.getExtent();\n    var x = xScale.parse(data[0]);\n    var y = yScale.parse(data[1]);\n    out = out || [];\n    out[0] = Math.min(Math.max(Math.min(xAxisExtent[0], xAxisExtent[1]), x), Math.max(xAxisExtent[0], xAxisExtent[1]));\n    out[1] = Math.min(Math.max(Math.min(yAxisExtent[0], yAxisExtent[1]), y), Math.max(yAxisExtent[0], yAxisExtent[1]));\n    return out;\n  },\n\n  /**\n   * @param {Array.<number>} point\n   * @param {Array.<number>} out\n   * @return {Array.<number>}\n   */\n  pointToData: function (point, out) {\n    var xAxis = this.getAxis('x');\n    var yAxis = this.getAxis('y');\n    out = out || [];\n    out[0] = xAxis.coordToData(xAxis.toLocalCoord(point[0]));\n    out[1] = yAxis.coordToData(yAxis.toLocalCoord(point[1]));\n    return out;\n  },\n\n  /**\n   * Get other axis\n   * @param {module:echarts/coord/cartesian/Axis2D} axis\n   */\n  getOtherAxis: function (axis) {\n    return this.getAxis(axis.dim === 'x' ? 'y' : 'x');\n  },\n\n  /**\n   * Get rect area of cartesian.\n   * Area will have a contain function to determine if a point is in the coordinate system.\n   * @return {BoundingRect}\n   */\n  getArea: function () {\n    var xExtent = this.getAxis('x').getGlobalExtent();\n    var yExtent = this.getAxis('y').getGlobalExtent();\n    var x = Math.min(xExtent[0], xExtent[1]);\n    var y = Math.min(yExtent[0], yExtent[1]);\n    var width = Math.max(xExtent[0], xExtent[1]) - x;\n    var height = Math.max(yExtent[0], yExtent[1]) - y;\n    var rect = new BoundingRect(x, y, width, height);\n    return rect;\n  }\n};\nzrUtil.inherits(Cartesian2D, Cartesian);\nvar _default = Cartesian2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Model = require(\"../../model/Model\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry; // Build axisPointerModel, mergin tooltip.axisPointer model for each axis.\n// allAxesInfo should be updated when setOption performed.\n\nfunction collect(ecModel, api) {\n  var result = {\n    /**\n     * key: makeKey(axis.model)\n     * value: {\n     *      axis,\n     *      coordSys,\n     *      axisPointerModel,\n     *      triggerTooltip,\n     *      involveSeries,\n     *      snap,\n     *      seriesModels,\n     *      seriesDataCount\n     * }\n     */\n    axesInfo: {},\n    seriesInvolved: false,\n\n    /**\n     * key: makeKey(coordSys.model)\n     * value: Object: key makeKey(axis.model), value: axisInfo\n     */\n    coordSysAxesInfo: {},\n    coordSysMap: {}\n  };\n  collectAxesInfo(result, ecModel, api); // Check seriesInvolved for performance, in case too many series in some chart.\n\n  result.seriesInvolved && collectSeriesInfo(result, ecModel);\n  return result;\n}\n\nfunction collectAxesInfo(result, ecModel, api) {\n  var globalTooltipModel = ecModel.getComponent('tooltip');\n  var globalAxisPointerModel = ecModel.getComponent('axisPointer'); // links can only be set on global.\n\n  var linksOption = globalAxisPointerModel.get('link', true) || [];\n  var linkGroups = []; // Collect axes info.\n\n  each(api.getCoordinateSystems(), function (coordSys) {\n    // Some coordinate system do not support axes, like geo.\n    if (!coordSys.axisPointerEnabled) {\n      return;\n    }\n\n    var coordSysKey = makeKey(coordSys.model);\n    var axesInfoInCoordSys = result.coordSysAxesInfo[coordSysKey] = {};\n    result.coordSysMap[coordSysKey] = coordSys; // Set tooltip (like 'cross') is a convienent way to show axisPointer\n    // for user. So we enable seting tooltip on coordSys model.\n\n    var coordSysModel = coordSys.model;\n    var baseTooltipModel = coordSysModel.getModel('tooltip', globalTooltipModel);\n    each(coordSys.getAxes(), curry(saveTooltipAxisInfo, false, null)); // If axis tooltip used, choose tooltip axis for each coordSys.\n    // Notice this case: coordSys is `grid` but not `cartesian2D` here.\n\n    if (coordSys.getTooltipAxes && globalTooltipModel // If tooltip.showContent is set as false, tooltip will not\n    // show but axisPointer will show as normal.\n    && baseTooltipModel.get('show')) {\n      // Compatible with previous logic. But series.tooltip.trigger: 'axis'\n      // or series.data[n].tooltip.trigger: 'axis' are not support any more.\n      var triggerAxis = baseTooltipModel.get('trigger') === 'axis';\n      var cross = baseTooltipModel.get('axisPointer.type') === 'cross';\n      var tooltipAxes = coordSys.getTooltipAxes(baseTooltipModel.get('axisPointer.axis'));\n\n      if (triggerAxis || cross) {\n        each(tooltipAxes.baseAxes, curry(saveTooltipAxisInfo, cross ? 'cross' : true, triggerAxis));\n      }\n\n      if (cross) {\n        each(tooltipAxes.otherAxes, curry(saveTooltipAxisInfo, 'cross', false));\n      }\n    } // fromTooltip: true | false | 'cross'\n    // triggerTooltip: true | false | null\n\n\n    function saveTooltipAxisInfo(fromTooltip, triggerTooltip, axis) {\n      var axisPointerModel = axis.model.getModel('axisPointer', globalAxisPointerModel);\n      var axisPointerShow = axisPointerModel.get('show');\n\n      if (!axisPointerShow || axisPointerShow === 'auto' && !fromTooltip && !isHandleTrigger(axisPointerModel)) {\n        return;\n      }\n\n      if (triggerTooltip == null) {\n        triggerTooltip = axisPointerModel.get('triggerTooltip');\n      }\n\n      axisPointerModel = fromTooltip ? makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) : axisPointerModel;\n      var snap = axisPointerModel.get('snap');\n      var key = makeKey(axis.model);\n      var involveSeries = triggerTooltip || snap || axis.type === 'category'; // If result.axesInfo[key] exist, override it (tooltip has higher priority).\n\n      var axisInfo = result.axesInfo[key] = {\n        key: key,\n        axis: axis,\n        coordSys: coordSys,\n        axisPointerModel: axisPointerModel,\n        triggerTooltip: triggerTooltip,\n        involveSeries: involveSeries,\n        snap: snap,\n        useHandle: isHandleTrigger(axisPointerModel),\n        seriesModels: []\n      };\n      axesInfoInCoordSys[key] = axisInfo;\n      result.seriesInvolved |= involveSeries;\n      var groupIndex = getLinkGroupIndex(linksOption, axis);\n\n      if (groupIndex != null) {\n        var linkGroup = linkGroups[groupIndex] || (linkGroups[groupIndex] = {\n          axesInfo: {}\n        });\n        linkGroup.axesInfo[key] = axisInfo;\n        linkGroup.mapper = linksOption[groupIndex].mapper;\n        axisInfo.linkGroup = linkGroup;\n      }\n    }\n  });\n}\n\nfunction makeAxisPointerModel(axis, baseTooltipModel, globalAxisPointerModel, ecModel, fromTooltip, triggerTooltip) {\n  var tooltipAxisPointerModel = baseTooltipModel.getModel('axisPointer');\n  var volatileOption = {};\n  each(['type', 'snap', 'lineStyle', 'shadowStyle', 'label', 'animation', 'animationDurationUpdate', 'animationEasingUpdate', 'z'], function (field) {\n    volatileOption[field] = zrUtil.clone(tooltipAxisPointerModel.get(field));\n  }); // category axis do not auto snap, otherwise some tick that do not\n  // has value can not be hovered. value/time/log axis default snap if\n  // triggered from tooltip and trigger tooltip.\n\n  volatileOption.snap = axis.type !== 'category' && !!triggerTooltip; // Compatibel with previous behavior, tooltip axis do not show label by default.\n  // Only these properties can be overrided from tooltip to axisPointer.\n\n  if (tooltipAxisPointerModel.get('type') === 'cross') {\n    volatileOption.type = 'line';\n  }\n\n  var labelOption = volatileOption.label || (volatileOption.label = {}); // Follow the convention, do not show label when triggered by tooltip by default.\n\n  labelOption.show == null && (labelOption.show = false);\n\n  if (fromTooltip === 'cross') {\n    // When 'cross', both axes show labels.\n    var tooltipAxisPointerLabelShow = tooltipAxisPointerModel.get('label.show');\n    labelOption.show = tooltipAxisPointerLabelShow != null ? tooltipAxisPointerLabelShow : true; // If triggerTooltip, this is a base axis, which should better not use cross style\n    // (cross style is dashed by default)\n\n    if (!triggerTooltip) {\n      var crossStyle = volatileOption.lineStyle = tooltipAxisPointerModel.get('crossStyle');\n      crossStyle && zrUtil.defaults(labelOption, crossStyle.textStyle);\n    }\n  }\n\n  return axis.model.getModel('axisPointer', new Model(volatileOption, globalAxisPointerModel, ecModel));\n}\n\nfunction collectSeriesInfo(result, ecModel) {\n  // Prepare data for axis trigger\n  ecModel.eachSeries(function (seriesModel) {\n    // Notice this case: this coordSys is `cartesian2D` but not `grid`.\n    var coordSys = seriesModel.coordinateSystem;\n    var seriesTooltipTrigger = seriesModel.get('tooltip.trigger', true);\n    var seriesTooltipShow = seriesModel.get('tooltip.show', true);\n\n    if (!coordSys || seriesTooltipTrigger === 'none' || seriesTooltipTrigger === false || seriesTooltipTrigger === 'item' || seriesTooltipShow === false || seriesModel.get('axisPointer.show', true) === false) {\n      return;\n    }\n\n    each(result.coordSysAxesInfo[makeKey(coordSys.model)], function (axisInfo) {\n      var axis = axisInfo.axis;\n\n      if (coordSys.getAxis(axis.dim) === axis) {\n        axisInfo.seriesModels.push(seriesModel);\n        axisInfo.seriesDataCount == null && (axisInfo.seriesDataCount = 0);\n        axisInfo.seriesDataCount += seriesModel.getData().count();\n      }\n    });\n  }, this);\n}\n/**\n * For example:\n * {\n *     axisPointer: {\n *         links: [{\n *             xAxisIndex: [2, 4],\n *             yAxisIndex: 'all'\n *         }, {\n *             xAxisId: ['a5', 'a7'],\n *             xAxisName: 'xxx'\n *         }]\n *     }\n * }\n */\n\n\nfunction getLinkGroupIndex(linksOption, axis) {\n  var axisModel = axis.model;\n  var dim = axis.dim;\n\n  for (var i = 0; i < linksOption.length; i++) {\n    var linkOption = linksOption[i] || {};\n\n    if (checkPropInLink(linkOption[dim + 'AxisId'], axisModel.id) || checkPropInLink(linkOption[dim + 'AxisIndex'], axisModel.componentIndex) || checkPropInLink(linkOption[dim + 'AxisName'], axisModel.name)) {\n      return i;\n    }\n  }\n}\n\nfunction checkPropInLink(linkPropValue, axisPropValue) {\n  return linkPropValue === 'all' || zrUtil.isArray(linkPropValue) && zrUtil.indexOf(linkPropValue, axisPropValue) >= 0 || linkPropValue === axisPropValue;\n}\n\nfunction fixValue(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n\n  if (!axisInfo) {\n    return;\n  }\n\n  var axisPointerModel = axisInfo.axisPointerModel;\n  var scale = axisInfo.axis.scale;\n  var option = axisPointerModel.option;\n  var status = axisPointerModel.get('status');\n  var value = axisPointerModel.get('value'); // Parse init value for category and time axis.\n\n  if (value != null) {\n    value = scale.parse(value);\n  }\n\n  var useHandle = isHandleTrigger(axisPointerModel); // If `handle` used, `axisPointer` will always be displayed, so value\n  // and status should be initialized.\n\n  if (status == null) {\n    option.status = useHandle ? 'show' : 'hide';\n  }\n\n  var extent = scale.getExtent().slice();\n  extent[0] > extent[1] && extent.reverse();\n\n  if ( // Pick a value on axis when initializing.\n  value == null // If both `handle` and `dataZoom` are used, value may be out of axis extent,\n  // where we should re-pick a value to keep `handle` displaying normally.\n  || value > extent[1]) {\n    // Make handle displayed on the end of the axis when init, which looks better.\n    value = extent[1];\n  }\n\n  if (value < extent[0]) {\n    value = extent[0];\n  }\n\n  option.value = value;\n\n  if (useHandle) {\n    option.status = axisInfo.axis.scale.isBlank() ? 'hide' : 'show';\n  }\n}\n\nfunction getAxisInfo(axisModel) {\n  var coordSysAxesInfo = (axisModel.ecModel.getComponent('axisPointer') || {}).coordSysAxesInfo;\n  return coordSysAxesInfo && coordSysAxesInfo.axesInfo[makeKey(axisModel)];\n}\n\nfunction getAxisPointerModel(axisModel) {\n  var axisInfo = getAxisInfo(axisModel);\n  return axisInfo && axisInfo.axisPointerModel;\n}\n\nfunction isHandleTrigger(axisPointerModel) {\n  return !!axisPointerModel.get('handle.show');\n}\n/**\n * @param {module:echarts/model/Model} model\n * @return {string} unique key\n */\n\n\nfunction makeKey(model) {\n  return model.type + '||' + model.id;\n}\n\nexports.collect = collect;\nexports.fixValue = fixValue;\nexports.getAxisInfo = getAxisInfo;\nexports.getAxisPointerModel = getAxisPointerModel;\nexports.makeKey = makeKey;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Cartesian coordinate system\n * @module  echarts/coord/Cartesian\n *\n */\nfunction dimAxisMapper(dim) {\n  return this._axes[dim];\n}\n/**\n * @alias module:echarts/coord/Cartesian\n * @constructor\n */\n\n\nvar Cartesian = function (name) {\n  this._axes = {};\n  this._dimList = [];\n  /**\n   * @type {string}\n   */\n\n  this.name = name || '';\n};\n\nCartesian.prototype = {\n  constructor: Cartesian,\n  type: 'cartesian',\n\n  /**\n   * Get axis\n   * @param  {number|string} dim\n   * @return {module:echarts/coord/Cartesian~Axis}\n   */\n  getAxis: function (dim) {\n    return this._axes[dim];\n  },\n\n  /**\n   * Get axes list\n   * @return {Array.<module:echarts/coord/Cartesian~Axis>}\n   */\n  getAxes: function () {\n    return zrUtil.map(this._dimList, dimAxisMapper, this);\n  },\n\n  /**\n   * Get axes list by given scale type\n   */\n  getAxesByScale: function (scaleType) {\n    scaleType = scaleType.toLowerCase();\n    return zrUtil.filter(this.getAxes(), function (axis) {\n      return axis.scale.type === scaleType;\n    });\n  },\n\n  /**\n   * Add axis\n   * @param {module:echarts/coord/Cartesian.Axis}\n   */\n  addAxis: function (axis) {\n    var dim = axis.dim;\n    this._axes[dim] = axis;\n\n    this._dimList.push(dim);\n  },\n\n  /**\n   * Convert data to coord in nd space\n   * @param {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  dataToCoord: function (val) {\n    return this._dataCoordConvert(val, 'dataToCoord');\n  },\n\n  /**\n   * Convert coord in nd space to data\n   * @param  {Array.<number>|Object.<string, number>} val\n   * @return {Array.<number>|Object.<string, number>}\n   */\n  coordToData: function (val) {\n    return this._dataCoordConvert(val, 'coordToData');\n  },\n  _dataCoordConvert: function (input, method) {\n    var dimList = this._dimList;\n    var output = input instanceof Array ? [] : {};\n\n    for (var i = 0; i < dimList.length; i++) {\n      var dim = dimList[i];\n      var axis = this._axes[dim];\n      output[dim] = axis[method](input[dim]);\n    }\n\n    return output;\n  }\n};\nvar _default = Cartesian;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../echarts\");\n\nrequire(\"./legend/LegendModel\");\n\nrequire(\"./legend/legendAction\");\n\nrequire(\"./legend/LegendView\");\n\nvar legendFilter = require(\"./legend/legendFilter\");\n\nvar Component = require(\"../model/Component\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n// Do not contain scrollable legend, for sake of file size.\n// Series Filter\necharts.registerProcessor(echarts.PRIORITY.PROCESSOR.SERIES_FILTER, legendFilter);\nComponent.registerSubTypeDefaulter('legend', function () {\n  // Default 'plain' when no type specified.\n  return 'plain';\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction _default(seriesType) {\n  return {\n    seriesType: seriesType,\n    reset: function (seriesModel, ecModel) {\n      var legendModels = ecModel.findComponents({\n        mainType: 'legend'\n      });\n\n      if (!legendModels || !legendModels.length) {\n        return;\n      }\n\n      var data = seriesModel.getData();\n      data.filterSelf(function (idx) {\n        var name = data.getName(idx); // If in any legend component the status is not selected.\n\n        for (var i = 0; i < legendModels.length; i++) {\n          if (!legendModels[i].isSelected(name)) {\n            return false;\n          }\n        }\n\n        return true;\n      });\n    }\n  };\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar globalListener = require(\"./globalListener\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar AxisPointerView = echarts.extendComponentView({\n  type: 'axisPointer',\n  render: function (globalAxisPointerModel, ecModel, api) {\n    var globalTooltipModel = ecModel.getComponent('tooltip');\n    var triggerOn = globalAxisPointerModel.get('triggerOn') || globalTooltipModel && globalTooltipModel.get('triggerOn') || 'mousemove|click'; // Register global listener in AxisPointerView to enable\n    // AxisPointerView to be independent to Tooltip.\n\n    globalListener.register('axisPointer', api, function (currTrigger, e, dispatchAction) {\n      // If 'none', it is not controlled by mouse totally.\n      if (triggerOn !== 'none' && (currTrigger === 'leave' || triggerOn.indexOf(currTrigger) >= 0)) {\n        dispatchAction({\n          type: 'updateAxisPointer',\n          currTrigger: currTrigger,\n          x: e && e.offsetX,\n          y: e && e.offsetY\n        });\n      }\n    });\n  },\n\n  /**\n   * @override\n   */\n  remove: function (ecModel, api) {\n    globalListener.unregister(api.getZr(), 'axisPointer');\n    AxisPointerView.superApply(this._model, 'remove', arguments);\n  },\n\n  /**\n   * @override\n   */\n  dispose: function (ecModel, api) {\n    globalListener.unregister('axisPointer', api);\n    AxisPointerView.superApply(this._model, 'dispose', arguments);\n  }\n});\nvar _default = AxisPointerView;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar clazzUtil = require(\"../../util/clazz\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar axisPointerModelHelper = require(\"./modelHelper\");\n\nvar eventTool = require(\"zrender/lib/core/event\");\n\nvar throttleUtil = require(\"../../util/throttle\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar inner = makeInner();\nvar clone = zrUtil.clone;\nvar bind = zrUtil.bind;\n/**\n * Base axis pointer class in 2D.\n * Implemenents {module:echarts/component/axis/IAxisPointer}.\n */\n\nfunction BaseAxisPointer() {}\n\nBaseAxisPointer.prototype = {\n  /**\n   * @private\n   */\n  _group: null,\n\n  /**\n   * @private\n   */\n  _lastGraphicKey: null,\n\n  /**\n   * @private\n   */\n  _handle: null,\n\n  /**\n   * @private\n   */\n  _dragging: false,\n\n  /**\n   * @private\n   */\n  _lastValue: null,\n\n  /**\n   * @private\n   */\n  _lastStatus: null,\n\n  /**\n   * @private\n   */\n  _payloadInfo: null,\n\n  /**\n   * In px, arbitrary value. Do not set too small,\n   * no animation is ok for most cases.\n   * @protected\n   */\n  animationThreshold: 15,\n\n  /**\n   * @implement\n   */\n  render: function (axisModel, axisPointerModel, api, forceRender) {\n    var value = axisPointerModel.get('value');\n    var status = axisPointerModel.get('status'); // Bind them to `this`, not in closure, otherwise they will not\n    // be replaced when user calling setOption in not merge mode.\n\n    this._axisModel = axisModel;\n    this._axisPointerModel = axisPointerModel;\n    this._api = api; // Optimize: `render` will be called repeatly during mouse move.\n    // So it is power consuming if performing `render` each time,\n    // especially on mobile device.\n\n    if (!forceRender && this._lastValue === value && this._lastStatus === status) {\n      return;\n    }\n\n    this._lastValue = value;\n    this._lastStatus = status;\n    var group = this._group;\n    var handle = this._handle;\n\n    if (!status || status === 'hide') {\n      // Do not clear here, for animation better.\n      group && group.hide();\n      handle && handle.hide();\n      return;\n    }\n\n    group && group.show();\n    handle && handle.show(); // Otherwise status is 'show'\n\n    var elOption = {};\n    this.makeElOption(elOption, value, axisModel, axisPointerModel, api); // Enable change axis pointer type.\n\n    var graphicKey = elOption.graphicKey;\n\n    if (graphicKey !== this._lastGraphicKey) {\n      this.clear(api);\n    }\n\n    this._lastGraphicKey = graphicKey;\n    var moveAnimation = this._moveAnimation = this.determineAnimation(axisModel, axisPointerModel);\n\n    if (!group) {\n      group = this._group = new graphic.Group();\n      this.createPointerEl(group, elOption, axisModel, axisPointerModel);\n      this.createLabelEl(group, elOption, axisModel, axisPointerModel);\n      api.getZr().add(group);\n    } else {\n      var doUpdateProps = zrUtil.curry(updateProps, axisPointerModel, moveAnimation);\n      this.updatePointerEl(group, elOption, doUpdateProps, axisPointerModel);\n      this.updateLabelEl(group, elOption, doUpdateProps, axisPointerModel);\n    }\n\n    updateMandatoryProps(group, axisPointerModel, true);\n\n    this._renderHandle(value);\n  },\n\n  /**\n   * @implement\n   */\n  remove: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @implement\n   */\n  dispose: function (api) {\n    this.clear(api);\n  },\n\n  /**\n   * @protected\n   */\n  determineAnimation: function (axisModel, axisPointerModel) {\n    var animation = axisPointerModel.get('animation');\n    var axis = axisModel.axis;\n    var isCategoryAxis = axis.type === 'category';\n    var useSnap = axisPointerModel.get('snap'); // Value axis without snap always do not snap.\n\n    if (!useSnap && !isCategoryAxis) {\n      return false;\n    }\n\n    if (animation === 'auto' || animation == null) {\n      var animationThreshold = this.animationThreshold;\n\n      if (isCategoryAxis && axis.getBandWidth() > animationThreshold) {\n        return true;\n      } // It is important to auto animation when snap used. Consider if there is\n      // a dataZoom, animation will be disabled when too many points exist, while\n      // it will be enabled for better visual effect when little points exist.\n\n\n      if (useSnap) {\n        var seriesDataCount = axisPointerModelHelper.getAxisInfo(axisModel).seriesDataCount;\n        var axisExtent = axis.getExtent(); // Approximate band width\n\n        return Math.abs(axisExtent[0] - axisExtent[1]) / seriesDataCount > animationThreshold;\n      }\n\n      return false;\n    }\n\n    return animation === true;\n  },\n\n  /**\n   * add {pointer, label, graphicKey} to elOption\n   * @protected\n   */\n  makeElOption: function (elOption, value, axisModel, axisPointerModel, api) {// Shoule be implemenented by sub-class.\n  },\n\n  /**\n   * @protected\n   */\n  createPointerEl: function (group, elOption, axisModel, axisPointerModel) {\n    var pointerOption = elOption.pointer;\n\n    if (pointerOption) {\n      var pointerEl = inner(group).pointerEl = new graphic[pointerOption.type](clone(elOption.pointer));\n      group.add(pointerEl);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  createLabelEl: function (group, elOption, axisModel, axisPointerModel) {\n    if (elOption.label) {\n      var labelEl = inner(group).labelEl = new graphic.Rect(clone(elOption.label));\n      group.add(labelEl);\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updatePointerEl: function (group, elOption, updateProps) {\n    var pointerEl = inner(group).pointerEl;\n\n    if (pointerEl && elOption.pointer) {\n      pointerEl.setStyle(elOption.pointer.style);\n      updateProps(pointerEl, {\n        shape: elOption.pointer.shape\n      });\n    }\n  },\n\n  /**\n   * @protected\n   */\n  updateLabelEl: function (group, elOption, updateProps, axisPointerModel) {\n    var labelEl = inner(group).labelEl;\n\n    if (labelEl) {\n      labelEl.setStyle(elOption.label.style);\n      updateProps(labelEl, {\n        // Consider text length change in vertical axis, animation should\n        // be used on shape, otherwise the effect will be weird.\n        shape: elOption.label.shape,\n        position: elOption.label.position\n      });\n      updateLabelShowHide(labelEl, axisPointerModel);\n    }\n  },\n\n  /**\n   * @private\n   */\n  _renderHandle: function (value) {\n    if (this._dragging || !this.updateHandleTransform) {\n      return;\n    }\n\n    var axisPointerModel = this._axisPointerModel;\n\n    var zr = this._api.getZr();\n\n    var handle = this._handle;\n    var handleModel = axisPointerModel.getModel('handle');\n    var status = axisPointerModel.get('status');\n\n    if (!handleModel.get('show') || !status || status === 'hide') {\n      handle && zr.remove(handle);\n      this._handle = null;\n      return;\n    }\n\n    var isInit;\n\n    if (!this._handle) {\n      isInit = true;\n      handle = this._handle = graphic.createIcon(handleModel.get('icon'), {\n        cursor: 'move',\n        draggable: true,\n        onmousemove: function (e) {\n          // Fot mobile devicem, prevent screen slider on the button.\n          eventTool.stop(e.event);\n        },\n        onmousedown: bind(this._onHandleDragMove, this, 0, 0),\n        drift: bind(this._onHandleDragMove, this),\n        ondragend: bind(this._onHandleDragEnd, this)\n      });\n      zr.add(handle);\n    }\n\n    updateMandatoryProps(handle, axisPointerModel, false); // update style\n\n    var includeStyles = ['color', 'borderColor', 'borderWidth', 'opacity', 'shadowColor', 'shadowBlur', 'shadowOffsetX', 'shadowOffsetY'];\n    handle.setStyle(handleModel.getItemStyle(null, includeStyles)); // update position\n\n    var handleSize = handleModel.get('size');\n\n    if (!zrUtil.isArray(handleSize)) {\n      handleSize = [handleSize, handleSize];\n    }\n\n    handle.attr('scale', [handleSize[0] / 2, handleSize[1] / 2]);\n    throttleUtil.createOrUpdate(this, '_doDispatchAxisPointer', handleModel.get('throttle') || 0, 'fixRate');\n\n    this._moveHandleToValue(value, isInit);\n  },\n\n  /**\n   * @private\n   */\n  _moveHandleToValue: function (value, isInit) {\n    updateProps(this._axisPointerModel, !isInit && this._moveAnimation, this._handle, getHandleTransProps(this.getHandleTransform(value, this._axisModel, this._axisPointerModel)));\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragMove: function (dx, dy) {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    this._dragging = true; // Persistent for throttle.\n\n    var trans = this.updateHandleTransform(getHandleTransProps(handle), [dx, dy], this._axisModel, this._axisPointerModel);\n    this._payloadInfo = trans;\n    handle.stopAnimation();\n    handle.attr(getHandleTransProps(trans));\n    inner(handle).lastProp = null;\n\n    this._doDispatchAxisPointer();\n  },\n\n  /**\n   * Throttled method.\n   * @private\n   */\n  _doDispatchAxisPointer: function () {\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var payloadInfo = this._payloadInfo;\n    var axisModel = this._axisModel;\n\n    this._api.dispatchAction({\n      type: 'updateAxisPointer',\n      x: payloadInfo.cursorPoint[0],\n      y: payloadInfo.cursorPoint[1],\n      tooltipOption: payloadInfo.tooltipOption,\n      axesInfo: [{\n        axisDim: axisModel.axis.dim,\n        axisIndex: axisModel.componentIndex\n      }]\n    });\n  },\n\n  /**\n   * @private\n   */\n  _onHandleDragEnd: function (moveAnimation) {\n    this._dragging = false;\n    var handle = this._handle;\n\n    if (!handle) {\n      return;\n    }\n\n    var value = this._axisPointerModel.get('value'); // Consider snap or categroy axis, handle may be not consistent with\n    // axisPointer. So move handle to align the exact value position when\n    // drag ended.\n\n\n    this._moveHandleToValue(value); // For the effect: tooltip will be shown when finger holding on handle\n    // button, and will be hidden after finger left handle button.\n\n\n    this._api.dispatchAction({\n      type: 'hideTip'\n    });\n  },\n\n  /**\n   * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {number} value\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0}\n   */\n  getHandleTransform: null,\n\n  /**\n   * * Should be implemenented by sub-class if support `handle`.\n   * @protected\n   * @param {Object} transform {position, rotation}\n   * @param {Array.<number>} delta [dx, dy]\n   * @param {module:echarts/model/Model} axisModel\n   * @param {module:echarts/model/Model} axisPointerModel\n   * @return {Object} {position: [x, y], rotation: 0, cursorPoint: [x, y]}\n   */\n  updateHandleTransform: null,\n\n  /**\n   * @private\n   */\n  clear: function (api) {\n    this._lastValue = null;\n    this._lastStatus = null;\n    var zr = api.getZr();\n    var group = this._group;\n    var handle = this._handle;\n\n    if (zr && group) {\n      this._lastGraphicKey = null;\n      group && zr.remove(group);\n      handle && zr.remove(handle);\n      this._group = null;\n      this._handle = null;\n      this._payloadInfo = null;\n    }\n  },\n\n  /**\n   * @protected\n   */\n  doClear: function () {// Implemented by sub-class if necessary.\n  },\n\n  /**\n   * @protected\n   * @param {Array.<number>} xy\n   * @param {Array.<number>} wh\n   * @param {number} [xDimIndex=0] or 1\n   */\n  buildLabel: function (xy, wh, xDimIndex) {\n    xDimIndex = xDimIndex || 0;\n    return {\n      x: xy[xDimIndex],\n      y: xy[1 - xDimIndex],\n      width: wh[xDimIndex],\n      height: wh[1 - xDimIndex]\n    };\n  }\n};\nBaseAxisPointer.prototype.constructor = BaseAxisPointer;\n\nfunction updateProps(animationModel, moveAnimation, el, props) {\n  // Animation optimize.\n  if (!propsEqual(inner(el).lastProp, props)) {\n    inner(el).lastProp = props;\n    moveAnimation ? graphic.updateProps(el, props, animationModel) : (el.stopAnimation(), el.attr(props));\n  }\n}\n\nfunction propsEqual(lastProps, newProps) {\n  if (zrUtil.isObject(lastProps) && zrUtil.isObject(newProps)) {\n    var equals = true;\n    zrUtil.each(newProps, function (item, key) {\n      equals = equals && propsEqual(lastProps[key], item);\n    });\n    return !!equals;\n  } else {\n    return lastProps === newProps;\n  }\n}\n\nfunction updateLabelShowHide(labelEl, axisPointerModel) {\n  labelEl[axisPointerModel.get('label.show') ? 'show' : 'hide']();\n}\n\nfunction getHandleTransProps(trans) {\n  return {\n    position: trans.position.slice(),\n    rotation: trans.rotation || 0\n  };\n}\n\nfunction updateMandatoryProps(group, axisPointerModel, silent) {\n  var z = axisPointerModel.get('z');\n  var zlevel = axisPointerModel.get('zlevel');\n  group && group.traverse(function (el) {\n    if (el.type !== 'group') {\n      z != null && (el.z = z);\n      zlevel != null && (el.zlevel = zlevel);\n      el.silent = silent;\n    }\n  });\n}\n\nclazzUtil.enableClassExtend(BaseAxisPointer);\nvar _default = BaseAxisPointer;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar createDimensions = require(\"../../data/helper/createDimensions\");\n\nvar List = require(\"../../data/List\");\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar extend = _util.extend;\nvar isArray = _util.isArray;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * [Usage]:\n * (1)\n * createListSimply(seriesModel, ['value']);\n * (2)\n * createListSimply(seriesModel, {\n *     coordDimensions: ['value'],\n *     dimensionsCount: 5\n * });\n *\n * @param {module:echarts/model/Series} seriesModel\n * @param {Object|Array.<string|Object>} opt opt or coordDimensions\n *        The options in opt, see `echarts/data/helper/createDimensions`\n * @param {Array.<string>} [nameList]\n * @return {module:echarts/data/List}\n */\nfunction _default(seriesModel, opt, nameList) {\n  opt = isArray(opt) && {\n    coordDimensions: opt\n  } || extend({}, opt);\n  var source = seriesModel.getSource();\n  var dimensionsInfo = createDimensions(source, opt);\n  var list = new List(dimensionsInfo, seriesModel);\n  list.initData(source, nameList);\n  return list;\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar graphic = require(\"../../util/graphic\");\n\nvar _labelHelper = require(\"../helper/labelHelper\");\n\nvar getDefaultLabel = _labelHelper.getDefaultLabel;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nfunction setLabel(normalStyle, hoverStyle, itemModel, color, seriesModel, dataIndex, labelPositionOutside) {\n  var labelModel = itemModel.getModel('label');\n  var hoverLabelModel = itemModel.getModel('emphasis.label');\n  graphic.setLabelStyle(normalStyle, hoverStyle, labelModel, hoverLabelModel, {\n    labelFetcher: seriesModel,\n    labelDataIndex: dataIndex,\n    defaultText: getDefaultLabel(seriesModel.getData(), dataIndex),\n    isRectText: true,\n    autoColor: color\n  });\n  fixPosition(normalStyle);\n  fixPosition(hoverStyle);\n}\n\nfunction fixPosition(style, labelPositionOutside) {\n  if (style.textPosition === 'outside') {\n    style.textPosition = labelPositionOutside;\n  }\n}\n\nexports.setLabel = setLabel;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar _model = require(\"../../util/model\");\n\nvar makeInner = _model.makeInner;\n\nvar modelHelper = require(\"./modelHelper\");\n\nvar findPointFromSeries = require(\"./findPointFromSeries\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar each = zrUtil.each;\nvar curry = zrUtil.curry;\nvar inner = makeInner();\n/**\n * Basic logic: check all axis, if they do not demand show/highlight,\n * then hide/downplay them.\n *\n * @param {Object} coordSysAxesInfo\n * @param {Object} payload\n * @param {string} [payload.currTrigger] 'click' | 'mousemove' | 'leave'\n * @param {Array.<number>} [payload.x] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Array.<number>} [payload.y] x and y, which are mandatory, specify a point to\n *              trigger axisPointer and tooltip.\n * @param {Object} [payload.seriesIndex] finder, optional, restrict target axes.\n * @param {Object} [payload.dataIndex] finder, restrict target axes.\n * @param {Object} [payload.axesInfo] finder, restrict target axes.\n *        [{\n *          axisDim: 'x'|'y'|'angle'|...,\n *          axisIndex: ...,\n *          value: ...\n *        }, ...]\n * @param {Function} [payload.dispatchAction]\n * @param {Object} [payload.tooltipOption]\n * @param {Object|Array.<number>|Function} [payload.position] Tooltip position,\n *        which can be specified in dispatchAction\n * @param {module:echarts/model/Global} ecModel\n * @param {module:echarts/ExtensionAPI} api\n * @return {Object} content of event obj for echarts.connect.\n */\n\nfunction _default(payload, ecModel, api) {\n  var currTrigger = payload.currTrigger;\n  var point = [payload.x, payload.y];\n  var finder = payload;\n  var dispatchAction = payload.dispatchAction || zrUtil.bind(api.dispatchAction, api);\n  var coordSysAxesInfo = ecModel.getComponent('axisPointer').coordSysAxesInfo; // Pending\n  // See #6121. But we are not able to reproduce it yet.\n\n  if (!coordSysAxesInfo) {\n    return;\n  }\n\n  if (illegalPoint(point)) {\n    // Used in the default behavior of `connection`: use the sample seriesIndex\n    // and dataIndex. And also used in the tooltipView trigger.\n    point = findPointFromSeries({\n      seriesIndex: finder.seriesIndex,\n      // Do not use dataIndexInside from other ec instance.\n      // FIXME: auto detect it?\n      dataIndex: finder.dataIndex\n    }, ecModel).point;\n  }\n\n  var isIllegalPoint = illegalPoint(point); // Axis and value can be specified when calling dispatchAction({type: 'updateAxisPointer'}).\n  // Notice: In this case, it is difficult to get the `point` (which is necessary to show\n  // tooltip, so if point is not given, we just use the point found by sample seriesIndex\n  // and dataIndex.\n\n  var inputAxesInfo = finder.axesInfo;\n  var axesInfo = coordSysAxesInfo.axesInfo;\n  var shouldHide = currTrigger === 'leave' || illegalPoint(point);\n  var outputFinder = {};\n  var showValueMap = {};\n  var dataByCoordSys = {\n    list: [],\n    map: {}\n  };\n  var updaters = {\n    showPointer: curry(showPointer, showValueMap),\n    showTooltip: curry(showTooltip, dataByCoordSys)\n  }; // Process for triggered axes.\n\n  each(coordSysAxesInfo.coordSysMap, function (coordSys, coordSysKey) {\n    // If a point given, it must be contained by the coordinate system.\n    var coordSysContainsPoint = isIllegalPoint || coordSys.containPoint(point);\n    each(coordSysAxesInfo.coordSysAxesInfo[coordSysKey], function (axisInfo, key) {\n      var axis = axisInfo.axis;\n      var inputAxisInfo = findInputAxisInfo(inputAxesInfo, axisInfo); // If no inputAxesInfo, no axis is restricted.\n\n      if (!shouldHide && coordSysContainsPoint && (!inputAxesInfo || inputAxisInfo)) {\n        var val = inputAxisInfo && inputAxisInfo.value;\n\n        if (val == null && !isIllegalPoint) {\n          val = axis.pointToData(point);\n        }\n\n        val != null && processOnAxis(axisInfo, val, updaters, false, outputFinder);\n      }\n    });\n  }); // Process for linked axes.\n\n  var linkTriggers = {};\n  each(axesInfo, function (tarAxisInfo, tarKey) {\n    var linkGroup = tarAxisInfo.linkGroup; // If axis has been triggered in the previous stage, it should not be triggered by link.\n\n    if (linkGroup && !showValueMap[tarKey]) {\n      each(linkGroup.axesInfo, function (srcAxisInfo, srcKey) {\n        var srcValItem = showValueMap[srcKey]; // If srcValItem exist, source axis is triggered, so link to target axis.\n\n        if (srcAxisInfo !== tarAxisInfo && srcValItem) {\n          var val = srcValItem.value;\n          linkGroup.mapper && (val = tarAxisInfo.axis.scale.parse(linkGroup.mapper(val, makeMapperParam(srcAxisInfo), makeMapperParam(tarAxisInfo))));\n          linkTriggers[tarAxisInfo.key] = val;\n        }\n      });\n    }\n  });\n  each(linkTriggers, function (val, tarKey) {\n    processOnAxis(axesInfo[tarKey], val, updaters, true, outputFinder);\n  });\n  updateModelActually(showValueMap, axesInfo, outputFinder);\n  dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction);\n  dispatchHighDownActually(axesInfo, dispatchAction, api);\n  return outputFinder;\n}\n\nfunction processOnAxis(axisInfo, newValue, updaters, dontSnap, outputFinder) {\n  var axis = axisInfo.axis;\n\n  if (axis.scale.isBlank() || !axis.containData(newValue)) {\n    return;\n  }\n\n  if (!axisInfo.involveSeries) {\n    updaters.showPointer(axisInfo, newValue);\n    return;\n  } // Heavy calculation. So put it after axis.containData checking.\n\n\n  var payloadInfo = buildPayloadsBySeries(newValue, axisInfo);\n  var payloadBatch = payloadInfo.payloadBatch;\n  var snapToValue = payloadInfo.snapToValue; // Fill content of event obj for echarts.connect.\n  // By defualt use the first involved series data as a sample to connect.\n\n  if (payloadBatch[0] && outputFinder.seriesIndex == null) {\n    zrUtil.extend(outputFinder, payloadBatch[0]);\n  } // If no linkSource input, this process is for collecting link\n  // target, where snap should not be accepted.\n\n\n  if (!dontSnap && axisInfo.snap) {\n    if (axis.containData(snapToValue) && snapToValue != null) {\n      newValue = snapToValue;\n    }\n  }\n\n  updaters.showPointer(axisInfo, newValue, payloadBatch, outputFinder); // Tooltip should always be snapToValue, otherwise there will be\n  // incorrect \"axis value ~ series value\" mapping displayed in tooltip.\n\n  updaters.showTooltip(axisInfo, payloadInfo, snapToValue);\n}\n\nfunction buildPayloadsBySeries(value, axisInfo) {\n  var axis = axisInfo.axis;\n  var dim = axis.dim;\n  var snapToValue = value;\n  var payloadBatch = [];\n  var minDist = Number.MAX_VALUE;\n  var minDiff = -1;\n  each(axisInfo.seriesModels, function (series, idx) {\n    var dataDim = series.getData().mapDimension(dim, true);\n    var seriesNestestValue;\n    var dataIndices;\n\n    if (series.getAxisTooltipData) {\n      var result = series.getAxisTooltipData(dataDim, value, axis);\n      dataIndices = result.dataIndices;\n      seriesNestestValue = result.nestestValue;\n    } else {\n      dataIndices = series.getData().indicesOfNearest(dataDim[0], value, // Add a threshold to avoid find the wrong dataIndex\n      // when data length is not same.\n      // false,\n      axis.type === 'category' ? 0.5 : null);\n\n      if (!dataIndices.length) {\n        return;\n      }\n\n      seriesNestestValue = series.getData().get(dataDim[0], dataIndices[0]);\n    }\n\n    if (seriesNestestValue == null || !isFinite(seriesNestestValue)) {\n      return;\n    }\n\n    var diff = value - seriesNestestValue;\n    var dist = Math.abs(diff); // Consider category case\n\n    if (dist <= minDist) {\n      if (dist < minDist || diff >= 0 && minDiff < 0) {\n        minDist = dist;\n        minDiff = diff;\n        snapToValue = seriesNestestValue;\n        payloadBatch.length = 0;\n      }\n\n      each(dataIndices, function (dataIndex) {\n        payloadBatch.push({\n          seriesIndex: series.seriesIndex,\n          dataIndexInside: dataIndex,\n          dataIndex: series.getData().getRawIndex(dataIndex)\n        });\n      });\n    }\n  });\n  return {\n    payloadBatch: payloadBatch,\n    snapToValue: snapToValue\n  };\n}\n\nfunction showPointer(showValueMap, axisInfo, value, payloadBatch) {\n  showValueMap[axisInfo.key] = {\n    value: value,\n    payloadBatch: payloadBatch\n  };\n}\n\nfunction showTooltip(dataByCoordSys, axisInfo, payloadInfo, value) {\n  var payloadBatch = payloadInfo.payloadBatch;\n  var axis = axisInfo.axis;\n  var axisModel = axis.model;\n  var axisPointerModel = axisInfo.axisPointerModel; // If no data, do not create anything in dataByCoordSys,\n  // whose length will be used to judge whether dispatch action.\n\n  if (!axisInfo.triggerTooltip || !payloadBatch.length) {\n    return;\n  }\n\n  var coordSysModel = axisInfo.coordSys.model;\n  var coordSysKey = modelHelper.makeKey(coordSysModel);\n  var coordSysItem = dataByCoordSys.map[coordSysKey];\n\n  if (!coordSysItem) {\n    coordSysItem = dataByCoordSys.map[coordSysKey] = {\n      coordSysId: coordSysModel.id,\n      coordSysIndex: coordSysModel.componentIndex,\n      coordSysType: coordSysModel.type,\n      coordSysMainType: coordSysModel.mainType,\n      dataByAxis: []\n    };\n    dataByCoordSys.list.push(coordSysItem);\n  }\n\n  coordSysItem.dataByAxis.push({\n    axisDim: axis.dim,\n    axisIndex: axisModel.componentIndex,\n    axisType: axisModel.type,\n    axisId: axisModel.id,\n    value: value,\n    // Caustion: viewHelper.getValueLabel is actually on \"view stage\", which\n    // depends that all models have been updated. So it should not be performed\n    // here. Considering axisPointerModel used here is volatile, which is hard\n    // to be retrieve in TooltipView, we prepare parameters here.\n    valueLabelOpt: {\n      precision: axisPointerModel.get('label.precision'),\n      formatter: axisPointerModel.get('label.formatter')\n    },\n    seriesDataIndices: payloadBatch.slice()\n  });\n}\n\nfunction updateModelActually(showValueMap, axesInfo, outputFinder) {\n  var outputAxesInfo = outputFinder.axesInfo = []; // Basic logic: If no 'show' required, 'hide' this axisPointer.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    var valItem = showValueMap[key];\n\n    if (valItem) {\n      !axisInfo.useHandle && (option.status = 'show');\n      option.value = valItem.value; // For label formatter param and highlight.\n\n      option.seriesDataIndices = (valItem.payloadBatch || []).slice();\n    } // When always show (e.g., handle used), remain\n    // original value and status.\n    else {\n        // If hide, value still need to be set, consider\n        // click legend to toggle axis blank.\n        !axisInfo.useHandle && (option.status = 'hide');\n      } // If status is 'hide', should be no info in payload.\n\n\n    option.status === 'show' && outputAxesInfo.push({\n      axisDim: axisInfo.axis.dim,\n      axisIndex: axisInfo.axis.model.componentIndex,\n      value: option.value\n    });\n  });\n}\n\nfunction dispatchTooltipActually(dataByCoordSys, point, payload, dispatchAction) {\n  // Basic logic: If no showTip required, hideTip will be dispatched.\n  if (illegalPoint(point) || !dataByCoordSys.list.length) {\n    dispatchAction({\n      type: 'hideTip'\n    });\n    return;\n  } // In most case only one axis (or event one series is used). It is\n  // convinient to fetch payload.seriesIndex and payload.dataIndex\n  // dirtectly. So put the first seriesIndex and dataIndex of the first\n  // axis on the payload.\n\n\n  var sampleItem = ((dataByCoordSys.list[0].dataByAxis[0] || {}).seriesDataIndices || [])[0] || {};\n  dispatchAction({\n    type: 'showTip',\n    escapeConnect: true,\n    x: point[0],\n    y: point[1],\n    tooltipOption: payload.tooltipOption,\n    position: payload.position,\n    dataIndexInside: sampleItem.dataIndexInside,\n    dataIndex: sampleItem.dataIndex,\n    seriesIndex: sampleItem.seriesIndex,\n    dataByCoordSys: dataByCoordSys.list\n  });\n}\n\nfunction dispatchHighDownActually(axesInfo, dispatchAction, api) {\n  // FIXME\n  // highlight status modification shoule be a stage of main process?\n  // (Consider confilct (e.g., legend and axisPointer) and setOption)\n  var zr = api.getZr();\n  var highDownKey = 'axisPointerLastHighlights';\n  var lastHighlights = inner(zr)[highDownKey] || {};\n  var newHighlights = inner(zr)[highDownKey] = {}; // Update highlight/downplay status according to axisPointer model.\n  // Build hash map and remove duplicate incidentally.\n\n  each(axesInfo, function (axisInfo, key) {\n    var option = axisInfo.axisPointerModel.option;\n    option.status === 'show' && each(option.seriesDataIndices, function (batchItem) {\n      var key = batchItem.seriesIndex + ' | ' + batchItem.dataIndex;\n      newHighlights[key] = batchItem;\n    });\n  }); // Diff.\n\n  var toHighlight = [];\n  var toDownplay = [];\n  zrUtil.each(lastHighlights, function (batchItem, key) {\n    !newHighlights[key] && toDownplay.push(batchItem);\n  });\n  zrUtil.each(newHighlights, function (batchItem, key) {\n    !lastHighlights[key] && toHighlight.push(batchItem);\n  });\n  toDownplay.length && api.dispatchAction({\n    type: 'downplay',\n    escapeConnect: true,\n    batch: toDownplay\n  });\n  toHighlight.length && api.dispatchAction({\n    type: 'highlight',\n    escapeConnect: true,\n    batch: toHighlight\n  });\n}\n\nfunction findInputAxisInfo(inputAxesInfo, axisInfo) {\n  for (var i = 0; i < (inputAxesInfo || []).length; i++) {\n    var inputAxisInfo = inputAxesInfo[i];\n\n    if (axisInfo.axis.dim === inputAxisInfo.axisDim && axisInfo.axis.model.componentIndex === inputAxisInfo.axisIndex) {\n      return inputAxisInfo;\n    }\n  }\n}\n\nfunction makeMapperParam(axisInfo) {\n  var axisModel = axisInfo.axis.model;\n  var item = {};\n  var dim = item.axisDim = axisInfo.axis.dim;\n  item.axisIndex = item[dim + 'AxisIndex'] = axisModel.componentIndex;\n  item.axisName = item[dim + 'AxisName'] = axisModel.name;\n  item.axisId = item[dim + 'AxisId'] = axisModel.id;\n  return item;\n}\n\nfunction illegalPoint(point) {\n  return !point || point[0] == null || isNaN(point[0]) || point[1] == null || isNaN(point[1]);\n}\n\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar Axis = require(\"../Axis\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * Extend axis 2d\n * @constructor module:echarts/coord/cartesian/Axis2D\n * @extends {module:echarts/coord/cartesian/Axis}\n * @param {string} dim\n * @param {*} scale\n * @param {Array.<number>} coordExtent\n * @param {string} axisType\n * @param {string} position\n */\nvar Axis2D = function (dim, scale, coordExtent, axisType, position) {\n  Axis.call(this, dim, scale, coordExtent);\n  /**\n   * Axis type\n   *  - 'category'\n   *  - 'value'\n   *  - 'time'\n   *  - 'log'\n   * @type {string}\n   */\n\n  this.type = axisType || 'value';\n  /**\n   * Axis position\n   *  - 'top'\n   *  - 'bottom'\n   *  - 'left'\n   *  - 'right'\n   */\n\n  this.position = position || 'bottom';\n};\n\nAxis2D.prototype = {\n  constructor: Axis2D,\n\n  /**\n   * Index of axis, can be used as key\n   */\n  index: 0,\n\n  /**\n   * Implemented in <module:echarts/coord/cartesian/Grid>.\n   * @return {Array.<module:echarts/coord/cartesian/Axis2D>}\n   *         If not on zero of other axis, return null/undefined.\n   *         If no axes, return an empty array.\n   */\n  getAxesOnZeroOf: null,\n\n  /**\n   * Axis model\n   * @param {module:echarts/coord/cartesian/AxisModel}\n   */\n  model: null,\n  isHorizontal: function () {\n    var position = this.position;\n    return position === 'top' || position === 'bottom';\n  },\n\n  /**\n   * Each item cooresponds to this.getExtent(), which\n   * means globalExtent[0] may greater than globalExtent[1],\n   * unless `asc` is input.\n   *\n   * @param {boolean} [asc]\n   * @return {Array.<number>}\n   */\n  getGlobalExtent: function (asc) {\n    var ret = this.getExtent();\n    ret[0] = this.toGlobalCoord(ret[0]);\n    ret[1] = this.toGlobalCoord(ret[1]);\n    asc && ret[0] > ret[1] && ret.reverse();\n    return ret;\n  },\n  getOtherAxis: function () {\n    this.grid.getOtherAxis();\n  },\n\n  /**\n   * @override\n   */\n  pointToData: function (point, clamp) {\n    return this.coordToData(this.toLocalCoord(point[this.dim === 'x' ? 0 : 1]), clamp);\n  },\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var localCoord = axis.toLocalCoord(80);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toLocalCoord: null,\n\n  /**\n   * Transform global coord to local coord,\n   * i.e. var globalCoord = axis.toLocalCoord(40);\n   * designate by module:echarts/coord/cartesian/Grid.\n   * @type {Function}\n   */\n  toGlobalCoord: null\n};\nzrUtil.inherits(Axis2D, Axis);\nvar _default = Axis2D;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar AxisBuilder = require(\"./AxisBuilder\");\n\nvar AxisView = require(\"./AxisView\");\n\nvar cartesianAxisHelper = require(\"../../coord/cartesian/cartesianAxisHelper\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar axisBuilderAttrs = ['axisLine', 'axisTickLabel', 'axisName'];\nvar selfBuilderAttrs = ['splitArea', 'splitLine', 'minorSplitLine'];\nvar CartesianAxisView = AxisView.extend({\n  type: 'cartesianAxis',\n  axisPointerClass: 'CartesianAxisPointer',\n\n  /**\n   * @override\n   */\n  render: function (axisModel, ecModel, api, payload) {\n    this.group.removeAll();\n    var oldAxisGroup = this._axisGroup;\n    this._axisGroup = new graphic.Group();\n    this.group.add(this._axisGroup);\n\n    if (!axisModel.get('show')) {\n      return;\n    }\n\n    var gridModel = axisModel.getCoordSysModel();\n    var layout = cartesianAxisHelper.layout(gridModel, axisModel);\n    var axisBuilder = new AxisBuilder(axisModel, layout);\n    zrUtil.each(axisBuilderAttrs, axisBuilder.add, axisBuilder);\n\n    this._axisGroup.add(axisBuilder.getGroup());\n\n    zrUtil.each(selfBuilderAttrs, function (name) {\n      if (axisModel.get(name + '.show')) {\n        this['_' + name](axisModel, gridModel);\n      }\n    }, this);\n    graphic.groupTransition(oldAxisGroup, this._axisGroup, axisModel);\n    CartesianAxisView.superCall(this, 'render', axisModel, ecModel, api, payload);\n  },\n  remove: function () {\n    this._splitAreaColors = null;\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitLineModel = axisModel.getModel('splitLine');\n    var lineStyleModel = splitLineModel.getModel('lineStyle');\n    var lineColors = lineStyleModel.get('color');\n    lineColors = zrUtil.isArray(lineColors) ? lineColors : [lineColors];\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var lineCount = 0;\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitLineModel\n    });\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n\n      if (isHorizontal) {\n        p1[0] = tickCoord;\n        p1[1] = gridRect.y;\n        p2[0] = tickCoord;\n        p2[1] = gridRect.y + gridRect.height;\n      } else {\n        p1[0] = gridRect.x;\n        p1[1] = tickCoord;\n        p2[0] = gridRect.x + gridRect.width;\n        p2[1] = tickCoord;\n      }\n\n      var colorIndex = lineCount++ % lineColors.length;\n      var tickValue = ticksCoords[i].tickValue;\n\n      this._axisGroup.add(new graphic.Line({\n        anid: tickValue != null ? 'line_' + ticksCoords[i].tickValue : null,\n        subPixelOptimize: true,\n        shape: {\n          x1: p1[0],\n          y1: p1[1],\n          x2: p2[0],\n          y2: p2[1]\n        },\n        style: zrUtil.defaults({\n          stroke: lineColors[colorIndex]\n        }, lineStyle),\n        silent: true\n      }));\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _minorSplitLine: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n    var minorSplitLineModel = axisModel.getModel('minorSplitLine');\n    var lineStyleModel = minorSplitLineModel.getModel('lineStyle');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var isHorizontal = axis.isHorizontal();\n    var minorTicksCoords = axis.getMinorTicksCoords();\n\n    if (!minorTicksCoords.length) {\n      return;\n    }\n\n    var p1 = [];\n    var p2 = [];\n    var lineStyle = lineStyleModel.getLineStyle();\n\n    for (var i = 0; i < minorTicksCoords.length; i++) {\n      for (var k = 0; k < minorTicksCoords[i].length; k++) {\n        var tickCoord = axis.toGlobalCoord(minorTicksCoords[i][k].coord);\n\n        if (isHorizontal) {\n          p1[0] = tickCoord;\n          p1[1] = gridRect.y;\n          p2[0] = tickCoord;\n          p2[1] = gridRect.y + gridRect.height;\n        } else {\n          p1[0] = gridRect.x;\n          p1[1] = tickCoord;\n          p2[0] = gridRect.x + gridRect.width;\n          p2[1] = tickCoord;\n        }\n\n        this._axisGroup.add(new graphic.Line({\n          anid: 'minor_line_' + minorTicksCoords[i][k].tickValue,\n          subPixelOptimize: true,\n          shape: {\n            x1: p1[0],\n            y1: p1[1],\n            x2: p2[0],\n            y2: p2[1]\n          },\n          style: lineStyle,\n          silent: true\n        }));\n      }\n    }\n  },\n\n  /**\n   * @param {module:echarts/coord/cartesian/AxisModel} axisModel\n   * @param {module:echarts/coord/cartesian/GridModel} gridModel\n   * @private\n   */\n  _splitArea: function (axisModel, gridModel) {\n    var axis = axisModel.axis;\n\n    if (axis.scale.isBlank()) {\n      return;\n    }\n\n    var splitAreaModel = axisModel.getModel('splitArea');\n    var areaStyleModel = splitAreaModel.getModel('areaStyle');\n    var areaColors = areaStyleModel.get('color');\n    var gridRect = gridModel.coordinateSystem.getRect();\n    var ticksCoords = axis.getTicksCoords({\n      tickModel: splitAreaModel,\n      clamp: true\n    });\n\n    if (!ticksCoords.length) {\n      return;\n    } // For Making appropriate splitArea animation, the color and anid\n    // should be corresponding to previous one if possible.\n\n\n    var areaColorsLen = areaColors.length;\n    var lastSplitAreaColors = this._splitAreaColors;\n    var newSplitAreaColors = zrUtil.createHashMap();\n    var colorIndex = 0;\n\n    if (lastSplitAreaColors) {\n      for (var i = 0; i < ticksCoords.length; i++) {\n        var cIndex = lastSplitAreaColors.get(ticksCoords[i].tickValue);\n\n        if (cIndex != null) {\n          colorIndex = (cIndex + (areaColorsLen - 1) * i) % areaColorsLen;\n          break;\n        }\n      }\n    }\n\n    var prev = axis.toGlobalCoord(ticksCoords[0].coord);\n    var areaStyle = areaStyleModel.getAreaStyle();\n    areaColors = zrUtil.isArray(areaColors) ? areaColors : [areaColors];\n\n    for (var i = 1; i < ticksCoords.length; i++) {\n      var tickCoord = axis.toGlobalCoord(ticksCoords[i].coord);\n      var x;\n      var y;\n      var width;\n      var height;\n\n      if (axis.isHorizontal()) {\n        x = prev;\n        y = gridRect.y;\n        width = tickCoord - x;\n        height = gridRect.height;\n        prev = x + width;\n      } else {\n        x = gridRect.x;\n        y = prev;\n        width = gridRect.width;\n        height = tickCoord - y;\n        prev = y + height;\n      }\n\n      var tickValue = ticksCoords[i - 1].tickValue;\n      tickValue != null && newSplitAreaColors.set(tickValue, colorIndex);\n\n      this._axisGroup.add(new graphic.Rect({\n        anid: tickValue != null ? 'area_' + tickValue : null,\n        shape: {\n          x: x,\n          y: y,\n          width: width,\n          height: height\n        },\n        style: zrUtil.defaults({\n          fill: areaColors[colorIndex]\n        }, areaStyle),\n        silent: true\n      }));\n\n      colorIndex = (colorIndex + 1) % areaColorsLen;\n    }\n\n    this._splitAreaColors = newSplitAreaColors;\n  }\n});\nCartesianAxisView.extend({\n  type: 'xAxis'\n});\nCartesianAxisView.extend({\n  type: 'yAxis'\n});","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar echarts = require(\"../../echarts\");\n\nvar createListSimply = require(\"../helper/createListSimply\");\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar modelUtil = require(\"../../util/model\");\n\nvar _number = require(\"../../util/number\");\n\nvar getPercentWithPrecision = _number.getPercentWithPrecision;\n\nvar dataSelectableMixin = require(\"../../component/helper/selectableMixin\");\n\nvar _dataProvider = require(\"../../data/helper/dataProvider\");\n\nvar retrieveRawAttr = _dataProvider.retrieveRawAttr;\n\nvar _sourceHelper = require(\"../../data/helper/sourceHelper\");\n\nvar makeSeriesEncodeForNameBased = _sourceHelper.makeSeriesEncodeForNameBased;\n\nvar LegendVisualProvider = require(\"../../visual/LegendVisualProvider\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PieSeries = echarts.extendSeriesModel({\n  type: 'series.pie',\n  // Overwrite\n  init: function (option) {\n    PieSeries.superApply(this, 'init', arguments); // Enable legend selection for each data item\n    // Use a function instead of direct access because data reference may changed\n\n    this.legendVisualProvider = new LegendVisualProvider(zrUtil.bind(this.getData, this), zrUtil.bind(this.getRawData, this));\n    this.updateSelectedMap(this._createSelectableList());\n\n    this._defaultLabelLine(option);\n  },\n  // Overwrite\n  mergeOption: function (newOption) {\n    PieSeries.superCall(this, 'mergeOption', newOption);\n    this.updateSelectedMap(this._createSelectableList());\n  },\n  getInitialData: function (option, ecModel) {\n    return createListSimply(this, {\n      coordDimensions: ['value'],\n      encodeDefaulter: zrUtil.curry(makeSeriesEncodeForNameBased, this)\n    });\n  },\n  _createSelectableList: function () {\n    var data = this.getRawData();\n    var valueDim = data.mapDimension('value');\n    var targetList = [];\n\n    for (var i = 0, len = data.count(); i < len; i++) {\n      targetList.push({\n        name: data.getName(i),\n        value: data.get(valueDim, i),\n        selected: retrieveRawAttr(data, i, 'selected')\n      });\n    }\n\n    return targetList;\n  },\n  // Overwrite\n  getDataParams: function (dataIndex) {\n    var data = this.getData();\n    var params = PieSeries.superCall(this, 'getDataParams', dataIndex); // FIXME toFixed?\n\n    var valueList = [];\n    data.each(data.mapDimension('value'), function (value) {\n      valueList.push(value);\n    });\n    params.percent = getPercentWithPrecision(valueList, dataIndex, data.hostModel.get('percentPrecision'));\n    params.$vars.push('percent');\n    return params;\n  },\n  _defaultLabelLine: function (option) {\n    // Extend labelLine emphasis\n    modelUtil.defaultEmphasis(option, 'labelLine', ['show']);\n    var labelLineNormalOpt = option.labelLine;\n    var labelLineEmphasisOpt = option.emphasis.labelLine; // Not show label line if `label.normal.show = false`\n\n    labelLineNormalOpt.show = labelLineNormalOpt.show && option.label.show;\n    labelLineEmphasisOpt.show = labelLineEmphasisOpt.show && option.emphasis.label.show;\n  },\n  defaultOption: {\n    zlevel: 0,\n    z: 2,\n    legendHoverLink: true,\n    hoverAnimation: true,\n    // 默认全局居中\n    center: ['50%', '50%'],\n    radius: [0, '75%'],\n    // 默认顺时针\n    clockwise: true,\n    startAngle: 90,\n    // 最小角度改为0\n    minAngle: 0,\n    // If the angle of a sector less than `minShowLabelAngle`,\n    // the label will not be displayed.\n    minShowLabelAngle: 0,\n    // 选中时扇区偏移量\n    selectedOffset: 10,\n    // 高亮扇区偏移量\n    hoverOffset: 10,\n    // If use strategy to avoid label overlapping\n    avoidLabelOverlap: true,\n    // 选择模式，默认关闭，可选single，multiple\n    // selectedMode: false,\n    // 南丁格尔玫瑰图模式，'radius'（半径） | 'area'（面积）\n    // roseType: null,\n    percentPrecision: 2,\n    // If still show when all data zero.\n    stillShowZeroSum: true,\n    // cursor: null,\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    width: null,\n    height: null,\n    label: {\n      // If rotate around circle\n      rotate: false,\n      show: true,\n      // 'outer', 'inside', 'center'\n      position: 'outer',\n      // 'none', 'labelLine', 'edge'. Works only when position is 'outer'\n      alignTo: 'none',\n      // Closest distance between label and chart edge.\n      // Works only position is 'outer' and alignTo is 'edge'.\n      margin: '25%',\n      // Works only position is 'outer' and alignTo is not 'edge'.\n      bleedMargin: 10,\n      // Distance between text and label line.\n      distanceToLabelLine: 5 // formatter: 标签文本格式器，同Tooltip.formatter，不支持异步回调\n      // 默认使用全局文本样式，详见TEXTSTYLE\n      // distance: 当position为inner时有效，为label位置到圆心的距离与圆半径(环状图为内外半径和)的比例系数\n\n    },\n    // Enabled when label.normal.position is 'outer'\n    labelLine: {\n      show: true,\n      // 引导线两段中的第一段长度\n      length: 15,\n      // 引导线两段中的第二段长度\n      length2: 15,\n      smooth: false,\n      lineStyle: {\n        // color: 各异,\n        width: 1,\n        type: 'solid'\n      }\n    },\n    itemStyle: {\n      borderWidth: 1\n    },\n    // Animation type. Valid values: expansion, scale\n    animationType: 'expansion',\n    // Animation type when update. Valid values: transition, expansion\n    animationTypeUpdate: 'transition',\n    animationEasing: 'cubicOut'\n  }\n});\nzrUtil.mixin(PieSeries, dataSelectableMixin);\nvar _default = PieSeries;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _util = require(\"zrender/lib/core/util\");\n\nvar retrieve = _util.retrieve;\nvar defaults = _util.defaults;\nvar extend = _util.extend;\nvar each = _util.each;\nvar map = _util.map;\n\nvar formatUtil = require(\"../../util/format\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar Model = require(\"../../model/Model\");\n\nvar _number = require(\"../../util/number\");\n\nvar isRadianAroundZero = _number.isRadianAroundZero;\nvar remRadian = _number.remRadian;\n\nvar _symbol = require(\"../../util/symbol\");\n\nvar createSymbol = _symbol.createSymbol;\n\nvar matrixUtil = require(\"zrender/lib/core/matrix\");\n\nvar _vector = require(\"zrender/lib/core/vector\");\n\nvar v2ApplyTransform = _vector.applyTransform;\n\nvar _axisHelper = require(\"../../coord/axisHelper\");\n\nvar shouldShowAllLabels = _axisHelper.shouldShowAllLabels;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar PI = Math.PI;\n/**\n * A final axis is translated and rotated from a \"standard axis\".\n * So opt.position and opt.rotation is required.\n *\n * A standard axis is and axis from [0, 0] to [0, axisExtent[1]],\n * for example: (0, 0) ------------> (0, 50)\n *\n * nameDirection or tickDirection or labelDirection is 1 means tick\n * or label is below the standard axis, whereas is -1 means above\n * the standard axis. labelOffset means offset between label and axis,\n * which is useful when 'onZero', where axisLabel is in the grid and\n * label in outside grid.\n *\n * Tips: like always,\n * positive rotation represents anticlockwise, and negative rotation\n * represents clockwise.\n * The direction of position coordinate is the same as the direction\n * of screen coordinate.\n *\n * Do not need to consider axis 'inverse', which is auto processed by\n * axis extent.\n *\n * @param {module:zrender/container/Group} group\n * @param {Object} axisModel\n * @param {Object} opt Standard axis parameters.\n * @param {Array.<number>} opt.position [x, y]\n * @param {number} opt.rotation by radian\n * @param {number} [opt.nameDirection=1] 1 or -1 Used when nameLocation is 'middle' or 'center'.\n * @param {number} [opt.tickDirection=1] 1 or -1\n * @param {number} [opt.labelDirection=1] 1 or -1\n * @param {number} [opt.labelOffset=0] Usefull when onZero.\n * @param {string} [opt.axisLabelShow] default get from axisModel.\n * @param {string} [opt.axisName] default get from axisModel.\n * @param {number} [opt.axisNameAvailableWidth]\n * @param {number} [opt.labelRotate] by degree, default get from axisModel.\n * @param {number} [opt.strokeContainThreshold] Default label interval when label\n * @param {number} [opt.nameTruncateMaxWidth]\n */\n\nvar AxisBuilder = function (axisModel, opt) {\n  /**\n   * @readOnly\n   */\n  this.opt = opt;\n  /**\n   * @readOnly\n   */\n\n  this.axisModel = axisModel; // Default value\n\n  defaults(opt, {\n    labelOffset: 0,\n    nameDirection: 1,\n    tickDirection: 1,\n    labelDirection: 1,\n    silent: true\n  });\n  /**\n   * @readOnly\n   */\n\n  this.group = new graphic.Group(); // FIXME Not use a seperate text group?\n\n  var dumbGroup = new graphic.Group({\n    position: opt.position.slice(),\n    rotation: opt.rotation\n  }); // this.group.add(dumbGroup);\n  // this._dumbGroup = dumbGroup;\n\n  dumbGroup.updateTransform();\n  this._transform = dumbGroup.transform;\n  this._dumbGroup = dumbGroup;\n};\n\nAxisBuilder.prototype = {\n  constructor: AxisBuilder,\n  hasBuilder: function (name) {\n    return !!builders[name];\n  },\n  add: function (name) {\n    builders[name].call(this);\n  },\n  getGroup: function () {\n    return this.group;\n  }\n};\nvar builders = {\n  /**\n   * @private\n   */\n  axisLine: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n\n    if (!axisModel.get('axisLine.show')) {\n      return;\n    }\n\n    var extent = this.axisModel.axis.getExtent();\n    var matrix = this._transform;\n    var pt1 = [extent[0], 0];\n    var pt2 = [extent[1], 0];\n\n    if (matrix) {\n      v2ApplyTransform(pt1, pt1, matrix);\n      v2ApplyTransform(pt2, pt2, matrix);\n    }\n\n    var lineStyle = extend({\n      lineCap: 'round'\n    }, axisModel.getModel('axisLine.lineStyle').getLineStyle());\n    this.group.add(new graphic.Line({\n      // Id for animation\n      anid: 'line',\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: lineStyle,\n      strokeContainThreshold: opt.strokeContainThreshold || 5,\n      silent: true,\n      z2: 1\n    }));\n    var arrows = axisModel.get('axisLine.symbol');\n    var arrowSize = axisModel.get('axisLine.symbolSize');\n    var arrowOffset = axisModel.get('axisLine.symbolOffset') || 0;\n\n    if (typeof arrowOffset === 'number') {\n      arrowOffset = [arrowOffset, arrowOffset];\n    }\n\n    if (arrows != null) {\n      if (typeof arrows === 'string') {\n        // Use the same arrow for start and end point\n        arrows = [arrows, arrows];\n      }\n\n      if (typeof arrowSize === 'string' || typeof arrowSize === 'number') {\n        // Use the same size for width and height\n        arrowSize = [arrowSize, arrowSize];\n      }\n\n      var symbolWidth = arrowSize[0];\n      var symbolHeight = arrowSize[1];\n      each([{\n        rotate: opt.rotation + Math.PI / 2,\n        offset: arrowOffset[0],\n        r: 0\n      }, {\n        rotate: opt.rotation - Math.PI / 2,\n        offset: arrowOffset[1],\n        r: Math.sqrt((pt1[0] - pt2[0]) * (pt1[0] - pt2[0]) + (pt1[1] - pt2[1]) * (pt1[1] - pt2[1]))\n      }], function (point, index) {\n        if (arrows[index] !== 'none' && arrows[index] != null) {\n          var symbol = createSymbol(arrows[index], -symbolWidth / 2, -symbolHeight / 2, symbolWidth, symbolHeight, lineStyle.stroke, true); // Calculate arrow position with offset\n\n          var r = point.r + point.offset;\n          var pos = [pt1[0] + r * Math.cos(opt.rotation), pt1[1] - r * Math.sin(opt.rotation)];\n          symbol.attr({\n            rotation: point.rotate,\n            position: pos,\n            silent: true,\n            z2: 11\n          });\n          this.group.add(symbol);\n        }\n      }, this);\n    }\n  },\n\n  /**\n   * @private\n   */\n  axisTickLabel: function () {\n    var axisModel = this.axisModel;\n    var opt = this.opt;\n    var ticksEls = buildAxisMajorTicks(this, axisModel, opt);\n    var labelEls = buildAxisLabel(this, axisModel, opt);\n    fixMinMaxLabelShow(axisModel, labelEls, ticksEls);\n    buildAxisMinorTicks(this, axisModel, opt);\n  },\n\n  /**\n   * @private\n   */\n  axisName: function () {\n    var opt = this.opt;\n    var axisModel = this.axisModel;\n    var name = retrieve(opt.axisName, axisModel.get('name'));\n\n    if (!name) {\n      return;\n    }\n\n    var nameLocation = axisModel.get('nameLocation');\n    var nameDirection = opt.nameDirection;\n    var textStyleModel = axisModel.getModel('nameTextStyle');\n    var gap = axisModel.get('nameGap') || 0;\n    var extent = this.axisModel.axis.getExtent();\n    var gapSignal = extent[0] > extent[1] ? -1 : 1;\n    var pos = [nameLocation === 'start' ? extent[0] - gapSignal * gap : nameLocation === 'end' ? extent[1] + gapSignal * gap : (extent[0] + extent[1]) / 2, // 'middle'\n    // Reuse labelOffset.\n    isNameLocationCenter(nameLocation) ? opt.labelOffset + nameDirection * gap : 0];\n    var labelLayout;\n    var nameRotation = axisModel.get('nameRotate');\n\n    if (nameRotation != null) {\n      nameRotation = nameRotation * PI / 180; // To radian.\n    }\n\n    var axisNameAvailableWidth;\n\n    if (isNameLocationCenter(nameLocation)) {\n      labelLayout = innerTextLayout(opt.rotation, nameRotation != null ? nameRotation : opt.rotation, // Adapt to axis.\n      nameDirection);\n    } else {\n      labelLayout = endTextLayout(opt, nameLocation, nameRotation || 0, extent);\n      axisNameAvailableWidth = opt.axisNameAvailableWidth;\n\n      if (axisNameAvailableWidth != null) {\n        axisNameAvailableWidth = Math.abs(axisNameAvailableWidth / Math.sin(labelLayout.rotation));\n        !isFinite(axisNameAvailableWidth) && (axisNameAvailableWidth = null);\n      }\n    }\n\n    var textFont = textStyleModel.getFont();\n    var truncateOpt = axisModel.get('nameTruncate', true) || {};\n    var ellipsis = truncateOpt.ellipsis;\n    var maxWidth = retrieve(opt.nameTruncateMaxWidth, truncateOpt.maxWidth, axisNameAvailableWidth); // FIXME\n    // truncate rich text? (consider performance)\n\n    var truncatedText = ellipsis != null && maxWidth != null ? formatUtil.truncateText(name, maxWidth, textFont, ellipsis, {\n      minChar: 2,\n      placeholder: truncateOpt.placeholder\n    }) : name;\n    var tooltipOpt = axisModel.get('tooltip', true);\n    var mainType = axisModel.mainType;\n    var formatterParams = {\n      componentType: mainType,\n      name: name,\n      $vars: ['name']\n    };\n    formatterParams[mainType + 'Index'] = axisModel.componentIndex;\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'name',\n      __fullText: name,\n      __truncatedText: truncatedText,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: isLabelSilent(axisModel),\n      z2: 1,\n      tooltip: tooltipOpt && tooltipOpt.show ? extend({\n        content: name,\n        formatter: function () {\n          return name;\n        },\n        formatterParams: formatterParams\n      }, tooltipOpt) : null\n    });\n    graphic.setTextStyle(textEl.style, textStyleModel, {\n      text: truncatedText,\n      textFont: textFont,\n      textFill: textStyleModel.getTextColor() || axisModel.get('axisLine.lineStyle.color'),\n      textAlign: textStyleModel.get('align') || labelLayout.textAlign,\n      textVerticalAlign: textStyleModel.get('verticalAlign') || labelLayout.textVerticalAlign\n    });\n\n    if (axisModel.get('triggerEvent')) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisName';\n      textEl.eventData.name = name;\n    } // FIXME\n\n\n    this._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    this.group.add(textEl);\n    textEl.decomposeTransform();\n  }\n};\n\nvar makeAxisEventDataBase = AxisBuilder.makeAxisEventDataBase = function (axisModel) {\n  var eventData = {\n    componentType: axisModel.mainType,\n    componentIndex: axisModel.componentIndex\n  };\n  eventData[axisModel.mainType + 'Index'] = axisModel.componentIndex;\n  return eventData;\n};\n/**\n * @public\n * @static\n * @param {Object} opt\n * @param {number} axisRotation in radian\n * @param {number} textRotation in radian\n * @param {number} direction\n * @return {Object} {\n *  rotation, // according to axis\n *  textAlign,\n *  textVerticalAlign\n * }\n */\n\n\nvar innerTextLayout = AxisBuilder.innerTextLayout = function (axisRotation, textRotation, direction) {\n  var rotationDiff = remRadian(textRotation - axisRotation);\n  var textAlign;\n  var textVerticalAlign;\n\n  if (isRadianAroundZero(rotationDiff)) {\n    // Label is parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI)) {\n    // Label is inverse parallel with axis line.\n    textVerticalAlign = direction > 0 ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff > 0 && rotationDiff < PI) {\n      textAlign = direction > 0 ? 'right' : 'left';\n    } else {\n      textAlign = direction > 0 ? 'left' : 'right';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n};\n\nfunction endTextLayout(opt, textPosition, textRotate, extent) {\n  var rotationDiff = remRadian(textRotate - opt.rotation);\n  var textAlign;\n  var textVerticalAlign;\n  var inverse = extent[0] > extent[1];\n  var onLeft = textPosition === 'start' && !inverse || textPosition !== 'start' && inverse;\n\n  if (isRadianAroundZero(rotationDiff - PI / 2)) {\n    textVerticalAlign = onLeft ? 'bottom' : 'top';\n    textAlign = 'center';\n  } else if (isRadianAroundZero(rotationDiff - PI * 1.5)) {\n    textVerticalAlign = onLeft ? 'top' : 'bottom';\n    textAlign = 'center';\n  } else {\n    textVerticalAlign = 'middle';\n\n    if (rotationDiff < PI * 1.5 && rotationDiff > PI / 2) {\n      textAlign = onLeft ? 'left' : 'right';\n    } else {\n      textAlign = onLeft ? 'right' : 'left';\n    }\n  }\n\n  return {\n    rotation: rotationDiff,\n    textAlign: textAlign,\n    textVerticalAlign: textVerticalAlign\n  };\n}\n\nvar isLabelSilent = AxisBuilder.isLabelSilent = function (axisModel) {\n  var tooltipOpt = axisModel.get('tooltip');\n  return axisModel.get('silent') // Consider mouse cursor, add these restrictions.\n  || !(axisModel.get('triggerEvent') || tooltipOpt && tooltipOpt.show);\n};\n\nfunction fixMinMaxLabelShow(axisModel, labelEls, tickEls) {\n  if (shouldShowAllLabels(axisModel.axis)) {\n    return;\n  } // If min or max are user set, we need to check\n  // If the tick on min(max) are overlap on their neighbour tick\n  // If they are overlapped, we need to hide the min(max) tick label\n\n\n  var showMinLabel = axisModel.get('axisLabel.showMinLabel');\n  var showMaxLabel = axisModel.get('axisLabel.showMaxLabel'); // FIXME\n  // Have not consider onBand yet, where tick els is more than label els.\n\n  labelEls = labelEls || [];\n  tickEls = tickEls || [];\n  var firstLabel = labelEls[0];\n  var nextLabel = labelEls[1];\n  var lastLabel = labelEls[labelEls.length - 1];\n  var prevLabel = labelEls[labelEls.length - 2];\n  var firstTick = tickEls[0];\n  var nextTick = tickEls[1];\n  var lastTick = tickEls[tickEls.length - 1];\n  var prevTick = tickEls[tickEls.length - 2];\n\n  if (showMinLabel === false) {\n    ignoreEl(firstLabel);\n    ignoreEl(firstTick);\n  } else if (isTwoLabelOverlapped(firstLabel, nextLabel)) {\n    if (showMinLabel) {\n      ignoreEl(nextLabel);\n      ignoreEl(nextTick);\n    } else {\n      ignoreEl(firstLabel);\n      ignoreEl(firstTick);\n    }\n  }\n\n  if (showMaxLabel === false) {\n    ignoreEl(lastLabel);\n    ignoreEl(lastTick);\n  } else if (isTwoLabelOverlapped(prevLabel, lastLabel)) {\n    if (showMaxLabel) {\n      ignoreEl(prevLabel);\n      ignoreEl(prevTick);\n    } else {\n      ignoreEl(lastLabel);\n      ignoreEl(lastTick);\n    }\n  }\n}\n\nfunction ignoreEl(el) {\n  el && (el.ignore = true);\n}\n\nfunction isTwoLabelOverlapped(current, next, labelLayout) {\n  // current and next has the same rotation.\n  var firstRect = current && current.getBoundingRect().clone();\n  var nextRect = next && next.getBoundingRect().clone();\n\n  if (!firstRect || !nextRect) {\n    return;\n  } // When checking intersect of two rotated labels, we use mRotationBack\n  // to avoid that boundingRect is enlarge when using `boundingRect.applyTransform`.\n\n\n  var mRotationBack = matrixUtil.identity([]);\n  matrixUtil.rotate(mRotationBack, mRotationBack, -current.rotation);\n  firstRect.applyTransform(matrixUtil.mul([], mRotationBack, current.getLocalTransform()));\n  nextRect.applyTransform(matrixUtil.mul([], mRotationBack, next.getLocalTransform()));\n  return firstRect.intersect(nextRect);\n}\n\nfunction isNameLocationCenter(nameLocation) {\n  return nameLocation === 'middle' || nameLocation === 'center';\n}\n\nfunction createTicks(ticksCoords, tickTransform, tickEndCoord, tickLineStyle, aniid) {\n  var tickEls = [];\n  var pt1 = [];\n  var pt2 = [];\n\n  for (var i = 0; i < ticksCoords.length; i++) {\n    var tickCoord = ticksCoords[i].coord;\n    pt1[0] = tickCoord;\n    pt1[1] = 0;\n    pt2[0] = tickCoord;\n    pt2[1] = tickEndCoord;\n\n    if (tickTransform) {\n      v2ApplyTransform(pt1, pt1, tickTransform);\n      v2ApplyTransform(pt2, pt2, tickTransform);\n    } // Tick line, Not use group transform to have better line draw\n\n\n    var tickEl = new graphic.Line({\n      // Id for animation\n      anid: aniid + '_' + ticksCoords[i].tickValue,\n      subPixelOptimize: true,\n      shape: {\n        x1: pt1[0],\n        y1: pt1[1],\n        x2: pt2[0],\n        y2: pt2[1]\n      },\n      style: tickLineStyle,\n      z2: 2,\n      silent: true\n    });\n    tickEls.push(tickEl);\n  }\n\n  return tickEls;\n}\n\nfunction buildAxisMajorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var tickModel = axisModel.getModel('axisTick');\n\n  if (!tickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var lineStyleModel = tickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * tickModel.get('length');\n  var ticksCoords = axis.getTicksCoords();\n  var ticksEls = createTicks(ticksCoords, axisBuilder._transform, tickEndCoord, defaults(lineStyleModel.getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }), 'ticks');\n\n  for (var i = 0; i < ticksEls.length; i++) {\n    axisBuilder.group.add(ticksEls[i]);\n  }\n\n  return ticksEls;\n}\n\nfunction buildAxisMinorTicks(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var minorTickModel = axisModel.getModel('minorTick');\n\n  if (!minorTickModel.get('show') || axis.scale.isBlank()) {\n    return;\n  }\n\n  var minorTicksCoords = axis.getMinorTicksCoords();\n\n  if (!minorTicksCoords.length) {\n    return;\n  }\n\n  var lineStyleModel = minorTickModel.getModel('lineStyle');\n  var tickEndCoord = opt.tickDirection * minorTickModel.get('length');\n  var minorTickLineStyle = defaults(lineStyleModel.getLineStyle(), defaults(axisModel.getModel('axisTick').getLineStyle(), {\n    stroke: axisModel.get('axisLine.lineStyle.color')\n  }));\n\n  for (var i = 0; i < minorTicksCoords.length; i++) {\n    var minorTicksEls = createTicks(minorTicksCoords[i], axisBuilder._transform, tickEndCoord, minorTickLineStyle, 'minorticks_' + i);\n\n    for (var k = 0; k < minorTicksEls.length; k++) {\n      axisBuilder.group.add(minorTicksEls[k]);\n    }\n  }\n}\n\nfunction buildAxisLabel(axisBuilder, axisModel, opt) {\n  var axis = axisModel.axis;\n  var show = retrieve(opt.axisLabelShow, axisModel.get('axisLabel.show'));\n\n  if (!show || axis.scale.isBlank()) {\n    return;\n  }\n\n  var labelModel = axisModel.getModel('axisLabel');\n  var labelMargin = labelModel.get('margin');\n  var labels = axis.getViewLabels(); // Special label rotate.\n\n  var labelRotation = (retrieve(opt.labelRotate, labelModel.get('rotate')) || 0) * PI / 180;\n  var labelLayout = innerTextLayout(opt.rotation, labelRotation, opt.labelDirection);\n  var rawCategoryData = axisModel.getCategories && axisModel.getCategories(true);\n  var labelEls = [];\n  var silent = isLabelSilent(axisModel);\n  var triggerEvent = axisModel.get('triggerEvent');\n  each(labels, function (labelItem, index) {\n    var tickValue = labelItem.tickValue;\n    var formattedLabel = labelItem.formattedLabel;\n    var rawLabel = labelItem.rawLabel;\n    var itemLabelModel = labelModel;\n\n    if (rawCategoryData && rawCategoryData[tickValue] && rawCategoryData[tickValue].textStyle) {\n      itemLabelModel = new Model(rawCategoryData[tickValue].textStyle, labelModel, axisModel.ecModel);\n    }\n\n    var textColor = itemLabelModel.getTextColor() || axisModel.get('axisLine.lineStyle.color');\n    var tickCoord = axis.dataToCoord(tickValue);\n    var pos = [tickCoord, opt.labelOffset + opt.labelDirection * labelMargin];\n    var textEl = new graphic.Text({\n      // Id for animation\n      anid: 'label_' + tickValue,\n      position: pos,\n      rotation: labelLayout.rotation,\n      silent: silent,\n      z2: 10\n    });\n    graphic.setTextStyle(textEl.style, itemLabelModel, {\n      text: formattedLabel,\n      textAlign: itemLabelModel.getShallow('align', true) || labelLayout.textAlign,\n      textVerticalAlign: itemLabelModel.getShallow('verticalAlign', true) || itemLabelModel.getShallow('baseline', true) || labelLayout.textVerticalAlign,\n      textFill: typeof textColor === 'function' ? textColor( // (1) In category axis with data zoom, tick is not the original\n      // index of axis.data. So tick should not be exposed to user\n      // in category axis.\n      // (2) Compatible with previous version, which always use formatted label as\n      // input. But in interval scale the formatted label is like '223,445', which\n      // maked user repalce ','. So we modify it to return original val but remain\n      // it as 'string' to avoid error in replacing.\n      axis.type === 'category' ? rawLabel : axis.type === 'value' ? tickValue + '' : tickValue, index) : textColor\n    }); // Pack data for mouse event\n\n    if (triggerEvent) {\n      textEl.eventData = makeAxisEventDataBase(axisModel);\n      textEl.eventData.targetType = 'axisLabel';\n      textEl.eventData.value = rawLabel;\n    } // FIXME\n\n\n    axisBuilder._dumbGroup.add(textEl);\n\n    textEl.updateTransform();\n    labelEls.push(textEl);\n    axisBuilder.group.add(textEl);\n    textEl.decomposeTransform();\n  });\n  return labelEls;\n}\n\nvar _default = AxisBuilder;\nmodule.exports = _default;","\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar zrUtil = require(\"zrender/lib/core/util\");\n\nvar graphic = require(\"../../util/graphic\");\n\nvar textContain = require(\"zrender/lib/contain/text\");\n\nvar formatUtil = require(\"../../util/format\");\n\nvar matrix = require(\"zrender/lib/core/matrix\");\n\nvar axisHelper = require(\"../../coord/axisHelper\");\n\nvar AxisBuilder = require(\"../axis/AxisBuilder\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/**\n * @param {module:echarts/model/Model} axisPointerModel\n */\nfunction buildElStyle(axisPointerModel) {\n  var axisPointerType = axisPointerModel.get('type');\n  var styleModel = axisPointerModel.getModel(axisPointerType + 'Style');\n  var style;\n\n  if (axisPointerType === 'line') {\n    style = styleModel.getLineStyle();\n    style.fill = null;\n  } else if (axisPointerType === 'shadow') {\n    style = styleModel.getAreaStyle();\n    style.stroke = null;\n  }\n\n  return style;\n}\n/**\n * @param {Function} labelPos {align, verticalAlign, position}\n */\n\n\nfunction buildLabelElOption(elOption, axisModel, axisPointerModel, api, labelPos) {\n  var value = axisPointerModel.get('value');\n  var text = getValueLabel(value, axisModel.axis, axisModel.ecModel, axisPointerModel.get('seriesDataIndices'), {\n    precision: axisPointerModel.get('label.precision'),\n    formatter: axisPointerModel.get('label.formatter')\n  });\n  var labelModel = axisPointerModel.getModel('label');\n  var paddings = formatUtil.normalizeCssArray(labelModel.get('padding') || 0);\n  var font = labelModel.getFont();\n  var textRect = textContain.getBoundingRect(text, font);\n  var position = labelPos.position;\n  var width = textRect.width + paddings[1] + paddings[3];\n  var height = textRect.height + paddings[0] + paddings[2]; // Adjust by align.\n\n  var align = labelPos.align;\n  align === 'right' && (position[0] -= width);\n  align === 'center' && (position[0] -= width / 2);\n  var verticalAlign = labelPos.verticalAlign;\n  verticalAlign === 'bottom' && (position[1] -= height);\n  verticalAlign === 'middle' && (position[1] -= height / 2); // Not overflow ec container\n\n  confineInContainer(position, width, height, api);\n  var bgColor = labelModel.get('backgroundColor');\n\n  if (!bgColor || bgColor === 'auto') {\n    bgColor = axisModel.get('axisLine.lineStyle.color');\n  }\n\n  elOption.label = {\n    shape: {\n      x: 0,\n      y: 0,\n      width: width,\n      height: height,\n      r: labelModel.get('borderRadius')\n    },\n    position: position.slice(),\n    // TODO: rich\n    style: {\n      text: text,\n      textFont: font,\n      textFill: labelModel.getTextColor(),\n      textPosition: 'inside',\n      textPadding: paddings,\n      fill: bgColor,\n      stroke: labelModel.get('borderColor') || 'transparent',\n      lineWidth: labelModel.get('borderWidth') || 0,\n      shadowBlur: labelModel.get('shadowBlur'),\n      shadowColor: labelModel.get('shadowColor'),\n      shadowOffsetX: labelModel.get('shadowOffsetX'),\n      shadowOffsetY: labelModel.get('shadowOffsetY')\n    },\n    // Lable should be over axisPointer.\n    z2: 10\n  };\n} // Do not overflow ec container\n\n\nfunction confineInContainer(position, width, height, api) {\n  var viewWidth = api.getWidth();\n  var viewHeight = api.getHeight();\n  position[0] = Math.min(position[0] + width, viewWidth) - width;\n  position[1] = Math.min(position[1] + height, viewHeight) - height;\n  position[0] = Math.max(position[0], 0);\n  position[1] = Math.max(position[1], 0);\n}\n/**\n * @param {number} value\n * @param {module:echarts/coord/Axis} axis\n * @param {module:echarts/model/Global} ecModel\n * @param {Object} opt\n * @param {Array.<Object>} seriesDataIndices\n * @param {number|string} opt.precision 'auto' or a number\n * @param {string|Function} opt.formatter label formatter\n */\n\n\nfunction getValueLabel(value, axis, ecModel, seriesDataIndices, opt) {\n  value = axis.scale.parse(value);\n  var text = axis.scale.getLabel( // If `precision` is set, width can be fixed (like '12.00500'), which\n  // helps to debounce when when moving label.\n  value, {\n    precision: opt.precision\n  });\n  var formatter = opt.formatter;\n\n  if (formatter) {\n    var params = {\n      value: axisHelper.getAxisRawValue(axis, value),\n      axisDimension: axis.dim,\n      axisIndex: axis.index,\n      seriesData: []\n    };\n    zrUtil.each(seriesDataIndices, function (idxItem) {\n      var series = ecModel.getSeriesByIndex(idxItem.seriesIndex);\n      var dataIndex = idxItem.dataIndexInside;\n      var dataParams = series && series.getDataParams(dataIndex);\n      dataParams && params.seriesData.push(dataParams);\n    });\n\n    if (zrUtil.isString(formatter)) {\n      text = formatter.replace('{value}', text);\n    } else if (zrUtil.isFunction(formatter)) {\n      text = formatter(params);\n    }\n  }\n\n  return text;\n}\n/**\n * @param {module:echarts/coord/Axis} axis\n * @param {number} value\n * @param {Object} layoutInfo {\n *  rotation, position, labelOffset, labelDirection, labelMargin\n * }\n */\n\n\nfunction getTransformedPosition(axis, value, layoutInfo) {\n  var transform = matrix.create();\n  matrix.rotate(transform, transform, layoutInfo.rotation);\n  matrix.translate(transform, transform, layoutInfo.position);\n  return graphic.applyTransform([axis.dataToCoord(value), (layoutInfo.labelOffset || 0) + (layoutInfo.labelDirection || 1) * (layoutInfo.labelMargin || 0)], transform);\n}\n\nfunction buildCartesianSingleLabelElOption(value, elOption, layoutInfo, axisModel, axisPointerModel, api) {\n  var textLayout = AxisBuilder.innerTextLayout(layoutInfo.rotation, 0, layoutInfo.labelDirection);\n  layoutInfo.labelMargin = axisPointerModel.get('label.margin');\n  buildLabelElOption(elOption, axisModel, axisPointerModel, api, {\n    position: getTransformedPosition(axisModel.axis, value, layoutInfo),\n    align: textLayout.textAlign,\n    verticalAlign: textLayout.textVerticalAlign\n  });\n}\n/**\n * @param {Array.<number>} p1\n * @param {Array.<number>} p2\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeLineShape(p1, p2, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x1: p1[xDimIndex],\n    y1: p1[1 - xDimIndex],\n    x2: p2[xDimIndex],\n    y2: p2[1 - xDimIndex]\n  };\n}\n/**\n * @param {Array.<number>} xy\n * @param {Array.<number>} wh\n * @param {number} [xDimIndex=0] or 1\n */\n\n\nfunction makeRectShape(xy, wh, xDimIndex) {\n  xDimIndex = xDimIndex || 0;\n  return {\n    x: xy[xDimIndex],\n    y: xy[1 - xDimIndex],\n    width: wh[xDimIndex],\n    height: wh[1 - xDimIndex]\n  };\n}\n\nfunction makeSectorShape(cx, cy, r0, r, startAngle, endAngle) {\n  return {\n    cx: cx,\n    cy: cy,\n    r0: r0,\n    r: r,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    clockwise: true\n  };\n}\n\nexports.buildElStyle = buildElStyle;\nexports.buildLabelElOption = buildLabelElOption;\nexports.getValueLabel = getValueLabel;\nexports.getTransformedPosition = getTransformedPosition;\nexports.buildCartesianSingleLabelElOption = buildCartesianSingleLabelElOption;\nexports.makeLineShape = makeLineShape;\nexports.makeRectShape = makeRectShape;\nexports.makeSectorShape = makeSectorShape;"],"sourceRoot":""}